<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Yocto debugging commands</title>
    <url>/2020-03-07/Yocto-debugging-commands/</url>
    <content><![CDATA[<p>Notes about some useful Yocto debugging commands</p>
<a id="more"></a>

<h2 id="Checking-owner-of-installed-files"><a href="#Checking-owner-of-installed-files" class="headerlink" title="Checking owner of installed files"></a>Checking owner of installed files</h2><p>Assuming that build environments is ready(which means you can run <code>bitbake</code> normally), using <code>oe-pkgdata-util</code> can help to find the recipe who populated it. i.e:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">oe-pkgdata-util find-path /lib/ld-2.28.so</span><br><span class="line">glibc: /lib/ld-2.28.so</span><br></pre></td></tr></table></figure>
<p><em>/lib/ld-2.28.so</em> was installed by <strong>glibc</strong></p>
<h2 id="Checking-packages-are-going-to-install"><a href="#Checking-packages-are-going-to-install" class="headerlink" title="Checking packages are going to install"></a>Checking packages are going to install</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake -g &lt;image&gt; &amp;&amp; cat pn-buildlist | grep -ve <span class="string">"native"</span> | sort | uniq</span><br></pre></td></tr></table></figure>

<h2 id="Checking-packages-installed"><a href="#Checking-packages-installed" class="headerlink" title="Checking packages installed"></a>Checking packages installed</h2><p>There are several <em>.manifest</em> files under the path of built images, which contained packages has been installed.</p>
<h2 id="Checking-variables-inside-recipes"><a href="#Checking-variables-inside-recipes" class="headerlink" title="Checking variables inside recipes"></a>Checking variables inside recipes</h2><p><code>bb.utils.contains</code> can help to check variables inside recipes. i.e. we‚Äôd like to install some files base on <strong>MACHINE_FEATURES</strong> :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">do_install() &#123;</span><br><span class="line">    if $&#123;@bb.utils.contains(&#39;MACHINE_FEATURES&#39;,&#39;ethernet&#39;,&#39;true&#39;,&#39;false&#39;,d)&#125;; then</span><br><span class="line">        install -d $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;network&#x2F;</span><br><span class="line">        install -m 0644 $&#123;WORKDIR&#125;&#x2F;10-eth.network $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;network&#x2F;</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    if $&#123;@bb.utils.contains(&#39;MACHINE_FEATURES&#39;,&#39;wifi&#39;,&#39;true&#39;,&#39;false&#39;,d)&#125;; then</span><br><span class="line">        install -d $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;network&#x2F;</span><br><span class="line">        install -m 0644 $&#123;WORKDIR&#125;&#x2F;51-wlan.network $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;network&#x2F;</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Below is the python code from openembedded, which explains usage of this function:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">contains</span><span class="params">(variable, checkvalues, truevalue, falsevalue, d)</span>:</span></span><br><span class="line">   <span class="string">"""Check if a variable contains all the values specified.</span></span><br><span class="line"><span class="string">   Arguments:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   variable -- the variable name. This will be fetched and expanded (using</span></span><br><span class="line"><span class="string">   d.getVar(variable)) and then split into a set().</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   checkvalues -- if this is a string it is split on whitespace into a set(),</span></span><br><span class="line"><span class="string">   otherwise coerced directly into a set().</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   truevalue -- the value to return if checkvalues is a subset of variable.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   falsevalue -- the value to return if variable is empty or if checkvalues is</span></span><br><span class="line"><span class="string">   not a subset of variable.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   d -- the data store.</span></span><br><span class="line"><span class="string">   """</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32MP1: NFS rootfs</title>
    <url>/2020-03-01/STM32MP1-NFS-rootfs/</url>
    <content><![CDATA[<p>Last and this weekend I spend some time on mounting NFS rootfs on STM32MP1‚Ä¶ There are some PHY driver issues and permission issues troubled me a lot‚Ä¶</p>
<a id="more"></a>

<h2 id="Pre-requirements"><a href="#Pre-requirements" class="headerlink" title="Pre-requirements"></a>Pre-requirements</h2><ul>
<li><span style="color:red">nfs-kernel-server</span> has been installed on server side</li>
<li>Board and PC are in same LAN</li>
</ul>
<h2 id="Exports-settings"><a href="#Exports-settings" class="headerlink" title="Exports settings"></a>Exports settings</h2><p>Assuming that we will put board rootfs under <em>/home/alex/data/srv/nfs</em>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /etc/exports</span><br><span class="line"><span class="comment"># /etc/exports: the access control list for filesystems which may be exported</span></span><br><span class="line"><span class="comment">#		to NFS clients.  See exports(5).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example for NFSv2 and NFSv3:</span></span><br><span class="line"><span class="comment"># /srv/homes       hostname1(rw,sync,no_subtree_check) hostname2(ro,sync,no_subtree_check)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Example for NFSv4:</span></span><br><span class="line"><span class="comment"># /srv/nfs4        gss/krb5i(rw,sync,fsid=0,crossmnt,no_subtree_check)</span></span><br><span class="line"><span class="comment"># /srv/nfs4/homes  gss/krb5i(rw,sync,no_subtree_check)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">/home/alex/data/srv/nfs 192.168.0.*(rw,sync,no_subtree_check,no_root_squash)</span><br></pre></td></tr></table></figure>

<ul>
<li>Wildcard in ip address(192.168.0.*) is supported, which is helpful for multiple boards</li>
<li><span style="color:red">no_root_squash</span> will map NFS client root user as NFS server root user</li>
</ul>
<p>After modifying <em>/etc/exports</em>, we can restart nfs server and check server exports:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart nfs-kernel-server</span><br><span class="line">sudo exportfs</span><br><span class="line"></span><br><span class="line">/home/alex/data/srv/nfs</span><br><span class="line">		192.168.0.*</span><br></pre></td></tr></table></figure>

<h2 id="PXE-configuration-file"><a href="#PXE-configuration-file" class="headerlink" title="PXE configuration file"></a>PXE configuration file</h2><p>Create PXE configuration file for nfs booting. U-boot will pass chosen parameters to kernel.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu title Select the boot mode</span><br><span class="line"> DEFAULT eMMC</span><br><span class="line"> TIMEOUT 20</span><br><span class="line"> LABEL initramfs</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	INITRD uInitrd</span><br><span class="line"> 	APPEND rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line"> LABEL nfs</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	APPEND root&#x3D;&#x2F;dev&#x2F;nfs ip&#x3D;192.168.0.102 nfsroot&#x3D;192.168.0.101:&#x2F;home&#x2F;alex&#x2F;data&#x2F;srv&#x2F;nfs,nfsvers&#x3D;3 rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line"> LABEL sdcard</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	APPEND root&#x3D;&#x2F;dev&#x2F;mmcblk0p6 rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line"> LABEL eMMC</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb </span><br><span class="line"> 	APPEND root&#x3D;&#x2F;dev&#x2F;mmcblk1p6 rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br></pre></td></tr></table></figure>

<p><strong>LABEL nfs</strong> was set for nfs rootfs:</p>
<ul>
<li><strong>root=/dev/nfs</strong> Set nfs as rootfs</li>
<li><strong>ip=192.168.0.102</strong> Set board ip address, also can be <strong>dhcp</strong></li>
<li><strong>nfsroot=192.168.0.101:/home/alex/data/srv/nfs,nfsvers=3</strong> Specify nfs server ip, rootfs dir and nfs version</li>
</ul>
<h2 id="Unpack-boards-rootfs-and-modify-permissions"><a href="#Unpack-boards-rootfs-and-modify-permissions" class="headerlink" title="Unpack boards rootfs and modify permissions"></a>Unpack boards rootfs and modify permissions</h2><p>Unpack board rootfs under the path we set at exports setting, then we need to modify permissions for some folders and files:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">TARGET_RFS_PATH=<span class="string">"/home/alex/data/srv/nfs"</span></span><br><span class="line"></span><br><span class="line">sudo chown -R <span class="variable">$&#123;USER&#125;</span> <span class="string">"<span class="variable">$&#123;TARGET_RFS_PATH&#125;</span>/var/lib/systemd"</span></span><br><span class="line">sudo chown -R <span class="variable">$&#123;USER&#125;</span> <span class="string">"<span class="variable">$&#123;TARGET_RFS_PATH&#125;</span>/var/lib/machines"</span></span><br><span class="line">suidfiles=$(sudo find <span class="variable">$&#123;TARGET_RFS_PATH&#125;</span> -perm /u=s)</span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$suidfiles</span>"</span> ] ; <span class="keyword">then</span></span><br><span class="line">    sudo chown root:root <span class="variable">$&#123;suidfiles&#125;</span></span><br><span class="line">    sudo chmod u+s <span class="variable">$&#123;suidfiles&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Reference: <a href="https://git.kontron-electronics.de/yocto-ktn/yocto-ktn/blob/master/scripts/init-remote2" target="_blank" rel="noopener">kontron-electronics</a></p>
</blockquote>
<h2 id="Booting-the-board"><a href="#Booting-the-board" class="headerlink" title="Booting the board"></a>Booting the board</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">U-Boot 2018.11-stm32mp-r3 (Nov 14 2018 - 16:10:06 +0000)</span><br><span class="line"></span><br><span class="line">CPU: STM32MP157AAA Rev.B</span><br><span class="line">Model: CP STM32MP157A Dev Board V1</span><br><span class="line">Board: stm32mp1 in basic mode (cp,stm32mp157a-cp)</span><br><span class="line">DRAM:  512 MiB</span><br><span class="line">Clocks:</span><br><span class="line">- MPU : 650 MHz</span><br><span class="line">- MCU : 208.878 MHz</span><br><span class="line">- AXI : 266.500 MHz</span><br><span class="line">- PER : 24 MHz</span><br><span class="line">- DDR : 533 MHz</span><br><span class="line">NAND:  0 MiB</span><br><span class="line">MMC:   STM32 SDMMC2: 0, STM32 SDMMC2: 1</span><br><span class="line">Loading Environment from EXT4... OK</span><br><span class="line">In:    serial</span><br><span class="line">Out:   serial</span><br><span class="line">Err:   serial</span><br><span class="line">invalid MAC address in OTP 00:00:00:00:00:00Net:   eth0: ethernet@5800a000</span><br><span class="line">Hit any key to stop autoboot:  0 </span><br><span class="line">STM32MP&gt; </span><br><span class="line">STM32MP&gt; </span><br><span class="line">STM32MP&gt; run bootcmd_pxe</span><br><span class="line">ethernet@5800a000 Waiting for PHY auto negotiation to complete. done</span><br><span class="line">BOOTP broadcast 1</span><br><span class="line">BOOTP broadcast 2</span><br><span class="line">DHCP client bound to address 192.168.0.102 (990 ms)</span><br><span class="line">missing environment variable: pxeuuid</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg&#x2F;01-e2-a4-06-a5-8f-7f</span><br><span class="line">Using ethernet@5800a000 device</span><br><span class="line">TFTP from server 192.168.0.101; our IP address is 192.168.0.102</span><br><span class="line">Filename &#39;pxelinux.cfg&#x2F;01-e2-a4-06-a5-8f-7f&#39;.</span><br><span class="line">Load address: 0xc4200000</span><br><span class="line">Loading: #</span><br><span class="line">         11.7 KiB&#x2F;s</span><br><span class="line">done</span><br><span class="line">Bytes transferred &#x3D; 658 (292 hex)</span><br><span class="line">Config file found</span><br><span class="line">Select the boot mode</span><br><span class="line">1:      initramfs</span><br><span class="line">2:      nfs</span><br><span class="line">3:      sdcard</span><br><span class="line">4:      eMMC</span><br><span class="line">Enter choice: 2</span><br><span class="line">2:      nfs</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: uImage</span><br><span class="line">Using ethernet@5800a000 device</span><br><span class="line">TFTP from server 192.168.0.101; our IP address is 192.168.0.102</span><br><span class="line">Filename &#39;uImage&#39;.</span><br><span class="line">Load address: 0xc2000000</span><br><span class="line">Loading: #################################################################</span><br><span class="line">         ################################################################T #</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #####################################################T ############</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         ###################T ##############################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         ########</span><br><span class="line">         76.2 KiB&#x2F;s</span><br><span class="line">done</span><br><span class="line">Bytes transferred &#x3D; 6693440 (662240 hex)</span><br><span class="line">append: root&#x3D;&#x2F;dev&#x2F;nfs ip&#x3D;192.168.0.102 nfsrootdebug nfsroot&#x3D;192.168.0.101:&#x2F;home&#x2F;alex&#x2F;data&#x2F;srv&#x2F;nfs,nfsver0</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: stm32mp157a-cp.dtb</span><br><span class="line">Using ethernet@5800a000 device</span><br><span class="line">TFTP from server 192.168.0.101; our IP address is 192.168.0.102</span><br><span class="line">Filename &#39;stm32mp157a-cp.dtb&#39;.</span><br><span class="line">Load address: 0xc4000000</span><br><span class="line">Loading: #############</span><br><span class="line">         86.9 KiB&#x2F;s</span><br><span class="line">done</span><br><span class="line">Bytes transferred &#x3D; 62891 (f5ab hex)</span><br><span class="line">## Booting kernel from Legacy Image at c2000000 ...</span><br><span class="line">   Image Name:   Linux-4.19.49</span><br><span class="line">   Created:      2019-06-09   7:17:25 UTC</span><br><span class="line">   Image Type:   ARM Linux Kernel Image (uncompressed)</span><br><span class="line">   Data Size:    6693376 Bytes &#x3D; 6.4 MiB</span><br><span class="line">   Load Address: c2000040</span><br><span class="line">   Entry Point:  c2000040</span><br><span class="line">   Verifying Checksum ... OK</span><br><span class="line">## Flattened Device Tree blob at c4000000</span><br><span class="line">   Booting using the fdt blob at 0xc4000000</span><br><span class="line">   XIP Kernel Image ... OK</span><br><span class="line">   Using Device Tree in place at c4000000, end c40125aa</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">[    2.174568] stm32_rtc 5c004000.rtc: setting system clock to 2000-01-01 00:01:41 UTC (946684901)</span><br><span class="line">[    2.183611] Generic PHY stmmac-0:00: attached PHY driver [Generic PHY] (mii_bus:phy_addr&#x3D;stmmac-0:00,)</span><br><span class="line">[    2.197201] usb 1-1: new high-speed USB device number 2 using ehci-platform</span><br><span class="line">[    2.214199] dwmac4: Master AXI performs any burst length</span><br><span class="line">[    2.218189] stm32-dwmac 5800a000.ethernet eth0: No Safety Features support found</span><br><span class="line">[    2.225501] stm32-dwmac 5800a000.ethernet eth0: IEEE 1588-2008 Advanced Timestamp supported</span><br><span class="line">[    2.234275] stm32-dwmac 5800a000.ethernet eth0: registered PTP clock</span><br><span class="line">[    2.398628] hub 1-1:1.0: USB hub found</span><br><span class="line">[    2.401140] hub 1-1:1.0: 4 ports detected</span><br><span class="line">[    3.277927] stm32-dwmac 5800a000.ethernet eth0: Link is Up - 100Mbps&#x2F;Full - flow control rx&#x2F;tx</span><br><span class="line">[    3.317195] IP-Config: Guessing netmask 255.255.255.0</span><br><span class="line">[    3.320790] IP-Config: Complete:</span><br><span class="line">[    3.324024]      device&#x3D;eth0, hwaddr&#x3D;e2:a4:06:a5:8f:7f, ipaddr&#x3D;192.168.0.102, mask&#x3D;255.255.255.0, gw&#x3D;5</span><br><span class="line">[    3.334612]      host&#x3D;192.168.0.102, domain&#x3D;, nis-domain&#x3D;(none)</span><br><span class="line">[    3.340520]      bootserver&#x3D;255.255.255.255, rootserver&#x3D;192.168.0.101, rootpath&#x3D;</span><br><span class="line">[    3.349127] ALSA device list:</span><br><span class="line">[    3.350873]   No soundcards found.</span><br><span class="line">[    3.519504] VFS: Mounted root (nfs filesystem) on device 0:15.</span><br><span class="line">[    3.529231] devtmpfs: mounted</span><br><span class="line">[    3.532594] Freeing unused kernel memory: 1024K</span><br><span class="line">[    3.535990] Run &#x2F;sbin&#x2F;init as init process</span><br><span class="line">[    5.499422] systemd[1]: System time before build time, advancing clock.</span><br><span class="line">[    6.079843] NET: Registered protocol family 10</span><br><span class="line">[    9.012545] Segment Routing with IPv6</span><br><span class="line">[    9.200958] systemd[1]: systemd 239 running in system mode. (+PAM -AUDIT -SELINUX +IMA -APPARMOR +SMA)</span><br><span class="line">[    9.222756] systemd[1]: Detected architecture arm.</span><br><span class="line"></span><br><span class="line">Welcome to ST OpenSTLinux - EGLfs - (A Yocto Project Based Distro) 2.6-snapshot-20191124 (thud)!</span><br><span class="line"></span><br><span class="line">[    9.371860] systemd[1]: Set hostname to &lt;stm32mp1-cp&gt;.</span><br><span class="line">[    9.476160] systemd[1]: Hardware watchdog &#39;STM32 Independent Watchdog&#39;, version 0</span><br><span class="line">[    9.483357] systemd[1]: Set hardware watchdog to 30s.</span><br><span class="line">[   15.306868] systemd[1]: Unnecessary job for dev-ttySTM0.device was removed.</span><br><span class="line">[   15.315395] systemd[1]: Started Dispatch Password Requests to Console Directory Watch.</span><br><span class="line">[  OK  ] Started Dispatch Password Requests to Console Directory Watch.</span><br><span class="line">[   15.374193] systemd[1]: Listening on Journal Socket (&#x2F;dev&#x2F;log).</span><br><span class="line">[  OK  ] Listening on Journal Socket (&#x2F;dev&#x2F;log).</span><br><span class="line">[   15.407969] systemd[1]: Listening on initctl Compatibility Named Pipe.</span><br><span class="line">[  OK  ] Listening on initctl Compatibility Named Pipe.</span><br><span class="line">[   15.479167] systemd[1]: Listening on udev Control Socket.</span><br><span class="line">[  OK  ] Listening on udev Control Socket.</span><br><span class="line">[   15.653309] systemd[1]: Reached target Remote File Systems.</span><br><span class="line">[  OK  ] Reached target Remote File Systems.</span><br><span class="line">[   15.696091] systemd[1]: Listening on Network Service Netlink Socket.</span><br><span class="line">[  OK  ] Listening on Network Service Netlink Socket.</span><br><span class="line">[   15.764924] systemd[1]: Listening on Syslog Socket.</span><br><span class="line">[  OK  ] Listening on Syslog Socket.</span><br><span class="line">[   15.802155] systemd[1]: Created slice system-getty.slice.</span><br><span class="line">[  OK  ] Created slice system-getty.slice.</span><br><span class="line">[   15.837597] systemd[1]: Reached target Swap.</span><br><span class="line">[  OK  ] Reached target Swap.</span><br><span class="line">[  OK  ] Started Forward Password Requests to Wall Directory Watch.</span><br><span class="line">[  OK  ] Reached target Paths.</span><br><span class="line">[  OK  ] Listening on udev Kernel Socket.</span><br><span class="line">[  OK  ] Created slice User and Session Slice.</span><br><span class="line">[  OK  ] Reached target Slices.</span><br><span class="line">[  OK  ] Listening on Journal Socket.</span><br><span class="line">         Mounting Kernel Debug File System...</span><br><span class="line">         Starting Journal Service...</span><br><span class="line">         Mounting POSIX Message Queue File System...</span><br><span class="line">         Starting Mount partitions...</span><br><span class="line">         Starting Create list of required stÔøΩÔøΩ‚Ä¶ce nodes for the current kernel...</span><br><span class="line">         Starting udev Coldplug all Devices...</span><br><span class="line">         Starting Apply Kernel Variables...</span><br><span class="line">         Mounting FUSE Control File System...</span><br><span class="line">         Mounting Kernel Configuration File System...</span><br><span class="line">         Starting Remount Root and Kernel File Systems...</span><br><span class="line">         Mounting Temporary Directory (&#x2F;tmp)...</span><br><span class="line">[  OK  ] Listening on Process Core Dump Socket.</span><br><span class="line">[  OK  ] Created slice system-serial\x2dgetty.slice.</span><br><span class="line">[  OK  ] Started Journal Service.</span><br><span class="line">[  OK  ] Mounted Kernel Debug File System.</span><br><span class="line">[  OK  ] Mounted POSIX Message Queue File System.</span><br><span class="line">[  OK  ] Started Mount partitions.</span><br><span class="line">[  OK  ] Started Create list of required staÔøΩÔøΩ‚Ä¶vice nodes for the current kernel.</span><br><span class="line">[  OK  ] Started Apply Kernel Variables.</span><br><span class="line">[  OK  ] Mounted FUSE Control File System.</span><br><span class="line">[  OK  ] Mounted Kernel Configuration File System.</span><br><span class="line">[  OK  ] Started Remount Root and Kernel File Systems.</span><br><span class="line">[  OK  ] Mounted Temporary Directory (&#x2F;tmp).</span><br><span class="line">         Starting Create Static Device Nodes in &#x2F;dev...</span><br><span class="line">         Starting Flush Journal to Persistent Storage...</span><br><span class="line">[   18.106096] systemd-journald[130]: Received request to flush runtime journal from PID 1</span><br><span class="line">[  OK  ] Started Flush Journal to Persistent Storage.</span><br><span class="line">[  OK  ] Started udev Coldplug all Devices.</span><br><span class="line">[  OK  ] Started Create Static Device Nodes in &#x2F;dev.</span><br><span class="line">         Starting udev Kernel Device Manager...</span><br><span class="line">[  OK  ] Reached target Local File Systems (Pre).</span><br><span class="line">[  OK  ] Reached target Containers.</span><br><span class="line">         Mounting &#x2F;var&#x2F;volatile...</span><br><span class="line">[  OK  ] Mounted &#x2F;var&#x2F;volatile.</span><br><span class="line">         Starting Load&#x2F;Save Random Seed...</span><br><span class="line">[  OK  ] Reached target Local File Systems.</span><br><span class="line">         Starting Create Volatile Files and Directories...</span><br><span class="line">[  OK  ] Started Load&#x2F;Save Random Seed.</span><br><span class="line">[  OK  ] Started udev Kernel Device Manager.</span><br><span class="line">[  OK  ] Started Create Volatile Files and Directories.</span><br><span class="line"></span><br><span class="line">ST OpenSTLinux - EGLfs - (A Yocto Project Based Distro) 2.6-snapshot stm32mp1-cp ttySTM0</span><br><span class="line"></span><br><span class="line">stm32mp1-cp login: root (automatic login)</span><br><span class="line"></span><br><span class="line">root@stm32mp1-cp:~#</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32MP1: Boot kernel via TFTP from U-Boot</title>
    <url>/2020-02-16/STM32MP1-Boot-kernel-via-TFTP-from-U-Boot/</url>
    <content><![CDATA[<p>Today I just managed to boot kernel via TFTP on STM32MP1 board but steps I go through are quite different with i.MX8. Thus, I think there is a necessity to have a short note about this üñã</p>
<a id="more"></a>

<h2 id="Pre-requirements"><a href="#Pre-requirements" class="headerlink" title="Pre-requirements"></a>Pre-requirements</h2><ul>
<li>TFTP server on PC is up and running(<a href="https://lzqblog.top/2019-05-26/i-MX-setup-TFTP-and-NFS/">Check here</a>)</li>
<li>Board and PC are in same LAN</li>
</ul>
<h2 id="TFTP-folder"><a href="#TFTP-folder" class="headerlink" title="TFTP folder"></a>TFTP folder</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~/data/srv/tftp$ tree</span><br><span class="line">.</span><br><span class="line">‚îú‚îÄ‚îÄ pxelinux.cfg</span><br><span class="line">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ 01-e2-a4-06-a5-8f-7f</span><br><span class="line">‚îú‚îÄ‚îÄ stm32mp157a-cp.dtb</span><br><span class="line">‚îî‚îÄ‚îÄ uImage</span><br><span class="line"></span><br><span class="line">1 directory, 3 files</span><br></pre></td></tr></table></figure>
<p>U-Boot will use <code>pxe</code> command to load PXE configuration file from TFTP server(PC in my scenario). PXE configuration file has the same format with <em>extlinux.conf</em>, and the file name is related to hardware MAC address. In my case <span style="color:red"><em>01-e2-a4-06-a5-8f-7f</em></span>:</p>
<ul>
<li>01: ARP type 1 for ethernet</li>
<li>e2-a4-06-a5-8f-7f: MAC address</li>
</ul>
<p>Inside my PXE configuration file(01-e2-a4-06-a5-8f-7f):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">menu title Select the boot mode</span><br><span class="line"> DEFAULT eMMC</span><br><span class="line"> TIMEOUT 20</span><br><span class="line"> LABEL initramfs</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	INITRD uInitrd</span><br><span class="line"> 	APPEND rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line"> LABEL nfs</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	APPEND root&#x3D;&#x2F;dev&#x2F;nfs nfsroot&#x3D;192.168.0.106:&#x2F;nfsroot ip&#x3D;dhcp rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line"> LABEL sdcard</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	APPEND root&#x3D;&#x2F;dev&#x2F;mmcblk0p6 rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line"> LABEL eMMC</span><br><span class="line"> 	KERNEL uImage</span><br><span class="line"> 	FDT stm32mp157a-cp.dtb</span><br><span class="line"> 	APPEND root&#x3D;&#x2F;dev&#x2F;mmcblk1p6 rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br></pre></td></tr></table></figure>
<p>With this configuration file we could choose in U-Boot where to load rootfs when booting.</p>
<h2 id="U-Boot"><a href="#U-Boot" class="headerlink" title="U-Boot"></a>U-Boot</h2><p>After TFTP server and folder are ready, we can proceed on U-Boot. If <code>CONFIG_NET_RANDOM_ETHADDR</code> has not been set in uboot defconfig or MAC address haven‚Äôt been configured before, we might need to setup MAC address(<span style="color:red"><em>ethaddr</em></span>) manually. Meanwhile <span style="color:red"><em>serverip</em></span> need to be set as well:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">env set ethaddr e2:a4:06:a5:8f:7f</span><br><span class="line">env set serverip 192.168.0.106</span><br><span class="line">saveenv</span><br></pre></td></tr></table></figure>
<p>After that we only need to <code>run bootcmd_pxe</code> if we want to load kernel from TFTP:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Hit any key to stop autoboot:  0 </span><br><span class="line">STM32MP&gt; run bootcmd_pxe</span><br><span class="line">ethernet@5800a000 Waiting for PHY auto negotiation to complete. done</span><br><span class="line">BOOTP broadcast 1</span><br><span class="line">DHCP client bound to address 192.168.0.101 (2 ms)</span><br><span class="line">missing environment variable: pxeuuid</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: pxelinux.cfg&#x2F;01-e2-a4-06-a5-8f-7f</span><br><span class="line">Using ethernet@5800a000 device</span><br><span class="line">TFTP from server 192.168.0.106; our IP address is 192.168.0.101</span><br><span class="line">Filename &#39;pxelinux.cfg&#x2F;01-e2-a4-06-a5-8f-7f&#39;.</span><br><span class="line">Load address: 0xc4200000</span><br><span class="line">Loading: #</span><br><span class="line">         8.8 KiB&#x2F;s</span><br><span class="line">done</span><br><span class="line">Bytes transferred &#x3D; 608 (260 hex)</span><br><span class="line">Config file found</span><br><span class="line">Select the boot mode</span><br><span class="line">1:      initramfs</span><br><span class="line">2:      nfs</span><br><span class="line">3:      sdcard</span><br><span class="line">4:      eMMC</span><br><span class="line">Enter choice: 4:        eMMC</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: uImage</span><br><span class="line">Using ethernet@5800a000 device</span><br><span class="line">TFTP from server 192.168.0.106; our IP address is 192.168.0.101</span><br><span class="line">Filename &#39;uImage&#39;.</span><br><span class="line">Load address: 0xc2000000</span><br><span class="line">Loading: #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         ##################T ###############################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         #################################################################</span><br><span class="line">         ##############################################################</span><br><span class="line">         265.6 KiB&#x2F;s</span><br><span class="line">done</span><br><span class="line">Bytes transferred &#x3D; 6640192 (655240 hex)</span><br><span class="line">append: root&#x3D;&#x2F;dev&#x2F;mmcblk1p6 rootwait rw earlyprintk console&#x3D;ttySTM0,115200</span><br><span class="line">missing environment variable: bootfile</span><br><span class="line">Retrieving file: stm32mp157a-cp.dtb</span><br><span class="line">Using ethernet@5800a000 device</span><br><span class="line">TFTP from server 192.168.0.106; our IP address is 192.168.0.101</span><br><span class="line">Filename &#39;stm32mp157a-cp.dtb&#39;.</span><br><span class="line">Load address: 0xc4000000</span><br><span class="line">Loading: #############</span><br><span class="line">         188.5 KiB&#x2F;s</span><br><span class="line">done</span><br><span class="line">Bytes transferred &#x3D; 62891 (f5ab hex)</span><br><span class="line">## Booting kernel from Legacy Image at c2000000 ...</span><br><span class="line">   Image Name:   Linux-4.19.49</span><br><span class="line">   Created:      2019-06-09   7:17:25 UTC</span><br><span class="line">   Image Type:   ARM Linux Kernel Image (uncompressed)</span><br><span class="line">   Data Size:    6640128 Bytes &#x3D; 6.3 MiB</span><br><span class="line">   Load Address: c2000040</span><br><span class="line">   Entry Point:  c2000040</span><br><span class="line">   Verifying Checksum ... OK</span><br><span class="line">## Flattened Device Tree blob at c4000000</span><br><span class="line">   Booting using the fdt blob at 0xc4000000</span><br><span class="line">   XIP Kernel Image ... OK</span><br><span class="line">   Using Device Tree in place at c4000000, end c40125aa</span><br><span class="line"></span><br><span class="line">Starting kernel ...</span><br><span class="line"></span><br><span class="line">[    0.000000] Booting Linux on physical CPU 0x0</span><br><span class="line">[    0.000000] Linux version 4.19.49 (oe-user@oe-host) (gcc version 8.2.0 (GCC)) #1 SMP PREEMPT Sun Jun 9</span><br><span class="line">[    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr&#x3D;10c5387d</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>U-Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>GCC: __attribute__ ((__packed__))</title>
    <url>/2020-02-11/GCC-attribute-packed/</url>
    <content><![CDATA[<blockquote>
<p>It specifies that a member field has the smallest possible alignment. That is, one byte for a variable field, and one bit for a bitfield, unless you specify a larger value with the aligned attribute.</p>
</blockquote>
<a id="more"></a>

<h2 id="Data-alignment-and-data-structure-padding"><a href="#Data-alignment-and-data-structure-padding" class="headerlink" title="Data alignment and data structure padding"></a>Data alignment and data structure padding</h2><p>GCC will enable structure padding by default, i.e. we have a structure like this:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test_struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">char</span> b;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test_struct</span> <span class="title">test_data</span>;</span></span><br></pre></td></tr></table></figure>

<p><code>sizeof(test_data)</code> will be <span style="color:red">8</span> due to structure padded to to 4-byte alignment: 1(char a) + 1(char b) + <span style="color:red"><strong>2(added)</strong></span>  + 4(int c).</p>
<h2 id="attribute-packed"><a href="#attribute-packed" class="headerlink" title="attribute ((packed))"></a><strong>attribute</strong> ((<strong>packed</strong>))</h2><p>GCC provides us a way to disable structure padding, i.e. we have a structure like this:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test_struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">char</span> b;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">&#125; __attribute__((__packed__));</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test_struct</span> <span class="title">test_data</span>;</span></span><br></pre></td></tr></table></figure>

<p><code>sizeof(test_data)</code> will be <span style="color:red">6</span>: 1(char a) + 1(char b) + 4(int c). With this some memory can be saved.</p>
<p>We also can use <code>__attribute__((packed, aligned(X)))</code> to specify padding size(X should be powers of 2):</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test_struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">char</span> b;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">    <span class="keyword">char</span> d;</span><br><span class="line">&#125; __attribute__((packed, aligned(<span class="number">2</span>)));</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">test_struct</span> <span class="title">test_data</span>;</span></span><br></pre></td></tr></table></figure>

<p><code>sizeof(test_data)</code> will be <span style="color:red">8</span>: 1(char a) + 1(char b) + 4(int c) + 1(char d) + <span style="color:red"><strong>1(added)</strong></span></p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>PyQt5 Getting Started</title>
    <url>/2020-02-07/PyQt5-Getting-Started/</url>
    <content><![CDATA[<p>Recently I start to evaluate the feasibility of porting one old C++ Qt4 project to PyQt5 since Python is more friendly for some engineers.</p>
<a id="more"></a>

<p>The following steps was test on Ubuntu.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pip3 install PyQt5</span><br></pre></td></tr></table></figure>

<p>If you haven‚Äôt install Qt Designer yet, we‚Äôd like to suggest install it as well:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install qttools5-dev-tools</span><br></pre></td></tr></table></figure>

<h2 id="The-first-PyQt5-program"><a href="#The-first-PyQt5-program" class="headerlink" title="The first PyQt5 program"></a>The first PyQt5 program</h2><p>After installation, we can perform a quick check by a simple PyQt5 program:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QLabel</span><br><span class="line"></span><br><span class="line">app=QApplication(sys.argv)</span><br><span class="line">label = QLabel(<span class="string">'Hello PyQt5!'</span>)</span><br><span class="line">label.show()</span><br><span class="line">sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>
<p>We could see a simple window with a label on it after executing this simple code:</p>
<p><img src="/2020-02-07/PyQt5-Getting-Started/hello.png" alt></p>
<p>In this code we created a <code>QApplication</code> and run the event loop via <code>exec_()</code> method.</p>
<h2 id="Using-Qt-Designer-to-design-UI"><a href="#Using-Qt-Designer-to-design-UI" class="headerlink" title="Using Qt Designer to design UI"></a>Using Qt Designer to design UI</h2><p>In the first example we ‚Äúdesigned‚Äù an application UI by coding, but in real project we have much more complicated UI for applications which is hard to design without UI designer. For PyQt5, we could use Qt Designer to design UI as before but we need one tiny utility to transform <span style="color:red">*.ui</span> file into python code.</p>
<p>i.e. If we drawn a simple UI like this in Qt Designer and save it as <span style="color:red">test.ui</span>:</p>
<p><img src="/2020-02-07/PyQt5-Getting-Started/ui.png" alt></p>
<p>Then we use <span style="color:red">pyuic5</span> to generate python code from <span style="color:red">test.ui</span>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pyuic5 test.ui -o test_ui.py</span><br></pre></td></tr></table></figure>

<p>Then we can get <strong>test_ui.py</strong>:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Form implementation generated from reading ui file 'test.ui'</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Created by: PyQt5 UI code generator 5.14.1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># WARNING! All changes made in this file will be lost!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtGui, QtWidgets</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ui_MainWindow</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setupUi</span><span class="params">(self, MainWindow)</span>:</span></span><br><span class="line">        MainWindow.setObjectName(<span class="string">"MainWindow"</span>)</span><br><span class="line">        MainWindow.resize(<span class="number">502</span>, <span class="number">376</span>)</span><br><span class="line">        self.centralwidget = QtWidgets.QWidget(MainWindow)</span><br><span class="line">        self.centralwidget.setObjectName(<span class="string">"centralwidget"</span>)</span><br><span class="line">        self.pushButton = QtWidgets.QPushButton(self.centralwidget)</span><br><span class="line">        self.pushButton.setGeometry(QtCore.QRect(<span class="number">190</span>, <span class="number">150</span>, <span class="number">89</span>, <span class="number">25</span>))</span><br><span class="line">        self.pushButton.setObjectName(<span class="string">"pushButton"</span>)</span><br><span class="line">        MainWindow.setCentralWidget(self.centralwidget)</span><br><span class="line">        self.menubar = QtWidgets.QMenuBar(MainWindow)</span><br><span class="line">        self.menubar.setGeometry(QtCore.QRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">502</span>, <span class="number">22</span>))</span><br><span class="line">        self.menubar.setObjectName(<span class="string">"menubar"</span>)</span><br><span class="line">        self.menuFile = QtWidgets.QMenu(self.menubar)</span><br><span class="line">        self.menuFile.setObjectName(<span class="string">"menuFile"</span>)</span><br><span class="line">        MainWindow.setMenuBar(self.menubar)</span><br><span class="line">        self.statusbar = QtWidgets.QStatusBar(MainWindow)</span><br><span class="line">        self.statusbar.setObjectName(<span class="string">"statusbar"</span>)</span><br><span class="line">        MainWindow.setStatusBar(self.statusbar)</span><br><span class="line">        self.actionasd = QtWidgets.QAction(MainWindow)</span><br><span class="line">        self.actionasd.setObjectName(<span class="string">"actionasd"</span>)</span><br><span class="line">        self.menuFile.addAction(self.actionasd)</span><br><span class="line">        self.menubar.addAction(self.menuFile.menuAction())</span><br><span class="line"></span><br><span class="line">        self.retranslateUi(MainWindow)</span><br><span class="line">        QtCore.QMetaObject.connectSlotsByName(MainWindow)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">retranslateUi</span><span class="params">(self, MainWindow)</span>:</span></span><br><span class="line">        _translate = QtCore.QCoreApplication.translate</span><br><span class="line">        MainWindow.setWindowTitle(_translate(<span class="string">"MainWindow"</span>, <span class="string">"MainWindow"</span>))</span><br><span class="line">        self.pushButton.setText(_translate(<span class="string">"MainWindow"</span>, <span class="string">"PushButton"</span>))</span><br><span class="line">        self.menuFile.setTitle(_translate(<span class="string">"MainWindow"</span>, <span class="string">"File"</span>))</span><br><span class="line">        self.actionasd.setText(_translate(<span class="string">"MainWindow"</span>, <span class="string">"Open"</span>))</span><br></pre></td></tr></table></figure>
<h2 id="Quick-test-with-clicked-event"><a href="#Quick-test-with-clicked-event" class="headerlink" title="Quick test with clicked event"></a>Quick test with clicked event</h2><p>Then we can start coding with this file by inheriting <code>class Ui_MainWindow</code>:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow</span><br><span class="line"><span class="keyword">from</span> test_ui <span class="keyword">import</span> Ui_MainWindow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyMainWindow</span><span class="params">(QMainWindow, Ui_MainWindow)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(MyMainWindow, self).__init__()</span><br><span class="line">        self.setupUi(self)</span><br><span class="line">        self.pushButton.clicked.connect(self.onBtnClicked)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">onBtnClicked</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"Button Clicked:"</span> + self.sender().objectName())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = QApplication([])</span><br><span class="line">mainWindow = MyMainWindow()</span><br><span class="line"></span><br><span class="line">mainWindow.show()</span><br><span class="line"></span><br><span class="line">sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>
<p>Here we defined a <code>class MyMainWindow</code> which inheriting from <code>QMainWindow</code> and <code>Ui_MainWindow</code>, then we defined <code>__init__</code> method which will <code>setupUi</code> and binding button clicked event with <code>onBtnClicked</code>. When <strong>pushButton</strong> was clicked, we can see output in terminal:<br><img src="/2020-02-07/PyQt5-Getting-Started/btn_clicked.png" alt></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>So far we still not sure about the performance differences between Qt(C++) and PyQt5 but as far as I can see PyQt5 could be one of the options for those engineers who is not very good at C++.</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Qt5</tag>
      </tags>
  </entry>
  <entry>
    <title>‰∏™‰∫∫ÂçöÂÆ¢Êê≠Âª∫ÁÆÄÊòéÊïôÁ®ã(Áâπ‰æõÁâà)</title>
    <url>/2020-01-31/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B-%E7%89%B9%E4%BE%9B%E7%89%88/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Êä±Ê≠â, Ëøô‰∏™ÂØÜÁ†ÅÁúãÁùÄ‰∏çÂ§™ÂØπ, ËØ∑ÂÜçËØïËØï." data-whm="Êä±Ê≠â, Ëøô‰∏™ÊñáÁ´†‰∏çËÉΩË¢´Ê†°È™å, ‰∏çËøáÊÇ®ËøòÊòØËÉΩÁúãÁúãËß£ÂØÜÂêéÁöÑÂÜÖÂÆπ."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="ÊÇ®Â•Ω, ËøôÈáåÈúÄË¶ÅÂØÜÁ†Å." /><label>ÊÇ®Â•Ω, ËøôÈáåÈúÄË¶ÅÂØÜÁ†Å.</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="a598b6bed287067b94e3ce0c95e8284a522079b9a25f21575ad74715d85b1ad7">ac9b41ed7b0fabd762865dc9e24f581d547ce33336c9d5079f9931cadc7a6b9851b39329361c352b3c22382d5c4c3a22bc384a5e5708f5f1fb0fd12dac936f4232885f8e74e5151f71087dd34f94a521f29272f7deee8c0bb139fc1f28aad8ec039d1a84510d14bff3589d9d3d45de022c1a000b5190cbc9fce5af595c3a27621cb1c3e611d23b43fa6d88a2fc9c2f92fbc020f7d596c1f45edb548ab11d4aded9f62cb6084f6e6de29307241e05b58b84a20942df48d7d17ce0b91731b9a862a2137cf156a3d181c3ba3c4ff9e3b0e82703ab2748f6865842c7871014c052440e4b976ac3af269d5d96f1e00116e1276f645d7b7899a603cb84a4355264f25b9f4436e83fbf03643332fa89cb8ef0c54e540472351ca3bb5a507d3727e660d285fc998b08c69bc24f42e554b11b8440f99452725a1fc2b3f12f1210d7777259e594f700d1205fb7e7b1ffb728fde021bb739834288e7327db819cdd182b0448a39626d21eec53fa5c2030fd2016fa0a0e8509258a4fe3dc16387a92973964ed2cc92aad40c48ec287d9363026505ef6f4f271c89bdcee752c6d453253ba7fee936cec7b2e8811adcf946d31c8c81b7ecae04e7f8fef6ec47e07df43755c1dcfad34f8e9b40c65c60bc5ff85df4494c6b5f686f6c8238d05d654b7ef70835ad20c721304e4ea2b8a65d11d8cd54c5de2728e50d38f114834e49388e023e739541ad34447dcc6120c3bca1b0f1a4316466609601fbd2cc88a383c66a134b057bff19159e41c135959fb7267711eef6518e96a2db888e8deaf57a66a8219c7cf388bb1f473a8ae9365c787ba106fa5a2df6c33269a8fca1f92304f9e887a76fa8e82f9bfa56ed501e9554d8bd2e995c88892072e1286e43c0f58004d83cb45637b082cb6b786093f5dd2a6c4386b41ad85579ffa4b1819ab6b511e606ed5abcf76aedbf306c97a95a50b7d5d3d65abebe4b6b4f74cc7e7bedccca1a52af548e68cf8e17b0b2738c7a95fb2e61bd4845e1a8c6c72d0075485c2206ead3d07fb21b06887411a2318f1a7464252e04d84ba98cdf2252fcf93e16c5ba178228063f6613222a6f76a6b3dc26ec368a804c841ea0d8a2ee96521c6e6ae46e2f1808e861f3eca903c18af9e8d58deac18dbfb3094ce031af0301e3651bcbe63d2147571444ef0da8b78fa90c24be39cef4d7eab396e5537bccb9b85483c29700b3943475cde20932a34f7df4bf66a34d6ea12fd73535b18c5bbe059910f89201c865c3efa9a5757f04ef04793aa230172ee0aa63f02b8c601081ee68e000a14e0b1e5aa8a4c0aa84f23f3e65fd91e9ba3ccd9f3c10dabbbf6f28ae4ce421b41f4b9f5b735130994add8022b89ddefb4db278259f4038193b9fcd1268469bbc79e77e7010aad7fb745fee0e8cac3dd27896dd45c75e02770742ac67c94fa6d9a9a739bbe9f68b842da090ca4a943b5b9fa559e1199809df9d2572eddd1704b12996103530fdc1cf3b564b6951e42064820d59afb1c44feaf844dfff944763b8a06f753b1a26323a3772939c58824c71f7260789fef5a88aa524489e2e2796d93b04e32533c248d41bdb08b4189362faf309e9499097e12cc12383c0334250ffa46e29932fefa92f3cb404b98419fe0524cb2a16d766dd8654da701664cbd06807a63dba7871faa3486fef0e2ff0404b3321e96773f802777025ea6a2727f15d1f048d8adf986c7d6b01168cd396dda03183b5eede100ee02164ab5e23e4548452c856707917f3d3f897fb55a7d6851a42107016a20167a9a2f91135f20e0e42415ca28c8d219e1b03cdc934858b3be48836bdc71a0818ad526122ff4ddece51dcfc525f67484b88132ae6a8a0cc18cb8b3b3185fd8b11e02d2c194a9c02009be8d832192962e499b353ffb2b468f2a72166b13f4a60ff4e2c79d7432ed0ee5c58d1f49ca9063150d0c57627d68eafed90a0e7a5932b5cab5c03f333a491cb1d7c0f534a31240e65c634cf847f2e5053b9ac38adee529df4bdb20dafc293bd0501dc297ea9592773fff62483d266cc37c2c14ef41a6ec84d66400e4e24dcf84788fffbd78e19cc2c3f23835cbde5d6a9521f323bd9a148e403cc2f00c14097795b33039799ceee75aef0aee28e0f7584342e201d3ca63d72ffd4ec97f8671874c55b07155dfc5caf2117a399a55e4ebde80a6360f08c814a92c10b6cb68996afd23d0469280c6d227b68fc64741ce96f2d25d751068eb744f7905f53967369757f101295e3755ded24269ba355ad8340fae00abe0474020d0e01f0fc0fd97a6c049d576c5ddb63a401ec0dee8e24a7569d68d16104afc615cb1e2625a1a0a06b697c59decec1906470f38020c2a81ef7b5998b844bf95acb61b9396766a7cd2bcda3971ab149bf05272f20c5ac490b9e41c4b0abb2828d0be4cbae92b5af5e631aeaf4d5276af82f236c4e3892a65565d67d8255af0576a9b1b4d288058bd68df7b40c83ef114f491158ac0f727d73d1b9cfa172f740bfb4cfc7c6a09befb04b4dc714464bd80db5865fb4715a2b35c0ed8c8c55f2145292a94152196baba9dde80e53961c5ef98a5f87ae4c5492d802e119e44b30ac325f1c27aa43c8c404356126a6c0a6d00c83a94dab6364045b50e2505ae0b033f3fbf982f97b19b5dc304e4dee800dcae7ab47ae2c8959110ea26497351aaf921b3fc611722b22cf89d05585cf6492b037cdb87b94af43158020e58a0e056826cff7cbd7e00cc741b6107b1502be4c1066636af0f2a79525739e2b38ef470561ebb834eac4c0ab6102fcfadc2b389ff0f0e80e6c02a81a8b49988c51d39d78ba44cd3d552adcb8c8d8d120194b08bec7366bf5f7b4dfc723581e0d850084d026c0d2db2970437f207d254b1799dc223aef0277ca6fef6365a937c0c15ca39afd3d60a47ac36fb3e3a7c5287b63bf23a6fb9a42ef2778c210b92a8c1a50572b1a338399f5f6cd2dac34d759b6f29897f53bc0351c8b0f612c472971168ca1b7464cec19fb39b9ae33b907f115fc19066f25e81f5c727591ae137c85d78ba16d2aa36de8fb549a5d42c765d466fa3f68c2f0dcac419ba394dda470c3713f52f6c50aa0c054027d6affc3e3f19181913dbb9ccfce90a275553af933a3b2cd9ea50c4c3830e6f4208cadbe83eed12d212ad8312fe88b2e5004382052d581086ce4dc712d66f6b05a85d4e721158bcffa1d00d60dddb1325201b6bb6d49797a47728c23dedf1ba7c43199b6b23161a38158fc4f0f6d9578ec617b0c5d9804d3af35bb394b3d3773fb2bdec766560f1dc6ed4fb1bad722c2639a16004c05e66833f95f11ae737d426d816a09a704825505aea014776005396b68693c418c41e0093ce1cbfc01ec097844fb190cd5f98549732bb94cbd4f59b737b26c691868e237b298a1ac7f18ddc24c4760fc639c51de3c4d908247d37ab41fa16c6fa1d7dd8fe1c085c3a9f5297913539944b7acd40b18fd0ec1be1c61723d21d395b0bef9c0ec23371c9524f97487ba51510ab87f3900adc332d970da582cb3a8ae04a5f7a87449c8da7574240e1c240dea13c3729370e5f6925f11a0615288fc402d894461d5a018c13daeb075d0eccd777d5dd9d28df4adb49d0caa922a4710c0b8cf09015d87ddbbfd87963e0934eae26266ce9f5db7fd275a4d3eb8478e747b4bebfa30ed5008fa1bce72bc21d89733c669ede3e3e83e90f0868091bdbafaf64e7fdcc54f5f008231dd5959b23813c9ad0a100f9fcc13f1554081069a15571a75ec02c9436a130c40a967c5371298840ccc0fb277d5c359ea89143a09c5ee208a54531371fceb996398f3440831060f84d95f4e10a84f38568f02b4f7a56e14ddcae608577321227fb759d317d11baefa2cdadcc5aa06982e2b27b4a69c136adf983108f6553db6db3ef60c39ea4658d49ec3d86dc418e04f79a35ec6db5a1980e801e0ff53e35cb56e485685199e294b2635419da6c57084da2bda6990028cfff8c9a784409fce9c7330a62d059afa0325fcdf6fc3871879426a9e69779a9be816ce14a214d4c3ab2ad217de41ab018efb5cbceddcd806cea6f47bfc84640642b3328041aaf709a3df8c234923aa3c3a65e7e33596cffd0c548a7fe8519b78961ec6765d7888b40417e1120daad9997b37330e23272c0527c4828438f96a8b9415be229c83c40fe2c0df597da3cc34a87b93160df07e676b3d12494716291025b2b64612e57f89c3a3d8ec79bddcba91fe4dbf7f2954c3a32530ee65974fdaef120d366e071b0f8c8c97a5ad0964957ed17abd8f5dba35be21c86bff3a3c8f40578f59b1a4f397f75aa6ad655c393a8f2439fc205f952f4eff6e2f347aa84db79f523e437578b09790bf31684b5d36a25d9eeabb48f99adc91fdd2dd05cd54c91a8bed91be0fc7e2671266bfb30767ea20e56f18e469c8d4f06d4adb1f113eed92d59e3994b48e53b8013e19fd83ebdc0c087206957c3a9fc03a8a295f50d329d7d6709a7e5263203b2f52f8bdfa7dc8a9917d19bcf911ddf031f8b44960beb92a2ace792e8f36bfd666bae9545ab93a77da545d8a183bb54f13a38926cc337d5063cbc8b667cf9ffa099efc3edb0011b4cb12781c17d8d67baf02f5701710c3a38c93f62e1a8460145468193a31d4760afe025c7ad872a36e3051311e3770b7259a5fe2945ec789a9ec820db36668cbe416cb447c9becc4b66286599142a8a1e25fce48afb597660da54a400fabde97e85918d86e67af8125fa48eb392cac6feb42aca3c99c31d80ae0ab004e1ede962b69bacec33771e7709e437127de5d8077044b9f91817c107683e612abb32cfc7cbcded683689457d2cca59bcbb35fe2b683e5735b97b1fcc1f4b1870430f593760dd7a71e44b4e99027a7bf3f9e547313567910b240ae2f0f8fb4be5e890bb29e919183c0cba73aa2f9bb7561ecaf75f422bdb1401ba0cecadc1008d15b38dd754740e982b3021a452f78ca71beaa318200249ac6c5c2f904b68c6449c5a96fdc6228d8c31a74ddecc272e95b693d60bf5fd5c872b224970d53719d5d4dbb59d373974fae6bead134f4a8cd60ea7663070e77949f556e0f54babf0046f5d30b43904b15db6c661b1829dd372813195db97dd2bed69bcec3e0b4e623a818b5a4ef7fe85679dea24a94fec2c4d4c5198294438681a865de83639c4efc19070fc5358e6e56f5cfd23bba86b00a7486b9bea7039bca1de7235d0c78b10875e09d511929040ed4a98a7f147094733ef7b2acfb359bdfe5166e5995fa80f2c0c30028a4cf3901d2222bb21a9261e0d6ecade89a53a60038e387d672558e32cadacdfb7db921c8710884bebcbdd37cb0cf6d074f39537b56110b7372e7c3abdc0bd2ea5de6dba84325ab9c4118c550872404d33989b3bcb3cb854c27261594c906260ed271e52283fbc2cc00b51b20d4ea36fb9083dcae8c04e7e1117bda1e510dadd9d260734ed3829ed18eff68aef037d2c3dfe765beafb993a906e8c6bc9e1fdc42be558ebaaf45c46dfe8d598d708474e4654015d7ee60c7fe9aa82268f4ae0d2ffe51579fee985fa88b290338ee149fe71a551fe7041413595d9808bd43f555c7ea5cb15c457693e10051ad0ac7f0a27865772d8b227d8ce9a8fcd9658b21aa3b95f31dabbc60b90deb79be2d99d35fb8af5ce89add57a1bf906fc2d5f5da07b7f847e94879b0a9a890dbe6cd5bf3bb181b4e06845d107b720461c83f0eff86e38e986f7e289f5c45691395ab891abdab068a823fe5b469d533f6a1af102901287faddf5f0fac30cf8b0efdccf3df54d3a22e879030f8f566540c047b60c2a536a16ab3e87388b9ff477fc90ebae53fdf18f7e99e139af4a43d2a20f2f5eefc5d145206e8a8f263bc0f5e27f7d4e15ab0b6342082d8964b0b892235dca1d2eabc186727f2bf52eff79d8cb23993ee025fb701d3a667c807c5a1cd0b223af17837647517c811b8bd01e7d6a69249e8a8b83f926df4e74d70a84a28f613fa22ba08e771a46ee492e52b063c75c0080629fd1f7083a27563ddfae47917175387bc6c778d92b427fc0032bde4af72c8d1a0f295ebea696556081fd9ba2b98841bf919fdbec42ea48609aa3fff50c622ca98addde1de3a188455f6d70dcb75e2f6204733bca780aa5c97509673ab3a8daf3468249dd61d26db7e2dcff62ebbdba51055a0395a2499115b19ccb91cd34fa892e1d519ccbba342f3bade6af34350b04e1111ac29b6d38a2ebee76f1fd149ae4697605666072366bf8dc26def4109b6541a2d1fc4e6a0e9165f2bab24681d8a2786dc60ba9ab4d08c68ea23c063961fc154c47a0b641d583a5c464e80e4b76203fa051725054dec1240d8c119574f7447704ad5a6c3cec148d008d2b8d0a46942743246d9f1b7829322e45b84f0d12ddf251c04a8aef3c400262e05d7c26335a7cde05cd59f8a4ea7f5dc64d775504f284bd61af7f488160487bc9e8bc656944e36611b987cefb170fa2cca7435d900747fe7d0c22f59de6a52191db904ae1afe7a409d1c65f60cf7388fd469dbbf22343021e42c7570d366c7a56f39b2b31e5fc68b40671f65b3723be9a2dc3a9c82b91ec851dda74761f3d71b7d2e3bbaef18991560335c83137ca5fd175d5dfce65ec7f534086f2122bfc97e4f923dcf5d59ba6803e3dfce1562a307107703c35646d39630edaa90ddce8982feabb4fc355e00213f46c2994571e4205369f126d3719c4799a3227c42505fad98775b9f2b2883c6b5c6114a0eeedd3f80efb47247437b61f759f3fe78618cb0203b365dbeac0c4f95ff6af87e729aed9ed26e3c8ceca77a1550f2ebebec141189d26343b08e3c0db916bf188da10e0836a327e93580077dd53aa849e717360e278020b899499b5b3169fdd84acca69f70eb74d0bdff0a3900b6ad7e2539aa0447dd9fd09e423b52fa7676a108383d3b44f35990391db6cb84ef2f21758c24504d449c2ae058b55e94c0c3290e0e38b11ff480dfc1a679f6f51b857df046c29b1482a570862439dfa57e8a321da7b8539f0918d015c26305524bbeb5829461b0b6bee4a5011c5a85690adc5fcfaafb7c9c315d85efe5db39dd8c233a04e31050d12a9b570bdcb6576fbc5e4982c506134cc23e9d4ee6cc0481e082daae53039abd8606af6f90c5c2841c5ce2e417b5a7f8e9b127fcb0a62a28f1774a8643454fbf054d410408534bfb569b1e1e29cb314698f8638094c0c754b22ec93fdef57db506c7c3731899ca0ca32894c7ad7cf16d05ca9fcbb915b29e17eaee5a93b095fe18715bc8d9e75431f23f6bac513128cb5e64e7fdb3ef7efdf97887e5c0b5138d685a18093456c478627e3d250f79b5a750fd5e67b68177d74be4cf017ecb743b7fb40fbee2b23dbbdbaea1c57b62be3df7e989e6629b830be592409b3673f691ff47a0e951c63427d5aaa376dfdf8191344c8e4fd2f4f808931f2a8c020f36059319c7c5d6729df6dcf5cfe34a51c2f1cfe3982a31379710c90fe8fdbd176ec9acde2a7610a9d261c214ba39a4d87b0eaf2efe41975017b7e880d93e8d95de3d77f47a22f1b6cd6995b1ece660be29a9471f5c01476650aadc67091c78b808625793b8295067ac6eef36d42f7b415244943e64a9eeb2cfdaa77e57abf54c544167f653c1939e8081c12363b7867dd8eeef6036ed305419c2e4f686f535ceffb01a521053379052138e85eb539255edda98342ea50f1a7d92ad7b12f1d6d9eb7548c6064d9b478f66b061e51c6ca04dbba31dace8f010fb50bb775c76cd1059bd3016d290c81188c397199d05b833f9a77677e0a296b5b3a0f1f7ad4f8e4d8636a6789f88c5ffe3a6aa0d6117fa3f00f6a709a749602d05382ed4727c5ae8a47926f8af984bdb009d07c451de6bf81e84cc16d253e912173b1e294f7d368a379d97fe15901413469a86f1c40c69e9737690af9872a63d99f52f75b9c0f67cd907008dcc600c46d5d9d6341ad262b3da44f2a57adea9becd0730b37ce85d6ac61f434158b994da4fd80b735c321d98ae355c97a7518c0a4f326868bbe1d0b4de2021b97945ffbfebe953c26fb2f7977924565a52c25979185665e96a32bf5eb93fb21f10ed68a0ea4c5d0c72e263a5a27ca8972d0fcea827d51d3805243ed688cd205e3ea46363f553345dbf1f7b19702b59150f93fd798ca6e41196bb2cd914f04075876b8ae63d20d956824cf4f8abd8834da93bb4b6784ff78910085c5127df9858bf0bc699ddd31ac10c6e908263ba9fdb50e770d01c7654687f05bb76362cd92a183ef77b353de61c2e459723f369d5e63208af7255c7be1c1163d41a03c98ac4259e0d5f01794238e664a8e24c733ebef0ecb8f775f07f6648e16efc9752330da2cdc184fef5abd49c508cb4f9b6e4cb33927e9d47a0c5e2221a61a0ccc2a84f515eae31f3dd37ea7bce6c7eacd4952aec0fb3677496bd1f7aece33d8b5259cddff30ab2ece15abb696d3aab6205efbc509e7b80ef65e98c834ef3d46987f6f91cdcf0711748fffd52d34e1a3f537607ad8e97629c4959637eba33ead0b4f2049338ed9950862a9e400c1727de4d57f099f2d94aa5d9538da1e6604ac9cacd06cb127b9317c3e18baf0f5be109e4f3f351138b67ebc19ddacb0d016bce8952985313b20c3d17948e719011b019157aefe81f05ae927943c977ad170cd480bf70172ec09ca5cc6e4f68a0afcd3cefeceafcd28d9445612411b6911d0229bd2eb0c90b61c8462db90933b080b29e900b8e7321c361503ea69f3f2aac1898bf8bad0781053d0d9673a9fd4362e33b86cf39ba774a379084d0679ac2f53b218469514a55fe210a7096b6b2fd344482c0e6d100a0983478d198ecd3da93a98bf75c5886db58619572a37897f934eeb2bcc95a7868e28a9f680712b0d24533e75852c34dfbb78b0a200704e4712cdb6f646a6a2af6de650b443c28bb201c8f5ab193a51f410c193662d2846479d166c3b12629dc4eda396d5574eab3d6ddea081d3836de8942772e54bebe6889b629b8176a733acc08624ba70185f207cd72a49cfd1c9ab3ce1011b4d9c6adb65d92b13c4a9a37ec2d5a690f44728c15105887f207537d213853a6692653d63b6a615fbfee436566c3b581140c00f82d7476bd85335ec9774f5b237f6a9b10030d9d5feb73d791fb9edb7caa319f8ee7fa510f757025cf4e68b5974d71d111275cccc790e23c634cedb9e3c8b9c90f42b000869f9123ecf51e3faba73a601dd4ed293d04cb56c57e02096cb3f9808490f910ec72bb546066ec2e9d6177e9d5449eb91a1c6fc0856ebf5893f8b06c8c5b645656ed7d24e72d77ff6a810c8cba18dce010d6e7be7372316cb5f00abafe1d5451181eac22c8788246814c1ff54d46b1414a2ab3461e77686bf24f4493e8f1c476d0a459773a00b92f0ccec88480c88b221bb999e27c29d1e4b1f28ac0e82add4df4f12620d97592a74f3d575eca0472d4f2dfbb427e6e8346ffc7f28e016dcd5fc9fb9e3bf61bddfe345f819851eff13a3554f1b38f7d455eefef814e386cee8eab68341873863dc05e7f7a7f52c90251483ff09ab99a69de47e1c9cb9810730f080fd0717e1c2f94adf55b57c2caa1541a950326d18b52cfcb92af27c70454e13d673ab0ebb5085e26867de7a6d153a44c66a1c8652579cfebcb938191cba69204b69ad15675461ace21c8db6c0d3e118eeb0658050a23cef016e61f4450d5b3bde82261c87de4728f9f9ed4c454b8d3451507181446f76206d525df4c78e4aca1ca8d69f0eb4e52b3e0f21de560410c85cf26bbd497e6ab5d4c8d6956e1464b5b410f173e4aabc2a9dbfb88072b8344496efa840195b2494c82ea0752dab13a53973f9db71f2c00ff4360e2b2196403d220fb910f638aac031b89ac7ad82213b08a8a15d639098e2c2e13eca5cf47fbbd1529bf8bd4835a98ab88f622884d5f6a6ee8d95a9ec3c28a645e2e36441efc942f5b697fcc7b3927a32e633a664c8cfaa08ba2cbd7b7b98fc622f77b42c580c1d8c0e5b0f4d12996e49d8372c41a8350720be3b90b057857d97c8b1a99ee467bf7a0e83e7c168392c032e4c309b2115940d961f97a9eac88a302c687c8d90d23163af725f039c1166c4f9816bd9ad88ee1be8b94c617bc4af9a52f300307eb1a226900ec367579ad2e0bc8f1bf04affc5a6ab86e6074c60f419a2af97aa5748ce576bd82aa4baa6af23b866242cecf13f47877c8b20a6e18f61b0bfe7e3982bcfd3c3e57c94e340ce0fa96429fa388b7050c4b4dd1253d79967ca23e13ed33d71a45d3d072da26d8a9f16de69a24e23a276aefd6d4f76b5e67015443470f12c29b8f87f056956ade1e586ac8be0bdd38922ec82b268e528ac02609e7c6feed839366d54b470108edabd1cea461a0a19dd243bd3fd4efc149b3ac83cc9505df9c90b4a20c48381b4d595231025ab1805c8f72772077785813d90e5fe74a86081d42f8d4cea96c97b7bac276924d7675d1c49c729a75fa2751e8ccc10101339b7d0916ee098beebd87b4a70581f6849ec147806f51c2b44c1fa2257abb411f73505439c36065c7d09dbdb6f72de3f863c990b705c3a23a2b48ce3d528edf72508d0bce553e7e4263c0ba999d3e5185ff34351c8613f993ed86d2bcd1df4725bc100bf867a027b1a088b83696c4fb2b22e3267592e209f8e51ca16b5cf7e2327e630aa363ca5b9a4bbb8df18f229ac05b6180b70954f52f9a40fdffbb613f51530d44557020ec646957d1a63352ba8191b4817d55ad1d3686eac678ff47c209b9e2a0cdbb4b89d17ddb9c89b0c45a009b27720857f7306dc5045d61fd5f698c622a20e205cc100421da5926d585242430ba67dd3d74b2804a94bbcddb7369d6aab7873d8164ded4a9629e19d10edc6b40df50e8af19e9ad5a3bf4b46a9b5eecba8af57a5586d0615984fceaa329e07b94f5e27977e8f63f1cd2bb042f91ddb2980e90e3bcf9c29ebf96034b6f40822c24a3021ade742dd690791ae9e079784ab71bd604e4d612c0b09fddec90b34ebcf27d7161a679847d3bb025fd109ed42b1bf3f669ab3b377d9c662d81ee3040126a4e0370f24b872566541250d0ff8da10b14e2a27a7c39119541fee7cc6687717e437059670dd8753da4dfb778e82fa716089fe1f1e6be17a9d7b5a54e4f18253fa7b0031a7108967085257cb54e4b7f8828c42fdeb63408c0cd1b1bde1eed0adb93a57dbd1b361a5426bf62d9361de18b893e4d394ea44a86765e0ce2f0b7df8e567e48fb76bdc87666e0ee93a9acf9815f91635d6cd55e794e4504ee014ce58f7d54fe2fa6619587a6d44db15f0ed8808919eb697c6b46226502f6e57a6bb25f65cbc513a64e65cd7e553d59da9adace3d3a273cc8ebe500153fb19f9243574c5e553aad27cc25b18dbe107fa6915f523f78caf125d467f5dc340a83162402fbd80ca29b563e2cb7aac2474ff65fdf22e434b4606e79464ae8ccdcd86d145ce79b53f277df459c72b45b1a04fd16ab02d0269066848a45b5532aa5bd0f452cd44157a0da70f19997b72a8f3f0881c9987718d89d8f90e8a6e6ec1f834d2e51e60fb94dd30a8a09643f28b396d65891c56a51b9327df9b8228f88601bb652a3d9f178404c64d350f735239e9efa27e575f529a5b6b138dcc01661b3c6fa97a70209c9036064109cf9228fece0bec7cf1885240fdd52d81bf7bf9b107723c19347c506a6c357980963486ec0070c48d46df5011a403a4540958b5b436ac6b63e7128d7903ce76292d7a2cc9850a73e0e28a5433c1639e0871ddbc364447e4c70a43c68b66a40cd12009dc5a69549dc100c5e1d33f6efe5c02e145dfc243b3dc9d0dd766c0913aaf9bdebd46be3aaec31a809afc08d762c9cc025f7e20fe3b8fb13ae01b76b43d1bfaaa7fd1a4fae32f10d0fa0d107c9a1688c05363f8f5fc12948c28ba1098e70eaafa650c5b95ec60e02d38efa6226f8a5343633777a0f678244f2dc52e3784949b22d598b5ba4bbc6e97403132da328020a28f3298aaef352c2372479808175411c15d7f88c17bca00b8e099c8c85e6309a0b7f8477f55db6d6ba226c59740c0bd09c9d8503fd8c4f3bec6a7aac94fcab63ab55a578b9cead620201e4752e69e0cad4e948e68396550433b3fa98d46a4ce8cfd4ac49215f9b4e549eb4a80b0ad8fb22263f75bcef5c66358b8a4655e8cbe53585c78ab40a4bba3dedb15e28eda2f5407039773b61638031574bb414826e88c2ed8d75e5cfec3c7824b657f41523df1265347fd3bcbe41d7e97a72463d999ab3a262308bdc4a5b30f337e7fcc666ab9c557d7318c89344874174bcf817555bbb8358104f2c568a2cc4a0a3c59c76a9256d6e3129c6d741f0baa268f5a86fc49b7701123e376fc451de7ae7d27c0f39ad485e55776b1a93f921fc349b1fb7d309843f96e126ec61f551c22bdfa67102529afcb17a57331259cf1d2f06aa0d939f94928019f2df5ce25b86e74cfc6d16a1fa225e0b6a63891e61b39289e10585dd478784b9160163ca53773f96259b9fe7d45196788a4d1861af3321053b5c9c2fa3f7d4c47ef61489551ba7c4eda994d3cb69e4ae3834f6bd7702042953dc4b15156bacb5b4e0f17947c0165d891c56ec3845e7820d22944d88ebd325ecb716d81c1cd69e097727d4ce3c4bf382ee37aeca241e5808388f1bfbbdf313eef52dfa0e9221b4a58b930e0ee791fc42f3de1db768ad28fe5d3dda4b00f815fe4824f09b06a085a041b32a115127918ced68158d33e1b2f2a90151f3ea569be57b839791e7e5320087d71dbda915533daf87d54d0caf0238954582ed26d74f0cbd8d7045fc8a1382c570ba7e3efed3c72412f7b47e3f07387ba1f81654751c7c9b39f5079148431056a69980a1ccddb4807b4dae27a1ae2fc923965159a004f6132832540e50b0cd959e6d87545c7866e07891957f3b17441704d0f166f0c8d4c99e149d2870ae01c7a9c1b392d01551fae86322dedea81db59120de8cff13a1091247c4c0e0a770272df18d5f54363e050a008dd00bb54a5a45ce6d92777913809dc672c7a74e2f8e9c91eaa3e945ba4fd074eadae3cc92d7dc38f66bba44be2141704ebf7ec0eb544e3d209b98dd276b166d59446b486a612b60074ba8f5183db0f12dcf98ec6551ff9b57f1868f2b4c078025683ab98006319a024295ba4e967b5da80e06bfa957e1a5346bb230a0da126d7ccfd50fa48d5557072ec29efa39aa3469dc3b9e8cddd7df976531dc3d13e1ffc0c2c599c77ea9d1d76d3a9d77f5a1f1a350ec7c97af771693794a10b6dbb46620ed7af702e04ddb835d6b7ef3336aea7e94a879dfc80c4f291518b7713749af8abb0c3a7c1119449348245fb869629dbcb1fb102a3ee6dfa2b5de8fe41601c5c6f13969570eace1c398d59fee3751b63513b3f962aceace67f07bf74e090bcc592d567bd4d1bf469db844a31df1f8861bbabd922e1677cd063711ac69096d51d1626435d6fbb42f4d43f8338573c01eab394f6b67860bd8f532c6430f765f44d57510bd8e8fb7f159beb2d8a5a26b986959905271390232263aeff9baf320fe508820c002988769e5e5a69578c1fa26a65ff4af89e8ae7c9cd92a7aa2eb84b7e678bf9324fa509b94d2309c7b7a771b81bceea2f11096b23e43b815226cc35afccd786724c0d1075cb474db6285eb9f064ed7d3985930806d0fdee8c22a55798c702514013c9ea2ed9880148424dbaacd337f7f18bcb9db8e9677281ac9908981e59ae9f5e2ba2246e81cd4bc831d52c4ba1cf09d23cb8a0dfc4b72817464283388104b3a4a2fd7d606ec38ae048f58cd20acde4f0272904078ed82ee02d6793b907584bda0f8d2fdc2bc1a6fd512f26bd8dd61680d00c827b8f01fda789fc6e810333edf1243d004a300b5f21db9415fd1fc7ea26b7d39d559fe09a15eac5acd54f3af93d14dd808bbfa23401c895ae1f0fdcea90501132f238c2ec5a4519911ec6fcc709fe0dd1e00c4584f3108824dc879d81eedb749a91a417a7df5d1a2c9bf34897d1e9e7042ee972fe56923ca7f15ed5d63a0b29c3853e1e785477f70410a4f2b8af43fc65d5cf7c3931d4b455e4a376b574fe769dcb25e0add3a2f3246e97ae83f23e529b0a2f5feb6bbf53178d5e9e8e6b1906fa4d3b28b8f6328b35e78cf63dadf7091242a548475450f8a30f54d63da259809442761273a7874a3fd862efd62c86bea3440e79eb95eaf3f8ab0f613c286c4d5552d9fbb73117cde19459e34733ec6f4497c8fc1beb0a111780b0924351e17d0b7017f1f583852e942d64aea057708e972a5f5d74ad25fcb74ff5425550b7a04a3b294e10b518d261c5f9e7244fce47c400a8b942cf64efdcbc483642a77d6bcdd526220a7897d6f545c65066cf03cf0d2745e02724dd5664b03aae2b0d363386cb8fee56b91bbc5ea3f7c919e0b044cd2d7b10e5e2de224dc4d0f4c41e078a3395bb5e1e58e4728ea4ac197881a0e0813367e13e2f8d530acf330f6921d2e07c30df3376b3edae15d9c20b4d8d2c6c9e6d2ca6fdfa1fd47a7e801d82138edb0d2637de58a42005c097b908f99cd4ebcb118760dc9c31540bdfca23f2a0d0dfd3b7db8d54205c1cb0e136fb94205b27729e9d5cd4efdfc961679b70ed85b45c9b94c49e605ab67d8d0758225048135d57aa59fdaf0f5b1db3700cc116f1cad1fc77f9c340d7af1120513baa5e4a8af94e5fde08037c136c36fc2fa6d885dc8a6c14b31f2204dd14b131d18d98018bdb6d326c97788123b1b302d8ea648a6ba188657e681d8a1fdb2883cc48a76a1ef34da4b2b5078d5038c4f482e7dde03a7f08fa9986ccd9b5357c7aef9c061028ab55e1c24ecb5272a5129af226c5406070c6322e07111465efc434441eb142d2e064311503f7378afc6c29e0395f0d03537037307e540bda66cceb8c68fc55671e86b2ae1462f26d36aee9e45311cebf089a5eed5e5745ddfa81b7b4df2653fdf71bc8efb9c7a86a2d3428a93a435217d3647379a3a3fa5052fd1df4cfa7fd03609279f9f7da960a0898027d6bf3dcee2eef0cb15ff029e1a8ffcb4e0d8b1817f4adff5a6abf5ccb6e25fedd04effc3f73accaded4f473130aaf1382ff7a7c264a7ae4e92ae6f15194cbf5410b037bf8267fe4648bb3b74bb342dadc988567b34937166b58d121f14002787be09b57b329b8a4ecfaef7df27331cf9114ad4a6b7ebd638b44032d0d76b5305219f0a8560665e60753e23f0749cf0055c4e4c63784a856393472966bb62957f050923b91565e19fbbc51237ccb4d92ea656f551d90334d916770c88f7d91804627673a974d6c423c82b55d9fdb3db3c2516a3e1d047b5329b06b99db707f6e50b2d0a1d5b8e57b16954e98c3c0294269f832d56eed91e369554cbcb180775b1faa2c4d2c5f5dd4c3198ef1840c9cc84d198d0f71991a5e9e0fb4c0354f78a79221d90c8796ca37b9ae06545f190acba58cab18b72034093d3a0432edf0e522eef25c6d91cb3dc3ad7f26fca9e10b1af2786e7151daa095c052d58facc6e33f637afb729d013c4dce1e007bb7add0ff436da82e4db52459f504987a62a37bf755d3921be0ca55059ba9a0c9379b561ea69125b861a34eb02d680d3894ad71aae966a651e2fdd359ad80307e34250239dac7299d93eaf705cd9d42a3376c19d17e96b80d17e756237fe6d87f323777c993b32b872545f81800f4aabfed4a4d4bd17d52a8c54b12338cf15beb0c2e41559f5985e62d6ad2e04ab7c48382a559400acd6d9ee423ceccd9e30ff6a3e0972369cefdd0fb6c1877bb62bc48cd52536fafc45034b781da62c131dba12117a68c72c5c627ff996cc9ae31f08eab77b234618c1b6ff3551941f00743077cde3a3d6f9c7efd025328c39eafc737d3e432310c561a75827c26a53ff6b1ded5716a4a576b39684b35e034e8636aaa6a5c19da36fb6e7d56ac8bee5afd9b76a8f869ae3d742befba5b86a5e5cca9b658f7495a47de754bf20ed8b212f14b67ec37303a1fadad2c4fc3ca7b3742acea71e8254d6333cb301610ed2e2d8efe8d885668b722068b160aecf8c6767a3c1591e3c89edd00e2d0ba6478e16450e1bd0c05fc62616f05874113a72fba65f6e5720d50fb33608533447e6efc6eef88a1d3b5909f9c79f7531c8f3c383f0a21b85381e0ecfe3bc00f984397a8ecc29ec551a8400e0eb43e4a0e27ca6a8556f962f5974a7ef7b103bb9e8570085783ad77573ffbc1c023c628a8c6f74ff14313b14752cd4b559ae37671399dcf5d8f9c3640f7d5abc98f6233744aa57bb913c772549927dde486f86f79bf46d8165df2f5604f342924bf2d0468fc73f4731ebbd96c49c39cb608a881a6a40ee94bc9ab54a4ec715543fb176407316d324aa281bfed331be7f82c0989e802e1d258313862421563d29de344d2eb8723859adb54a975f0dc9718a7ffcbf6bb6aa5f7c60063331021e6bc96c46c39330cf6e9fecad2be625767dcb44b11b4bf28809fc5344fcde91ace404e4399ce69f30a536b3a32f3665b2c571672e953164faa3be279272e1bd4c01ef3e06b82cdd70517551c0d3f208b224383d2716474ceb34915c603aee094a77d5f8cbb3fcff1861d389911ffc17351bebedb339b1dd029eabfb935de6cb5d588bdc161979f6aceb41cfed2fb273c61b813aaf28959223830e409b193d6e2b86d2a9a6d8d9ae603e54964daf72653276f44a7f8af2ea94e532f6cc070f75f87c65b73758bdf75d8163eb553f434bf0106ed048886d54e958c3f440b6e64f2bfa76e308c16365b47259e983fff3e834cf9230b355bb90404b347537e36ddb4784ea39bba53222e2044e9dd873311432ad2e0ace3164e3e21c74809188fbbc4690021ed1b005751f37a1198b7873a57b0f699b5814808f1df88d926b94e255cd30489500bc1f33286bfa9b21a16a154a759268f54bfbdbd23d303bcda8c91c25a5afab13e6891e0e8474f2580692bd6a766b73698a0f1e16e3723d0538ce76e2e3c868586fc0b47fd73a38a65aac908a8e6c9964492446ba3ba31b66e375b41ae5f28fc2b991d217e92839e4dbfed9db2eb44b20d183913739975a0b96406a7a45692bb39ff0c8626f6732cdbd19ddbfa0b4a1572651d4c2829f86ee819e5f640680063853bf5650077ffb630fb0782972e9189676c1b76b2332dd03ccc3888d3c89da5c3c5d6c4c6ce6346017f7f5afca97bd960e2bb0cd0d912787e10705bb49630561b2c86d515587ce117942d31d069a00b0cd2be6f17d63d8f2ce1c5454ef386c327dde381c85f5ffebf7f0370f0ce9f7eb6b9e5b8f2978f38d88323970314909589e4ccb712ce44a7b8a05b71ea2e5f69216893dce28919c2e6181055c7ec3f69fa565da074187b8902a469dfa04994120552c6a1bb06e217c78b9d76b87b1f0ce6256199afb27b5d4046382e72f17ffcad9c2f0eb8d800c8d3d67dc18e9e9b211bd8a803184f3a942f563df3d3a7e6e6491bb76f9aa9a35c64ffd647e362d65697f9df7d2b98ac35ce9adae93595cf72108f957b65efac7838eed3f7e5821b42cfdef77f97a5485af7fa74d42486577f93bdffde6eb3159f81bd0beaa632ec283b621421231b472ad982261cb324040de5348e7acfa6758e1cdcd76d5ab465d458da4942125307dbc50bee0767946bce1dace6a7e8f231ef5eba3eb2e6f10e5978744252a3ee00a3a4965b328f0935b0f5f93341eb89186c362a86ae4222e374c3040edca932028976c9e5d56e0113072969812d3205d50c74587600195d1b652f94a1fe620bb43396e6fade091b77516076115a00004fe6b2fd8c615b68283726bddb199d32985b403a19bc602ea4300ecd213c65e16b818d77495406ac611623e7fc76b15286f7db34c13576ca5f64e33bc0175a3c6d36fdc74697386e5652ec9e46d3e57eb79236df4351b988ab6895650b4b6bfeee917d3401ee6d0ae6bcc83a215557e8cda1c518d1c6e2122fb38505be046fb4e9a3315f608cc19ee8dbea2f4e42aa2d9c87798342df2abd9d756bcb590d8031cbf71411cd5fc10fb8e684ebd9e5d33a73c6743f4acf9f7341749b3e2ba0e4a4ea12c77031339f4032bcc321c8a6ad0377f41f58ddb2341ca8fa0a6b8a34da219cb2e251dd8efc37ca8df8f2e4d5e4c283939f0dbf1c9acb84e7debf77bd61f11196b19e310e3c79693fd7d0410eaafd2d52e608accc8b115f24f3bf0ddb4d169faa40c6cd3e1068a639f70f2ef5344a480586cc33a15c426d800e575d921edf614ef7568e899376ccb5b26c964363350b15b6a1c796c360e5b74dd861abebb659a939db6d5709ba6d92350c1697f4f07dcbc1e9e0e4a6a4647ba4a4ab812f570a6ca874a827254ed0b3765b81fd4149799446c88a77186c1f0d9f48e040e6cc32f328d07f70304ee0b32bf4d44fe84d8619e940aac67cfdd1bb21e0ed306c301f9bc6dc888934104bc54b5753c8254971f04e0e96dc886b7df3b23979c0ad1b08beae35356dcc519cc784814ce03a5d5a753a36a405947e46208776b7c11a31ae60e90a940becc7608741e98beba9964c2dbb37051514f363127052a9b6602aee7b3e9e929307aea5ab9706e6bb31bb9010fc41599ec2164f96211e62a192384a74c8c62a8e95cf0ef7963e27acfe287d85eb5eab02812016f13fc77208112c607075715645b5216163d4fc470e5592c8348c69d706e2bfca69b8b487008c3953de995a8f586b18d885fb04da702b6c6b1af0e198e91f0f8abbe91f73fcba40028ccaf24136575d6fc1b2e44364082904d3658239d894b21677a1b18610545665ae20f5a294beab9e9e219a66ef240b13b9fa3e317be53e60b3f4eed83e1a03fd56fc709eb6e8c54e4c20e4c4d566fc767de488dda8ed6a2c9bafd294e6f990b92f07289bd2a6ce29f0b33e8d5053ddec2de0e0aa2e8f1790ac8589cfb998138a5a587b09cdaf4d84deaa3117ee57579ebc1870c7ba598b37619102afe4d07440db26e4313a4aae278dfd824e2c123ea7589ac760737bba215c19be634506e564d658d8070106f2cd1c14347a6566b6f1c18bedb59880e6009e6646f0f31c599efca3fd2cccbb8574601dbe8995fc218d22641802fb52ace71789c46167414ff48d50cd5d616bcb026743eec050cdac2f25a62c89870592e97cdf2e26bd74c6a265024137d9a8583cf4cd788b5f1730122c070b98ee3002d65a2f1bf3eee439fa0449ccb3171aa40f35cf6d62494f719cd49c7f5faf879fb54d7b4f550cfe609a9017a05f9c0543f16d3c4816a5b6c93ac2e9cd28c8a0710054c0f3b7ba391a55a88de9bb524fd25d5a4cce9e064638e591543b53a56a391ef2339d8aaede63c0f669772e0e78ac9880e3a900a798e74f0ef74b2c3af21a80f042c1e54bb988cde7d72509a8e42a172357fd92ee0e45d71700dba9b1796f078cfd804330369824ca964826f190427f680c118bdb4f5b45964901840c76563b1e84e4b97049ced93587db6f0b4f032507fcebe7410b66afef22e80b1002c8c0fedac59effb45777358d6a1c96c269a5f4e9cb9911d396acca522d95e1252b7aa39cd0eae1f1f5b401aed4ccfb0bec75fa3c8df2b920425cb9f0fe61c6f5d9fd84a7dac85ef15fa06820ef6561e4d3f9df5315639f7f1a82bb7e30b178655767a840a08c4ae3f445e965cd9e192905acfbb4877128c496713cc60d105b05c107bbd3534d411cd14aae0b85ce830ec0bc8c784a1f4d54577309ae1afa2ce3ce11996df60018ad630dc06f43298690d5adcfa40f1f725b329f96a87e6ed6f51c2d827e714eb8cd7b0c30941b45b97e71cdc0918a8d0d26663d378d77a2d22a3ba929015af27636978545518a70e79b4efe61bbb64cd439d83967726ee502810638c566ae92be818ecbbe1dfedc5599cde45c12d4268eab7a4711d2fe08730f07230474a2028f5dca18516c48eefac41d26540909e86470d2103918ca2943d59f4e46e61e33f61a729826bf4c99104388827ec5e6618e4e376724a8cadf4acaed59f2d337a4f42099440a015f29418efc299f3c92c007bbab7eafdfc21a9ec9eca3db8be921eb1762383dfc2b0495a5eff17290e046f58d13e532e15266e55a72496da6135ed4bd2ca0a173a4f874c0f12b01dce1899a34ecd0c613aad1614b4fafa0723fe0655076004bfd994e772ac66bac3705da87b24351dd4ce418f16dacc72834f543598183efcf42c107c2dae1117921c7c1fc866f74119e65ba623336b6c4da57c907bd2804c962467200763652a0af986719762551e5d8cce4e473364b802a22ef47f51fcf9c2c685631b0c6c7f4463e0e8a8c8978970b9c7782c811e51f6a054b92cfba6d8ebb10b0e9edd79febf7a69559cecd2b2ffce75ea7ecb10e560aeff7fbf5ec4fd7274b576ecb8c0dee7b1f30cf4a76159849ad9e4ed319abd61fc6d9e3dab04eaab3f3149f5f227a0c5da24fcba007a8e6b03458789b4cbdb132e8e61a99f35c0ab79ce2b920b0237e29566a57bf606de83c3250ef95f7a355d6ab58c21c8eb65abca9fc56a2bd24e68b88306658b17942be1a96a13b8b3cd0ec25766b315a332761432fb718fde473ba015627a8f59eebc8e804137f8e5ace2428b6cf74f0b75ec17322fd813d6da7f7156b3113c5169ae1c42e3f088ae1eca6230a2135d67a87650c907ebe39f0478e265b32b3931bcf0d8ddab6440abd4c7ccd346815bc0a0d209f4ac224cc1baaa99627dff642eeabb1fb4506c5618edd5eca24828050b634d9d203098630c1a15106e4a416883f15071f644c4774abbd2c3de16fd35e5680e67129ac4f900a7e89487dc92527fa714f893dbe753d1eebfad304174d429aeecbbacb30f85e0178dd607965ffe7d5129020ffdfed17149d3edfa399aa979d802303804eddd6604644f311cf580f82edb946d54e59f71ff56b58406783e45d7fbe0ae4053e4fea12e6d43e7adb80089b3c32a4627938cc80775a0e4ffe706d48e505b89f58b71b062189224eb94ad0d44dc6bd1858ab7219f9fa09a5238d3fb75efab9e37c588aa5862f81ba7d1ce4c29cc1ee2e77e5e95594b154e7fc13166d6afde2fe9663e745b25f87b74f0376c30894aa655f4b91fad8469626aef901610a83f57902178c7703d77f36080e36c11d2a500fc0d3c6b4cfb56923c8a6e0e0e417e6d19d10516ca8ca9a9094a94fcdd86e4234556092850fc16def1de0c80351774390a8a37bf3579682d91356036f7216d4581fc0676e2f63b3803d70d6a33789535254039bd37183a4feb563148dd9bab4f899708707a7bec8e86d0698c11ac0ef9480e1693414b6b8e3e37b2822cad8ae15118f483e04335dc4df54465282accad69176b92ec318d389bf4350ea54bfe46eccb3867a06def0450b1546e25290d954cd0598469bc6a81fee43955d8152c607c95a25b65556e6cebbcafce739447c0bad33167cc13f89131041eaa647b9f9fe259c7dc7c2e39de5bb1df232933aaf7050312a848d2e2d4ec7678796c7a8655a353587676b09dca0d041d3a69e6232150284139d06b212542f20cd4895b8906ffa18855c3cf5c41309e95be16ac3c214c1e848cb28c225fdf3f652a1c1f49f84f419aeb993d1f3cfa4ef26d211be9d317ca9f2c03ff6132fd89d083c947f9ff4034b9872f4b063083ab6d3610defd12d7d62743d27652c538ee8f9c0a8450f9c92b3d6ce23a8d44a6688fc3beeb1b1e6166e52c0d5d5daa4088a6e791df42a9f5721186600e202187db905844c59a0bf2e8674f122b2cc6d8d63dd01470042898cd88290108e29c843ef78fa0b81388a5f87d6cd440476a36254a0b58e8b1742bc8d1cce75b6113eafabd0789e796f0c6a1749ba7625b6e20ecb4f5a7232c3a3b4c97d562162f95158845d59b7799558b6816b81f9292f135e3e5ee4f1c2989c02e5f819845228da47573b1b884cefa43048e8191defa981682f8af12b7a0937291aaf89e26e12b6df1793f4d08e2acc2235ba7ff7cf9c3cf9b1fc26fb7effc8cd2a301e4f316ae2b557ec4793afb0db1e7f98e7424cf7e7dfbcae40385de466da17624c351af014f0e0955d19e39addf0e56d8972f2b6a91a903470792241e5270683cbf0f44d4d5525eba6c79af2a4d0e0e9f2236384a06c1613e089c9f7204231950e0b884a189ae32f35e435fedef160094d1c92fd4ea4985f273a14d6a5a22ea1c72a4f080d06531bda162752b31a08773bc877b4e3580210d569fd413d78045561efbb8c314a4cf198826988ef8d061436138d2f7a82ad784b3727239a6167991d4671277483853dabb2faa0fe57a2a14edf940b9c3c76af9ff14e8dff75b9251bf46c785be6bbcc195237abdcd68f06c1a3e61809825aa7400cf84d3b391d0e752687caca2694c26ef1e9d6efe71a8349c5893eac3bfc78f26b10e62f1edc72d152e8a5cbb98b18a5a4310b1b1db345ebb83cf60357a49545a83056fe6b0483f014ef09ab7d3d13561fe12473bfccceb2e56e3339ca33d61ad45705f03f05798cab24fa3720da1f3fd4fa1ce4d0192969a5a158c44b53fe935ee5543c0bf6d5b061d05836d0b1e07afde63804f4a64e6ca4aef1acc89a2f827223e7d0326b4d4cd4285ce688e3e2740f45e3b8f5a53334eb7042adc2ba5c531e5ab606f52953bf615144299c9c9d33e30f668d41469180acfe0e9dfcad2e54c75e39123c3b0f927a05c871e33d63708734fb02e0ab9759286e29c09cf1c7aa002379bfe61ede2e85f4e25687cafea08f372cd7af6d079297da08be4375769be1d16ff34f18410b1297c95f928e0a71862f0c581d7393c93e333c15b9dd702accc09f09da2434310d08f80a92970ee1fd88b526a6a6430502a983a20d0decb070206d6882879eaa6d8965fd52d59c433d34b486899409429c35abcf4e054a339337cf9f464c6f74149c2587fa8e59d2aaec63f208dc5abccba604ea19193a94071e2a867cb4ef5dba88926e73f92cabb57a10f3faf2388227e61bb77573367c2f21ec2eb8fdcf0c40dfe8a8c03b5a36e3caf8dad1da5f0b26a59ff9fb0d8e3acbe922dc7dfea298df96959af8522be08caba427106a74d877773f45de561c4a6e7bb6a5fd5184109c545ba00ea6698adc904144ac0204b046f9b2e5f0595748f4eb46572e0f1764e111ab7597ce51a1cad9635c49916577600abd10bba062db7cb49f204859c08d238e0eeee7eff191e4f47fe31d8bd046103b901377f87cb009ccb267fd2ac20426c17952a1b6e12748961fdd2389ba4111bb54893a1d392d59d729ac11d9c590dc0d5eb3db1fd441a73fbb1342c483fc126f03f389020b91a94b038d5712ba1118f278e47fc9102459583585f5325e09f628623e3b5298672c42a8d01f27ac1945e2a70bde20329822d465fb0c898782f63466b5238fc58b90cf9b903b833640971b8419325f6b4a83f604deb3e11d30209e44bdd8dbcafa83c89cf3b5ccbd7b22f78e18f5d00aee3631a0925059e03cadb543d572f863f3965344c40561c52c5106260554793ce2011f21a9366bd58fb3cba2eddc53edb680e35195b13aad8940d0931b190d090612beee91c0a6d913b3cb275152ca21ccb4a02a73881e3ba9d4dc42fb4bd4aabe4f1f82be0ed358b4f083a5464830b458b4eb98953da5b7f283a1a9524e487056e1f1a613612e21a34fa22a092c7c89b06dfef2ea1b1a6ba4f0091a5f755d08d09adcd8f9964d060e3d1bed0dcc4089dca6594f244e8b776864598d4cb808074c09f2094d4f740980eafae26dd6078d6dbbf72d4ec22515011eed3dba0ba55fc5db80199e80068072847a39fa79702278047a7194159ad885a54ae073c169e70162bd1e081756038e84e37294bdfe02a9d1159b2f673d92d899b59c4ee6d337d00f18f4b09dee50518183bf5746d8f671a4a8d7f6ea93ae0a16f046d22b4fbef101de02f77b5d3001b9f05e724ba6070ded0d43d767bf4afbea8f8507c0c89e4a25f757a6ef628d37177a89498b2baebe0d8855c746d1d0a2a599f8db05599bdeb5253d8952db562f1d9ffe19fb4b0cedbd7a15de8bf377402980b97242369d2a7e1151d68ee1ad612a284f240c28038b2ec69d805b980d6776b3baa845de04fde5ee5f4897c432d95ce68eb69db051b1d4c9fd3ff89744ab7a467273aabbbc3e0a6e3f75a1a958a0d5ea950965700e855d99962530c15093a5c545b475faf3eed4eb49e6dbeacc1ab5a22311808d4bc8dfc5025bb42bee9381d52fc0a6ccc395cc77e159f8dba49f4ddc4792222e3b95d1c493ccffef9e6eecb3ced8c3d07f873c61940e18ecc0191218bf12d5cb3a4af1bcecda17eec6241626981c6549ec942fa6db7b9e423b9376399431937e40e9b2d2ae74f4aa6f78a0daf00a892b2b684ee85f0b824b77c3b94c468fc372e8670f4cc41bfc352b379615fb5541941f4b5cc1f04d1d1e71011a5b314827f17c2e417c4cd3820dd27710dcd8eafc6a79a7a4f7c189abb76c22f642749737916c22b43869620a501f6ff7f5285ab3a51ca77bcddb1e34fc6d76c175c97718707c58a6383f75fa318e5b7aedfe11c1daf7e474505937523b597b2a680b2500ac8a9f1b6caf990b567f87fb104f70f4c0f12ca7529f8c113a97d39bb2c7f7966b825b7104746c8d3caac9744a877ccd7046ea0e699f3a1b59dff9997247fe14700e5bff55e4d9c221c6daea9dd857bfcdcaa11fe5d5dd4d22230a199a89baaab0360de9370d2d173e3c15e4a2aebf4823c1f6e9565924b41b7a93adea010d20a0a1f3a02437630ffd034e365f93f2f20fec355619cf7ba42c4f7f5287d76e20fc7f31eee218ad5934802704d759e39d5564671ccbf5223084a245f257e701c3cbfa94777f416f43dc20eace7b92bb7477fba466450b48d23023ed796f606b632783a87083a96e588853328ca4437a2822424a5caa7004a3c97583aea69bac8963add4fd72e158b610dcf57ab1d229be7fe951deb0edb3cf60f7f5442e48b90010c4eb3f27c072570e802f5d4b7ed9ea82fef828285b7a07e6fb42cde005479a2f4fc4645834e4bd8814b17417e3b30b6c18605842c6d6edfbbb6cfbbd95366d5efe23baf7cb601d7d2113f533bde9c5bb6a7e63ae6ad57d16601ab05122e35026299c6a08dc26ec494c808352fc205c223f590db0036e2db28e594e8b54876bab5ac4d2e761db435f98f9ae5d81aa874ad18220fcd88b7996f5a2faed27cba02e7c9ea82f03e4913f55047bc214e37212ea7db51dfcfd7b7c382b65ac2ada41ad050361b68caf45d36bbf47f350cf4c4776dec9c10787e350accbdd5856ec69df7f181640e2bad01bef707f741b5c1c4a074c737ee389da5f05d04ab3602bbd320149104087867fed0935d3b1f5bc526e1fd15144e3980c23d800c382ecec31eac905df3251284d174989d6015960fbd7567cfb81c38e48fb9c3be71b16ad4780e90b58131cbd79258b5eca55be35cfcd39b24d6fa365d439aaa5e49c91b98c5ab826e18d060210540d77c45a73aa39024745efde4d06c8d5e7a4771ba34c3f9bedeaeade8f0021bfd44d2430ec3bdac67f629496ca529eeade13ce29491064fb4a5591918415ad51658041166001d6338a419662a3056261108a2516a36c7e6dfb8de1c9a7dde21c17720a7834f01d011cee6984c52ca324106963ec71f6182df63372fd841b41e7f0a116681b36b324dfe9098647fb3c15e957b0dc1dc4a8dff9ebd931721dd61f5609e84000d917e181e15f6f4905a84940982d7f12985f9a507a7279caddaa163b2dd293b3ee286684299d368c5eb138cc49765dc35c03fe77ed4f3de0e286b447f3063a9ea0812dcbef45c14ac4b8284e7d677dfd2426273b09246ee4015f31291e54788bcf5439a116cab08fb56f0d150d3db5dee21c28c862a2d600ef803e02f4654d290239bb83f19b81e7c01285cc64405367dcfb6d3a0d4d5d08c3bd3fc52e4b3bdf7ded1fbc33fa0ce7773b46fde41b3a26ae831a48d17b2e84e926f83d92671c44b5990bc8afcad981cf5ceed0d9eec84edc268b00e49b8079581726b54f70fedfeeeeba51ef467b817e899616b2d2f27d641e746ccb82b85a1de55be439c86bdff225bdee2c82b033b2e81f91e6b54a0742a9f59ad35b80963444f57ae588121961eecc612aaa45b59b231be0466d50c08078b4b7af764b806ca9ffad65e778c825a3787f413a5f108c6130eb91484cdeada287f9d474a3748a5839e6fa6757803d17960d6c1778c590c2417e339bd1c1c12bb441bb6400842f06c899b6690511b88f460f1f8c2707610ccfc9bcc4d2b4445d59439f795c74db6ddbf8e18356f6f812a9fa6ce28609a6119ebebdb3697033b6575fa924cdc2ca9affc392a2b942b38e68561394f3e604ac4d02514fbd6ac2ece63d1620462a4da06e4aa64fe705b27caabe0c544f655f57df04edbe7059c397fac78e418b74afcb86df39bba860f2b208c3d2889d00ff7c5acd096e418a65a761d805555e5eaa711d865b42956d91dffe3267e700c57edcac93c72810672365c9ba2207375a2bf05c25f82ce80ef4995ef061934306279171f5f5086d864573c51da6f6ff7ff5fd8b57ddf6f8a345141dd1e2ff398b2a3ec96896ef3678c1d3803c9e4374b8e9e756435021d8f95fda4592e0dd292cf5236c248fb2f04d567f1bac8d82071d7041b83a510f5a058789c3668ad9040f302eb5402ebf866fe2e58395db7a8eadaf7973d5e7191f3761a91ed04293eaaf2bf51556101854201c0bb9894236f4474fb7c464290d0ab2ab0dee561e52e02e1fa32dce8d53aeaa31578e87c643621c164bbe9e1a1420ecfaf116747c7dd3935d990ef6b2f9cca8ebcd615c8e41feda12519f397650b9a06b8464f989ae90a1c524d80a97c331b8d3942357eb7c52c6d08bda2f053cedd8dada577177334cc0dcd5844c2a8f731bf99e8a2b99ef1dadafe01aace98c4f0439b89ec2719651b1277528013ad5a471477ee9e1d69147bd0c3f11f48d202e1bf889b3999e42b4adc7eee796337cd66b40258a3b8f9964b746b8b738c1619698fdd44ed0ba9d7712c14eb9a8cddd6e7b7c8f7d395a0f7f37321f44d75a93663425cbf5ac0f610be049e6a93b6b6fed6dff817e534d04fb5431082811a7facd76ea293f5b384e2731fc7f1734131405adec3241bc576943a4ab8b0ded8ccf8a41b98e4db8afe3ae8e5a1edefcb2eb6fae7eecfd0d24925c59cbb6660f18c2be62a56209ed08395b9c6a60cb376c54f56a6d6ab7872fb4e0d53bc22512fa64c89b046872cef273775a204425696b07400f780325bbe2fa8adf868908b4bb297449764137df7092f679e67c17079ef18100fee4c5aca155ff8d406dcd742ac0adfd3b295715a8cc124c5300e0e8ebfe8fda7da2ad41faabe7f4ae7d78b57ae83fee625df76c9060579b82ec43e4fb6f49e9d1b20d92f679b26dd0667e4b86b21fd6f0e7533de80180e90cdd73e6d2248f9023efda2f6ff1ff7c3a6ded167f7795c31f8f86f012c812331c7383f5969f8316adff65110d21f71430a41e8043a15538a62e4d1f4d9981529b986638be45b448e614e961fe77529002b0cc36edaf33b5d9227151b6359ad915c337a09e35c569472603480608bc98db8cb8b54865577625a79d3827dc3b13e9c62545dfa666afe3ab3d568bff8be868765365e674f56825d9b9f6c0823e0eba2d53eb73355c9c6381006147ad5d19b08a21d33ab0bd2bb827cd7f9e8399ab650deaf52921bb2726c52a8ac364035e80dcbb9d91b42520f18b8ac5494b44478a46ace8bfec155f58b547b36b5f0e036b832fff930837d8604daf0cd7dd6468ab1bedfe1e04b77c5d59ff92f27741da2b9a16a5a528ef9df0fa4465d2d3fb3caa35b249f2214c2153d23b36343a40632e03b6ceadb8b5ec26394cbfea4d9e7a3303f51bb2a54e4958ae764d85e1400e38065e5803052da1415b9cbb9caf300c660f147ce2d1b0e4473c49d45e92c7444025d9a5a977ec8a879c762fb3bb6c28e7e57845a3a4d1be8d02150704eff773a2be624243ef5597666c178c4582a77c1afce95a7e2155c68819f76ca252fd0f4f56be384240168af4ba6f282c380429b0ad621f277492384fd61e51f87999a5465fc1d21720348101096abb8e0592de91474e63fadb42a878ed8c3d14ac9e326159e671755d028fb385be9cbd33fe158ee93dac7a985fd43d26f9b72bae4fccb5fcaf19e04662d4a13419057ea450261898c68d9ebd06740166ec8c1085b912399176d29744f4863583bcced1e8c74cf9f097e1617249922ea452a7dbbef3d13fa4301ef25bb0e8b98efd6323779045ee04344743e74aeac786f86f866835cce30e8da5f6d3f19e1a0e4f723c05bfe9be7fa2015123a7451b7a812d88ad5dc7e205f8f512ad38c2b35154417f76112e701ca998bb3410be3cd8fad5eaa06ffe2f12310bc2b32032244e46185b0d642cb85d172b9c0094d255f1375fe93dc45cf61a42877c54f5d7d6d0b045b9c93c16a0897c50cbe69a22d51e68a5dca7b1c74c0339236af6ccdd5cc5bd07c1f0fbb9e7b1fe9a74f182a8e3d648aa3fe91ac6313045b5d127d2c39a74cfa68458b5077149c40bf38a469cf0fdb162570f4761cfae2ffdd961af250a4e39e14e9f3a607a64127f618fa38026f662ddc6b2d2f30d3793bd52972716e5a3baa48074cb877dacbfe1ba9f17addd655ac0801172155b0ffc969784eb16fa297be663571b049be508c7ca100eb33f08df59382e7a95cfc7d2652826065317f534ef31bd341375d3530fef05f83c71bb8dd52ae12e7c1ce53271404473d3c3c06d12beae44ad87a359eaa6e1157a6b2436edd099c9a17a2876e1cefdf315d1102238d7f1102672d4afaa2921bdb8585ad96208a2982eae79a2b3443fa935246b9d57d12b85aaa753d786e81e17041f3663839360218269c29942a0ba031cfc7c2cdc7b14ccf5d11cee0b247357e8e1056b96bb50ed044054f79ad36eca3531f8647d185c71b2ecf3f0ae3445214b9477129184a1044e7eaf46d9356d120994d33e1814ea89b4bdb8c707e1b2aea0cd83c39b2c67d0dfbd294d637dc0d13b6cd260e961789432ec939e6bb5e4c75227a2c57de7c2137026e5c1876f918c10086822c5fbe948304cf63df9dfcb3c4093ff7432d50682e7d53cd9a7ddc7898e0d23dff3419491ffd952f283302d671a421467994479ff5cc1c4dbaf724d5a9a53994da2145923954ecc11f69bcf41a1fbc066fe17d966824c143c7af01ef79751c3f82c9ded138a39b0c7b5255e6d2e13947405642b4842b1b518025f476cd3c39dd43be88811ec1d24b4a35e92c64ae3552236cbbc1e12f15727ab215e803fb7302cc9825d898a8cf10562fd1158cac9cfb764bb1abc0a1076d976ddc8d248c0aea7d5f7b6f5659df9c54f4762d752f800d3c7b36a86374c5a77a4c8014de7d0655fe92d1dfbe8a520c47c713cae8f8339a8c7f09d2cfdb9689f3c1483d49a509fff82c5e0a8f4ce82cc9a344586f345ff7b85110d50b866426df4d9478b0e5fe22b561b170bec89e798a8496b0c31b2552a1df7b1d6e1932b16d1d762f676d607cc7420ea0731f2d19357bee5cd3b1d4ac6afe63856ca502d7d4f0b703f4868895140c8ca7e4f7d0a02d7ade89ba9b7f6bec3f21e075b80b22f4b5b5eb989b153368476b17b6634bdffa4a52297d43ecd14c2b5c12ebb766182f52e64c9376c58f8e95c2bed37396acb6955442c9599291f085ee8b8ce8e37833f3aea4c924f0e8048546144ae75583d156f901426763e67614e5bc6b86b4465a56c7af56bfb98331ad9bc68c501bba0aff3ebbe66a38dfde585449c4c758ed284f09f34c59da653e42ea6595746652b667af8a314c7d9cb71e38bafab292fab10ab36bcc1578303ea2293f25efa6f8ba4e5f27e9da135e4dda4a84d297930479262ad036eef6fb57aad095438c4081dacffafa3ee0508b25377c91fc8ce56abb505f3cbea7ecd7cc1c1f18d909ea057729871ff421be0383685a363685d0c8d254635587030b15ebac3846f59e99f0edbf88b112a144c4548d9c616115d5d75d5aea0ff0ebfc4a0575a356f73cc24f2e809767b3ee0b966d14b076f98fb8eefe6fe52930d80b3cea14c7a3ef644e14bf9545fb60a491369501a47857b39e278968ef98cfd92fdfd0f959712c09a36f8b56c574ef59ca3bff1b3c3567dc21e37930acdc94460d2d09d9a58156bd96d9a3bf9de656c854597e052cc844c6964a8695d6302aa5c6d1003a0c3e73ca2c5a6d7b9df45a43df3bb0410dceaac24f4294c3507990fdd4400bc17239cfa080a42942836812d7eb9b9f2a116cd2eeecbfb3b11944af38fdc294cc453da5209892f60e663287a816fd536f995a775cd95d8ea6af7fb4c72151fcd9d5f2ea6ab210c0be722a2cd73dd96bf861a417e2e5b8d2a54041f38c5dac727899532877c2819c28777df1793d62a14feb04ada9991a957a27297938c062e0116fc3d1be3405a3640a8e5c9bbf64cc16efc8467d12dc81b70817be50f849b7842cc5b063b6a4f297f8c1d2979737a3eed8572b7fb8c44895a229faaf310fe313bda0622ae3e95999a28f490d2f86b0239197c0d569a046f9d3f530f4b04f2575712dc544173f0018f4e17e95f3be9efb2012ae972825cdbadc4ff52e97802223baf6f38ca17d3bcf89a6b45b1a31eb80957d801594e423ce36e4181a551b3caa31176749b069e23bd292ede758e9aced0a7cb7f28e6a6fde72b0b74640a24680034673e61cd2121769abf2aceb3b79e9636b58897d5fd7f490328da3e39aa0d7adde2db33be93119f19e24373de0ea6c3ebe43a8d512a54e32c99b8acd9a7e1f8b117394cec84e79d7ec4ee1096c48ba1af7e4a76884e5a397bc42429e105aac78e9661f898599ca009963c11343cb68557f5de09b3986542eaccd491a542ca5f339255c14a603bbf61a3e9696be45ddc5f4db3085257faa97b355a44b8376a77d34ea8749181f77e19ebea47fd9f8fb5ef057d15beacff325b21d32218b48db11bcb48bf4c3f954966ec045570953ba41711e0ce8074cfac966dea1c783e9252de4973009554008bf67352259c4312e92986630ab2573fea0a190b378952951ef3682d2fd882959f49af13d9e7fc662cf661539201c32d9fc644957ee424a7e08947613a468e9606a8101b9cfd5ecf873a941c2a57deef86464e9c6891dfb1ea90045ce8d4950d0753544f8bd4f06c8c9184deaed1d4c99048701fe3f6a8c617e2c6fa86e5e9bf470641a16401487204a342c9975aa0927399eecf1e22a5782f2e51f933132e17ca1394a7760a71295cb59ac2062135d88764969f7e7ea057533d32ab9e0b4bd425bafdc5604abb18f63310b07b62b618ad26e6a26eae95ce4ede1fbe095828c5d88644aac2901fd5a59fbe2f9f10bcb994006fb79fcdb057aa47974bf47ec1153d7c73f98aac1873d2a72396541cc5848442c4b53e824be068df6c0eb30e4ee45557c379458c001dbf2ac7e7f493e88285bb3bedc3133fe67cf4a86398b0ced5e8c049704bff8255ef7f3943cffaa19a866967f3feff5d63f419ae8cb7fec3434d9b753ba8ed9433bb267004a5d9c2365b61915aa157fc8b1fcc9c2f1c149e3e2b9d90ff2a83dc435a5cac398282458fe8bcee41011ccdeece620c46110ad6477f606962d686242c6ce84969cb408a28f2775feffdc0fbe118a8b457077fcdb0015dcb90963683bfdd5dac7ce374cb752707a602b9bbcdfb02ecc713eb46abfbc49d0222623cac8ffbdea15cb5fdccb496f2044adde47faffa5d3a9cbdd62928c2f042f669ae94519df2613019f37d29dd1020bc0b964f38ef21cb5408dc0486c1d961472652a37720f15376eaa9588d46bab330ba4fbae86734fcf3d6a97983acaa1ef9b1c0ff34922fb5ae6cc08b648aacbee76e6bdeade1b26f14c9dae9f2fde4e3a9b2836fd66c3a8d31f459fa561f6751544c0dc3ca17755c10d99acc6b48e85520e1c97af0e1cdfb74a36655f40f7b8e57cf8413d57ef2c495a2d3e6544f3b5530f8a1d840044930c6ab1adc9eb61baf80f444ca2ca442bf70468a493e1ef7839ebf6239d2e37e7ce6357bf6249330ceec8c018e92600b6417df772d4a8dfd5092d936e8fe8219314dc9bed0735cbb01697d5b97e7c53909138de642e9e2deee9d525eecaedd476ad38ee3adf63dbc0c633881c2ea98afab38eea6430d32274eebf5760edc57ea067ca4efde958f6e73a3c7200b464348450bf8803ec43800a8e7f989d75470c6bb1f28d6cc8dbd6e15c30b7262ba3860c484723377b8a48e27596b9988d4f351dc96439d236239370889db40077222b38f808da4d64f9b02422b5d34552f883a01941e795e820c9bbc276eaba504a7113093642b969c243e60d610b3ba8feeb176c12d81678cb7c6afade79384ea80c740714294d66402c2b8a2ff2cce8a29086fac9bcfab539f536966c3d5e55005800d18016a6f6f97ea3afb0bfbe0e92e7d8b4ba548b6144420e1bfa9d2e85ce11a02ac184f994e36eeafeeeafd8d2f1d6ebbcd0f6c3f48e725d0d3d5e963f65b3a934c2588677c225d001a6c9ab30f7f6239e874af312c7ab000e5b4045ccd9d089c9887b9c989479c0337432c385f3884fc6ccf107f1afabf24723bdc5276ea631d17e36e61f919803893b1c666ec49074357eb6281716447a24a288d433b13118931d870d86f64845bcf47fc177fd676431f0bf18d1e56a3d0c2d8708cb2c7598f721d446ba34511ed18043d0b83508d3f9262d0feedf3217571f6b2df45d1ca639b9957b6fa39af42d7e36f79f526a3ad3013125fee4063bc76da73b28291f95aa02544f8f6e1cf3e183f6bdbddf1c8bc86b924c36c95be3853bdcb68933fe97fded9605631d8950924f68dca9f94fd27b19dac820cf154f8e80be028824bb6503186a30836ad29780b49b07d5d1450991d475891b39fdfe13f0cfeac9710d7817041cb1102ddb454dd7abd0a0ec05dce5942dd938d07982175b32d1a00b06df73502229c0c7ce02fdfdd40236ac069bb1548117d0151e62031db143d9809ac5d6eb3874005f09d89c439a5dadca1f475da3af66842e0c42d7b55a78ffec203cb07ccdf6c34325a43eb37c484a00dcb7c235ac8331d48b431a1ace9f9812427749cb047eeb01123f5c9196f143e869887957919ca60f9b9dc4d22456fd3ca35c8b3f6f8b22e7da7d4f640fa6982be80b956e4b8703b983f299dfb4ceb101b55d236ef80ff18c4e6dd22a8b230999e5f7be7be7f617c50d35995660bc2f84c7096b669ecce545c3ec6a3ab909012e08430754f7794cc3bbeabccc847ea38654df14e46122e7d7c3a2430694b4596a86aae07156885e1989c9a38b20ae3b09e8cd870c9564b52278d840dc75cd0a58881598b1b4bba0dc1b3df90193d81ee45a2cafe01382270d635108c16d72bab157bee3f18970afc74b42ac7226534ac439d7be96da26311d0906a79af3cfc0026e1a46a8f0728f1eb1541bbb6a0c0742b9706f45c188461cbc820b50d3bf071849de56f1b5efa0491a09cd5625eeb7983717b96b0c5e05e50ab1b1e6bf0288aa2d84c9cfb87708eefe08b2f2658cf2415189c1b380bd815a330938cb19088c93689e765f329d436341b900c1209521d9b9b717c0601091ec1c7f84082a2fb22ba87d6426c3cef83d8e7a8594a0e867b1800e7f503da6085f3092f7dc01b894b3e4c812fe9da250d5adf5e4318efdc4c7e03b53c7d477b6ed16f33b14253eaa21f823d2601c3c2565142ba2b5d62ce0cc5797900265b4235afef7a07bb69b4ea2480e96c99f375f3b0e4eeac2c5754e31526f6a8d112eb02ce122e6dd5b955fdbd4261c791a0f571df0d0021a039761acda587753e75528838affa65151e2adc650dc052d5bed04c956dd8049a8bdacf009adbf8f787fd71cf08d6f345ea85dcc23836f801b15bc4976892bab2031e2d11115dd3c9da5d60f48949a385155f4394bf66816d5911cf288baaab2ac6dd962b0d79c0635d2e08a96857faa536e0065a05ba2533da84e22980199eb9dfd57adeda76effd5d24d9446bbf1106ac8e6f9e21e2a8a83023c59a2536363a388a6ade09e1542437dcaf7fdeee86a4f8e8f32bf6a5cb05fb115bc1db08a1347f8d9e317778e8cbfe3961ed87c254e8e52919081febb8750d1d0cf9839b524b466aee4a9e95f5269b1448a076e0388f7fe8fcf142474d3a53e40564895ec5a50980cc145f9dc28b387bab594b90159a9a80f6da9224672f2bd061a7324da4717d779658ab3aa3bb62a779fea87ecaa0434280b4f6c17f8255322db63bc41496172cc0525baef0608745daa177d9415ae7bf31fdb4e902e82d025a93872801a70fb8c35f3f2ccc49370dd356f661061e73ff480e95a74aca1512e023bbd77c8a473bf329a23915dea574290902d258f68d9966780a66559b52f2726490ac474420251582f2ea32371a51ad3e835b20ea9b0ff8910f4d51a85c74ab8e5ada9a3137340614c7c64ba3f27f10cd54530e63991a509bb1806d0bcb5086648b84f0c85abc84e7d894b35d6b52ca0a1009be1cd75e621fe8743ab6b3b6558e8886c3476824d11f56e846596b3c41768d418373b21a3f7c9dc24e5ef0207ce6be3c6298342732f5fe51ef6a91a4170cf5bb4665c82ca2153dc6c0148c5ae82b7c4b71fe398e02338228d01d9e61ac2dd6bd510efb382f2e0056f5560b5637cefb76170502b84a1372076a9100fc1c3b764b1a41d2a2f8710792c355d0b6a4f2f36526098b2e7b0383a0ae69de650cbaad121be874841c7d40f75f6f0ab618c6b1a5cb9dc8d0ed064d2c1eaf04b1cc2ca15a760e2d1dbfbbf1cd695c9af93f09bbff1f7e2128d60d5952d03c3e05d2ba8c76a702c90486a09fcc6b78a72db8320ba19aa3de34b82ecd9414f908b9476567abeb43c22855063d108af44f1bfba987ac5f00e02d53affca720e0f42bc699fb00a4ffa21d2809ebb18304d7909a44e1249275cb9e8f48f002996f29334e98dbee3699a42c2f80202c07436728db0de1108c51e5a822b89f49b0f7d893d2b9ec1571e3782dcc9ae018668c8ff804fcbac74cd369ddfc84ec46a4c6dbbe04b282944597418cf6ae2b8c84ed88464ede7449a80084e1728ed2bda4ba6ea6b0c9a14228df887cb89ea6450c4df3349e8686c6ad17557d41fb627549652d26760d10766875a329b57541b9cf90078d3e04ce3bc97891d0f2694840d00108aa9965c3a807f1da4896b9aca23c8192db875705659cc36116cc6c8980333b401bf2b632b3220afaba2cf091323e33d8242c9760f19e87262eb6c7fbf1708ceafea80efec424ce6f8a72c814b2f765f898067303db4a91f2cd2efcdac9b83acda3af28a18d3e75fb20f7e45de21d4e05808bb21e6aac71f81afdc7a4ad7c80f124755bee0202af8c89bb1bf137d6ddcd95db80ac5c39ea6e1137dbc725fe882f7dfe4a8e266d8aff0a53f31ad21b9d102098eceeb60806ff7d99e6072290b1b1c76f69744df363f194c98960889b41e18404ce9d498b15efe245e44a6f7ab0938639ff80a9a0f4546013811b9a05b3247199b2b0f9df33b002ba4a4ace6d7691aa88c4116eec3e92c321ad0f8d5e22784bd9c6ee57566e76c4bb472cd6c8e030589ca504f5cc28eb88553e62ff6c1f436ef01e2292376befaa7966a61f9299e50dac2ca0f3c8bf9c1fc5be2488b46436910b0d7d4be4942ab83ac67d266889cf5dd252c97735471a8861e9a5005928d33d42786d73dfde8425c2be713b723edbea01fdcec6dcc5b61bc241e8009e88542c61b5641b554983862dfff98efd364465a29f5ff1dc0bd98b9a9f507b3a27366922fc01d4e5828557abf1bbda698a9f9d0e43b2d913d042816ff44f18bc8472b0ee4eb96e5a2add7c78829d22fe807dfb9c18acef84a62ae13dd1326c98180fa4ee79ffce67ca35002a91607affe0f9065883a56612ae4f1b42a191a287f9da823eeecb858e1b31a9fd81328e6bf458f44987dd975ed43a45d59310346742ec49f3ea02df50067bf0f4c36167f2b84152aae88418a98518b51ea6d1424f3ce6f1292648035e8b937b82c1cb40d4eb2d3985c22f747584512325efcf84f211024a41e0e96bce1f6f3f60717a91b1a43db0976933e75f829952ca816f6e8cba251aa125d295cc21116f7639f27e97039252cff30b7da7ee0f1a28c0c9bd6d88d3087b980c3143089b5db46a3a2d55a9493fac</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Âä†ÂØÜ</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Roman to Integer</title>
    <url>/2020-01-29/Algorithm-Puzzles-Roman-to-Integer/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Roman to Integer</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:<br>Roman numerals are represented by seven different symbols: I, V, X, L, C, D and M.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Symbol       Value</span><br><span class="line">I             1</span><br><span class="line">V             5</span><br><span class="line">X             10</span><br><span class="line">L             50</span><br><span class="line">C             100</span><br><span class="line">D             500</span><br><span class="line">M             1000</span><br></pre></td></tr></table></figure>
<p>For example, two is written as II in Roman numeral, just two one‚Äôs added together. Twelve is written as, XII, which is simply X + II. The number twenty seven is written as XXVII, which is XX + V + II.</p>
<p>Roman numerals are usually written largest to smallest from left to right. However, the numeral for four is not IIII. Instead, the number four is written as IV. Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as IX. There are six instances where subtraction is used:</p>
<p>I can be placed before V (5) and X (10) to make 4 and 9.<br><br>X can be placed before L (50) and C (100) to make 40 and 90.<br><br>C can be placed before D (500) and M (1000) to make 400 and 900.<br><br>Given a roman numeral, convert it to an integer. Input is guaranteed to be within the range from 1 to 3999.<br></p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">romanToInt</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> iter = s.begin(); iter != s.end(); ++iter) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (*iter) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'I'</span>:</span><br><span class="line">                    <span class="keyword">if</span> (*(iter + <span class="number">1</span>) == <span class="string">'V'</span>) &#123;</span><br><span class="line">                        ret += <span class="number">4</span>;</span><br><span class="line">                        ++iter;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (*(iter + <span class="number">1</span>) == <span class="string">'X'</span>) &#123;</span><br><span class="line">                        ret += <span class="number">9</span>;</span><br><span class="line">                        ++iter;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        ret += <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">'V'</span>:</span><br><span class="line">                    ret += <span class="number">5</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">'X'</span>:</span><br><span class="line">                    <span class="keyword">if</span> (*(iter + <span class="number">1</span>) == <span class="string">'L'</span>) &#123;</span><br><span class="line">                        ret += <span class="number">40</span>;</span><br><span class="line">                        ++iter;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (*(iter + <span class="number">1</span>) == <span class="string">'C'</span>) &#123;</span><br><span class="line">                        ret += <span class="number">90</span>;</span><br><span class="line">                        ++iter;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        ret += <span class="number">10</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">'L'</span>:</span><br><span class="line">                    ret += <span class="number">50</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">'C'</span>:</span><br><span class="line">                    <span class="keyword">if</span> (*(iter + <span class="number">1</span>) == <span class="string">'D'</span>) &#123;</span><br><span class="line">                        ret += <span class="number">400</span>;</span><br><span class="line">                        ++iter;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (*(iter + <span class="number">1</span>) == <span class="string">'M'</span>) &#123;</span><br><span class="line">                        ret += <span class="number">900</span>;</span><br><span class="line">                        ++iter;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        ret += <span class="number">100</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">'D'</span>:</span><br><span class="line">                    ret += <span class="number">500</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">'M'</span>:</span><br><span class="line">                    ret += <span class="number">1000</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Result:</p>
<p>Runtime beats 98.55% in all cpp submissions:<br><img src="/2020-01-29/Algorithm-Puzzles-Roman-to-Integer/s1.png" alt></p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Integer to Roman</title>
    <url>/2020-01-27/Algorithm-Puzzles-Integer-to-Roman/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Integer to Roman</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Roman numerals are represented by seven different symbols: I, V, X, L, C, D and M.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Symbol       Value</span><br><span class="line">I             1</span><br><span class="line">V             5</span><br><span class="line">X             10</span><br><span class="line">L             50</span><br><span class="line">C             100</span><br><span class="line">D             500</span><br><span class="line">M             1000</span><br></pre></td></tr></table></figure>
<p>For example, two is written as II in Roman numeral, just two one‚Äôs added together. Twelve is written as, XII, which is simply X + II. The number twenty seven is written as XXVII, which is XX + V + II.</p>
<p>Roman numerals are usually written largest to smallest from left to right. However, the numeral for four is not IIII. Instead, the number four is written as IV. Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as IX. There are six instances where subtraction is used:</p>
<p>I can be placed before V (5) and X (10) to make 4 and 9.<br><br>X can be placed before L (50) and C (100) to make 40 and 90.<br><br>C can be placed before D (500) and M (1000) to make 400 and 900.<br><br>Given an integer, convert it to a roman numeral. Input is guaranteed to be within the range from 1 to 3999.<br></p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><h2 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution 1"></a>Solution 1</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">intToRoman</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">string</span> ret = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">int</span> bitRet = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">            bitRet = num / <span class="number">1000</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bitRet; ++i) &#123;</span><br><span class="line">                ret += <span class="string">"M"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            num %= <span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">            bitRet = num / <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">if</span> (bitRet == <span class="number">9</span>) &#123;</span><br><span class="line">                ret += <span class="string">"CM"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bitRet == <span class="number">4</span>) &#123;</span><br><span class="line">                ret += <span class="string">"CD"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (bitRet &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">                    ret += <span class="string">"D"</span>;</span><br><span class="line">                    bitRet -= <span class="number">5</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bitRet; ++i) &#123;</span><br><span class="line">                    ret += <span class="string">"C"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            num %= <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (num &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            bitRet = num / <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (bitRet == <span class="number">9</span>) &#123;</span><br><span class="line">                ret += <span class="string">"XC"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bitRet == <span class="number">4</span>) &#123;</span><br><span class="line">                ret += <span class="string">"XL"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (bitRet &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">                    ret += <span class="string">"L"</span>;</span><br><span class="line">                    bitRet -= <span class="number">5</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bitRet; ++i) &#123;</span><br><span class="line">                    ret += <span class="string">"X"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            num %= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            bitRet = num;</span><br><span class="line">            <span class="keyword">if</span> (bitRet == <span class="number">9</span>) &#123;</span><br><span class="line">                ret += <span class="string">"IX"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bitRet == <span class="number">4</span>) &#123;</span><br><span class="line">                ret += <span class="string">"IV"</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (bitRet &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">                    ret += <span class="string">"V"</span>;</span><br><span class="line">                    bitRet -= <span class="number">5</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bitRet; ++i) &#123;</span><br><span class="line">                    ret += <span class="string">"I"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020-01-27/Algorithm-Puzzles-Integer-to-Roman/s1.png" alt></p>
<h2 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution 2"></a>Solution 2</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">intToRoman</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> M[] = &#123;<span class="string">""</span>, <span class="string">"M"</span>, <span class="string">"MM"</span>, <span class="string">"MMM"</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> C[] = &#123;<span class="string">""</span>,  <span class="string">"C"</span>,  <span class="string">"CC"</span>,  <span class="string">"CCC"</span>,  <span class="string">"CD"</span>,</span><br><span class="line">                            <span class="string">"D"</span>, <span class="string">"DC"</span>, <span class="string">"DCC"</span>, <span class="string">"DCCC"</span>, <span class="string">"CM"</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> X[] = &#123;<span class="string">""</span>,  <span class="string">"X"</span>,  <span class="string">"XX"</span>,  <span class="string">"XXX"</span>,  <span class="string">"XL"</span>,</span><br><span class="line">                            <span class="string">"L"</span>, <span class="string">"LX"</span>, <span class="string">"LXX"</span>, <span class="string">"LXXX"</span>, <span class="string">"XC"</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> I[] = &#123;<span class="string">""</span>,  <span class="string">"I"</span>,  <span class="string">"II"</span>,  <span class="string">"III"</span>,  <span class="string">"IV"</span>,</span><br><span class="line">                            <span class="string">"V"</span>, <span class="string">"VI"</span>, <span class="string">"VII"</span>, <span class="string">"VIII"</span>, <span class="string">"IX"</span>&#125;;</span><br><span class="line">        <span class="keyword">return</span> M[num / <span class="number">1000</span>] + C[(num % <span class="number">1000</span>) / <span class="number">100</span>] + X[(num % <span class="number">100</span>) / <span class="number">10</span>] +</span><br><span class="line">               I[num % <span class="number">10</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020-01-27/Algorithm-Puzzles-Integer-to-Roman/s2.png" alt></p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Container With Most Water</title>
    <url>/2020-01-26/Algorithm-Puzzles-Container-With-Most-Water/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Container With Most Water</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Given n non-negative integers a1, a2, ‚Ä¶, an , where each represents a point at coordinate (i, ai). n vertical lines are drawn such that the two endpoints of line i is at (i, ai) and (i, 0). Find two lines, which together with x-axis forms a container, such that the container contains the most water.</p>
<p>Note: You may not slant the container and n is at least 2.</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>This puzzle can be easily solved by exhaustion method but time complexity is <strong>O(N^2)</strong>. A better approach will be using ‚Äúcompress window‚ÄúÔºö</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">size_t</span> length = height.size();</span><br><span class="line">        <span class="keyword">int</span> currentMax = <span class="number">0</span>, windowLeft = <span class="number">0</span>, windowRight = length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (windowLeft &lt; windowRight) &#123;</span><br><span class="line">            currentMax = <span class="built_in">std</span>::max(</span><br><span class="line">                currentMax, <span class="built_in">std</span>::min(height[windowLeft], height[windowRight]) *</span><br><span class="line">                                (windowRight - windowLeft));</span><br><span class="line">            <span class="keyword">if</span> (height[windowLeft] &lt; height[windowRight]) &#123;</span><br><span class="line">                ++windowLeft;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                --windowRight;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> currentMax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Here time complexity is <strong>O(N)</strong><br><img src="/2020-01-26/Algorithm-Puzzles-Container-With-Most-Water/s1.png" alt></p>
<p>Try to use iterator:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> currentMax = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">auto</span> iterL = height.cbegin();</span><br><span class="line">        <span class="keyword">auto</span> iterR = height.cend() - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (iterL &lt; iterR) &#123;</span><br><span class="line">            currentMax =</span><br><span class="line">                <span class="built_in">std</span>::max(currentMax, <span class="built_in">std</span>::min(*iterL, *iterR) *</span><br><span class="line">                                         (<span class="keyword">int</span>)<span class="built_in">std</span>::distance(iterL, iterR));</span><br><span class="line">            <span class="keyword">if</span> (*iterL &lt; *iterR) &#123;</span><br><span class="line">                ++iterL;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                --iterR;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> currentMax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/2020-01-26/Algorithm-Puzzles-Container-With-Most-Water/s2.png" alt></p>
<p>Bravo!</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Regular Expression Matching</title>
    <url>/2020-01-05/Algorithm-Puzzles-Regular-Expression-Matching/</url>
    <content><![CDATA[<p><del>ÊØèÂ§©</del> <del>ÊØèÂë®</del> ÂÅ∂Â∞î‰∏ÄÈÅìÁÆóÊ≥ïÈ¢òÔºö Ê≠£ÂàôË°®ËææÂºèÂåπÈÖç</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Given an input string (s) and a pattern (p), implement regular expression matching with support for ‚Äò.‚Äô and ‚Äò*‚Äô.</p>
<p>‚Äò.‚Äô Matches any single character.<br><br>‚Äò*‚Äô Matches zero or more of the preceding element.<br><br>The matching should cover the entire input string (not partial).</p>
<p>Note:</p>
<p>s could be empty and contains only lowercase letters a-z.<br><br>p could be empty and contains only lowercase letters a-z, and characters like . or *.</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>ÂÖ∂ÂÆû‰∏ÄÂºÄÂßãÊàëÊòØÊâìÁÆóÁî®c++Ëá™Â∏¶ÁöÑÊ≠£ÂàôË°®ËææÂºèÂ∫ìÁöÑÔºåÊï≤ÂÆå<code>#include &lt;regex&gt;</code>ÂêéËßâÂæóËøôÊ†∑‰∏çÂ§™Â•ΩÔºåÊØïÁ´üÊòØÂú®ÂÅöÁÆóÊ≥ïÈ¢ò</p>
<p><img src="/2020-01-05/Algorithm-Puzzles-Regular-Expression-Matching/Onn.png" alt></p>
<p>ÈÇ£Â∞±Êö¥ÂäõÊµÅÊù•‰∏ÄÊ≥¢ÔºÅÈ¶ñÂÖàËÄÉËôëÊ≤°ÊúâÈÄöÈÖçÁ¨¶ÁöÑÊÉÖÂÜµ‰∏ã, ÊØîËæÉÂÆå‰∏Ä‰ΩçÂÜçÊØîËæÉ‰∏ã‰∏Ä‰ΩçÔºåÂæàËá™ÁÑ∂Âú∞ÊÉ≥Âà∞ÈÄíÂΩíÔºö</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s, <span class="keyword">const</span> <span class="built_in">string</span>&amp; p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p.empty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> s.empty();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (s[<span class="number">0</span>] == p[<span class="number">0</span>]) &amp;&amp; isMatch(s.substr(<span class="number">1</span>), p.substr(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Âä†‰∏äÈÄöÈÖçÁ¨¶<strong>‚Äú.‚Äù</strong>ÁöÑÊÉÖÂÜµ‰πüÊØîËæÉÂÆπÊòìÔºåÂè™ÈúÄË¶ÅÊ£ÄÊü•‰∏Ä‰∏ãÂ≠óÁ¨¶‰∏≤Âú®ËØ•‰ΩçÊúâÂ≠óÁ¨¶Âç≥ÂèØÔºö</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s, <span class="keyword">const</span> <span class="built_in">string</span>&amp; p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p.empty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> s.empty();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">bool</span> currentMatch = (s[<span class="number">0</span>] == p[<span class="number">0</span>]) || (p[<span class="number">0</span>] == <span class="string">'.'</span> &amp;&amp; !s.empty());</span><br><span class="line">        <span class="keyword">return</span> currentMatch &amp;&amp; isMatch(s.substr(<span class="number">1</span>), p.substr(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ÂêéÊòØÈÄöÈÖçÁ¨¶<strong>‚Äú*‚Äú</strong>,Ëøô‰∏™ÊúâÁÇπÈ∫ªÁÉ¶ÈúÄË¶ÅÂéªÊêúÂ≠óÁ¨¶‰∏≤ÂêéÈù¢Âá†‰ΩçÔºåÂåπÈÖç0Ê¨°ÁöÑÊÉÖÂÜµÂç≥<code>return isMatch(s, p.substr(2))</code>ÔºåÁõ¥Êé•Ë∑≥ËøáÂΩìÂâçÂ≠óÁ¨¶ÂêéÂêéÈù¢ÁöÑ‚Äù*‚Äù, ÂåπÈÖç1Ê¨°ÁöÑÊÉÖÂÜµÂç≥<code>return (currentMatch &amp;&amp; isMatch(s.substr(1), p))</code>, ÊääÂæÖÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÂêéÁßª‰∏Ä‰ΩçÔºåÁÑ∂ÂêéÁªßÁª≠ÈÄíÂΩíÔºö</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s, <span class="keyword">const</span> <span class="built_in">string</span>&amp; p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p.empty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> s.empty();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">bool</span> currentMatch = (s[<span class="number">0</span>] == p[<span class="number">0</span>]) || (p[<span class="number">0</span>] == <span class="string">'.'</span> &amp;&amp; !s.empty());</span><br><span class="line">        <span class="keyword">if</span> (p[<span class="number">1</span>] == <span class="string">'*'</span> &amp;&amp; p.length() &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> isMatch(s, p.substr(<span class="number">2</span>)) ||</span><br><span class="line">                   (currentMatch &amp;&amp; isMatch(s.substr(<span class="number">1</span>), p));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> currentMatch &amp;&amp; isMatch(s.substr(<span class="number">1</span>), p.substr(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ËØï‰∫ÜÂá†‰∏™ÊµãËØï‰æãÔºåÊÑüËßâËøòË°åÂìà~~</p>
<p><img src="/2020-01-05/Algorithm-Puzzles-Regular-Expression-Matching/baoli.jpg" alt></p>
<p>ÁÑ∂ÂêéÊèê‰∫§ÂÆåÁªìÊûúÂá∫Êù•‰∫ÜÔºö</p>
<p><img src="/2020-01-05/Algorithm-Puzzles-Regular-Expression-Matching/s1.png" alt></p>
<p>ÁúãÊù•ÊàëËøòÊòØtoo naive‚Ä¶</p>
<p><img src="/2020-01-05/Algorithm-Puzzles-Regular-Expression-Matching/meijianguo.jpeg" alt></p>
<p>Áúã‰∫Ü‰∏ãÊèêÁ§∫ÔºåÂ§ßÊÑèÊòØÁî®Âä®ÊÄÅËßÑÂàíÔºåÂÖàÂÜôÁä∂ÊÄÅËΩ¨ÁßªÊñπÁ®ã:<br>ÂÆö‰πâdp[i][j] Âú® s[0,i-1]Âíåp[0,j-1]ÂåπÈÖçÊó∂‰∏∫Ê≠£ÔºåÂèç‰πã‰∏∫ÂÅá</p>
<ul>
<li>ÂΩìÊ≤°ÊúâÈÄöÈÖçÁ¨¶<strong>*</strong>Êó∂Ôºödp[i][j] = dp[i-1][j-1] &amp;&amp; (s[i-1] == p[j-1])</li>
<li>ÂΩìÊúâÈÄöÈÖçÁ¨¶<strong>*</strong>Êó∂:<ul>
<li>ÈáçÂ§ç0Ê¨°Ôºödp[i][j] = dp[i][j-2]</li>
<li>ÈáçÂ§ç1Ê¨°Ôºödp[i][j] = dp[i-1][j] &amp;&amp; (s[i-1] == p[j-2])</li>
</ul>
</li>
</ul>
<p>Ë¥¥‰∏Ä‰∏ã‰ª£Á†Å(ËøôÈáå‰ºòÂåñ‰∫Ü‰∏Ä‰∏ãÔºåÁÖßÁùÄ‰∏äÈù¢ÁöÑÂÜôÁ©∫Èó¥Â§çÊùÇÂ∫¶‰ºöÂà∞O(i*j), ‰∏ãÈù¢ÁöÑ‰∏∫O(N))</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s, <span class="keyword">const</span> <span class="built_in">string</span>&amp; p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = s.length(), n = p.length();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; dp(n + <span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="keyword">bool</span> pre = dp[<span class="number">0</span>];</span><br><span class="line">            dp[<span class="number">0</span>] = !i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="keyword">bool</span> temp = dp[j];</span><br><span class="line">                <span class="keyword">if</span> (p[j - <span class="number">1</span>] == <span class="string">'*'</span>) &#123;</span><br><span class="line">                    dp[j] = dp[j - <span class="number">2</span>] || (i &amp;&amp; dp[j] &amp;&amp; (s[i - <span class="number">1</span>] == p[j - <span class="number">2</span>] || p[j - <span class="number">2</span>] == <span class="string">'.'</span>));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    dp[j] = i &amp;&amp; pre &amp;&amp; (s[i - <span class="number">1</span>] == p[j - <span class="number">1</span>] || p[j - <span class="number">1</span>] == <span class="string">'.'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                pre = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020-01-05/Algorithm-Puzzles-Regular-Expression-Matching/s2.png" alt></p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto rtl8811 wifi adapter bring up</title>
    <url>/2019-12-21/Yocto-rtl8811-wifi-adapter-bring-up/</url>
    <content><![CDATA[<p>Brief notes about bring up rtl8811 and wlan0 on STM32MP1</p>
<a id="more"></a>

<h2 id="rtl8811-driver"><a href="#rtl8811-driver" class="headerlink" title="rtl8811 driver"></a>rtl8811 driver</h2><p>There is an open source driver on <a href="https://github.com/abperiasamy/rtl8812AU_8821AU_linux" target="_blank" rel="noopener">Github</a> and I have verified <em>4235b0ec7d7220a6364586d8e25b1e8cb99c36f1</em> works well on my ubuntu PC. But to make it work in yocto, we need a patch to its makefile since it‚Äôs not designed as a yocto kernel module:</p>
<p><em>0001-modify-makefile-to-support-yocto.patch</em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">From 0bc225d55b3e4e2269519b699f972401c227bc0c Mon Sep 17 00:00:00 2001</span><br><span class="line">From: &quot;Alex.Don.Scofield&quot; &lt;lizhiqin46783937@live.com&gt;</span><br><span class="line">Date: Sun, 15 Dec 2019 22:08:04 +0800</span><br><span class="line">Subject: [PATCH] modify makefile to support yocto</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"> Makefile | 9 +++++++--</span><br><span class="line"> 1 file changed, 7 insertions(+), 2 deletions(-)</span><br><span class="line"></span><br><span class="line">diff --git a&#x2F;Makefile b&#x2F;Makefile</span><br><span class="line">index dc027f3..8de8dfd 100644</span><br><span class="line">--- a&#x2F;Makefile</span><br><span class="line">+++ b&#x2F;Makefile</span><br><span class="line">@@ -893,10 +893,12 @@ ifndef KVER</span><br><span class="line"> KVER ?&#x3D; $(shell uname -r)</span><br><span class="line"> endif</span><br><span class="line"> ifndef KSRC</span><br><span class="line">-KSRC :&#x3D; &#x2F;lib&#x2F;modules&#x2F;$(KVER)&#x2F;build</span><br><span class="line">+# KSRC :&#x3D; &#x2F;lib&#x2F;modules&#x2F;$(KVER)&#x2F;build</span><br><span class="line">+KSRC :&#x3D; $(KERNEL_SRC)</span><br><span class="line"> endif</span><br><span class="line"> ifndef MODDESTDIR</span><br><span class="line">-MODDESTDIR :&#x3D; &#x2F;lib&#x2F;modules&#x2F;$(KVER)&#x2F;kernel&#x2F;drivers&#x2F;net&#x2F;wireless&#x2F;</span><br><span class="line">+# MODDESTDIR :&#x3D; &#x2F;lib&#x2F;modules&#x2F;$(KVER)&#x2F;kernel&#x2F;drivers&#x2F;net&#x2F;wireless&#x2F;</span><br><span class="line">+MODDESTDIR :&#x3D; $(O)</span><br><span class="line"> endif</span><br><span class="line"> INSTALL_PREFIX :&#x3D;</span><br><span class="line"> endif</span><br><span class="line">@@ -1621,6 +1623,9 @@ all: modules</span><br><span class="line"> modules:</span><br><span class="line"> 	$(MAKE) ARCH&#x3D;$(ARCH) CROSS_COMPILE&#x3D;$(CROSS_COMPILE) -C $(KSRC) M&#x3D;$(shell pwd)  modules</span><br><span class="line"> </span><br><span class="line">+modules_install:</span><br><span class="line">+	$(MAKE) ARCH&#x3D;$(ARCH) CROSS_COMPILE&#x3D;$(CROSS_COMPILE) -C $(KSRC) M&#x3D;$(shell pwd)  modules_install</span><br><span class="line">+</span><br><span class="line"> strip:</span><br><span class="line"> 	$(CROSS_COMPILE)strip $(MODULE_NAME).ko --strip-unneeded</span><br><span class="line"> </span><br><span class="line">-- </span><br><span class="line">2.17.1</span><br></pre></td></tr></table></figure>
<p>Then we create recipes for it(<em>kernel-module-rtl8812au_0.1.bb</em>):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMMARY &#x3D; &quot;Driver for rtl8811au&#x2F;8812au&#x2F;8821au&quot;</span><br><span class="line">LICENSE &#x3D; &quot;GPL-2.0&quot;</span><br><span class="line">PV &#x3D; &quot;0.1&quot;</span><br><span class="line">LIC_FILES_CHKSUM &#x3D; &quot;file:&#x2F;&#x2F;$&#123;COMMON_LICENSE_DIR&#125;&#x2F;GPL-2.0;md5&#x3D;801f80980d171dd6425610833a22dbe6&quot;</span><br><span class="line"></span><br><span class="line">inherit module</span><br><span class="line"></span><br><span class="line">$&#123;PN&#125;_REPO &#x3D; &quot;github.com&#x2F;abperiasamy&#x2F;rtl8812AU_8821AU_linux.git&quot;</span><br><span class="line">SRCREV_$&#123;PN&#125; &#x3D; &quot;4235b0ec7d7220a6364586d8e25b1e8cb99c36f1&quot;</span><br><span class="line"></span><br><span class="line">SRC_URI &#x3D; &quot; \</span><br><span class="line">  git:&#x2F;&#x2F;$&#123;$&#123;PN&#125;_REPO&#125;;name&#x3D;$&#123;PN&#125;;protocol&#x3D;https;nobranch&#x3D;1;destsuffix&#x3D;git&#x2F;$&#123;PN&#125; \</span><br><span class="line">  file:&#x2F;&#x2F;0001-modify-makefile-to-support-yocto.patch \</span><br><span class="line">  &quot;</span><br><span class="line"></span><br><span class="line">S &#x3D; &quot;$&#123;WORKDIR&#125;&#x2F;git&#x2F;$&#123;PN&#125;&quot;</span><br><span class="line"></span><br><span class="line">RPROVIDES_$&#123;PN&#125; +&#x3D; &quot;kernel-module-rtl8812au&quot;</span><br></pre></td></tr></table></figure>

<p>Add it to image recipe and flash built image into target, kernel module will be installed at <em>/lib/modules/${KERNEL_VERSION}/extra/rtl8812au.ko</em>. If it has been proper init, you can see those logs in <strong>dmesg</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[    8.321575] RTL871X: module init start</span><br><span class="line">[    8.354748] RTL871X: rtl8812au v4.3.14_13455.20150212_BTCOEX20150128-51</span><br><span class="line">[    8.359924] RTL871X: rtl8812au BT-Coex version &#x3D; BTCOEX20150128-51</span><br><span class="line">[    8.586779] RTL871X: rtw_ndev_init(wlan0)</span><br><span class="line">[    8.607811] usbcore: registered new interface driver rtl8812au</span><br><span class="line">[    8.612202] RTL871X: module init ret&#x3D;0</span><br></pre></td></tr></table></figure>
<h2 id="wpa-supplicant"><a href="#wpa-supplicant" class="headerlink" title="wpa-supplicant"></a>wpa-supplicant</h2><p>If we use <strong>wpa-supplicant</strong> to manage and config wifi, we need to have a <strong>*.network</strong> file under <strong>/lib/systemd/network/</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Match]</span><br><span class="line">Name&#x3D;wlan0</span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">DHCP&#x3D;ipv4</span><br></pre></td></tr></table></figure>

<p>and a we also need a config file for wpa-supplicant:</p>
<p><em>/etc/wpa_supplicant/wpa_supplicant-wlan0.conf</em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctrl_interface&#x3D;&#x2F;var&#x2F;run&#x2F;wpa_supplicant</span><br><span class="line">eapol_version&#x3D;1</span><br><span class="line">ap_scan&#x3D;1</span><br><span class="line">fast_reauth&#x3D;1</span><br><span class="line"></span><br><span class="line">network&#x3D;&#123;</span><br><span class="line">    ssid&#x3D;&quot;WIFI SSID&quot;</span><br><span class="line">    psk&#x3D;&quot;WIFI PASSWD&quot;</span><br><span class="line">    priority&#x3D;5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If we want wlan be ready after system booting, we need to append wpa-supplicant. Create <em>wpa-supplicant_%.bbappend</em>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FILESEXTRAPATHS_prepend :&#x3D; &quot;$&#123;THISDIR&#125;&#x2F;$&#123;PN&#125;:&quot;</span><br><span class="line"></span><br><span class="line">SRC_URI +&#x3D; &quot; \</span><br><span class="line">    file:&#x2F;&#x2F;51-wlan.network \</span><br><span class="line">    file:&#x2F;&#x2F;wpa_supplicant-wlan0.conf \</span><br><span class="line">    &quot;</span><br><span class="line">FILES_$&#123;PN&#125; +&#x3D; &quot; \</span><br><span class="line">    $&#123;systemd_unitdir&#125;&#x2F;network&#x2F;51-wlan.network \</span><br><span class="line">    $&#123;sysconfdir&#125;&#x2F;wpa_supplicant&#x2F;wpa_supplicant-wlan0.conf \</span><br><span class="line">&quot;</span><br><span class="line"></span><br><span class="line">SYSTEMD_AUTO_ENABLE &#x3D; &quot;enable&quot;</span><br><span class="line">SYSTEMD_SERVICE_$&#123;PN&#125;_append &#x3D; &quot; wpa_supplicant@wlan0.service&quot;</span><br><span class="line"></span><br><span class="line">do_install_append() &#123;</span><br><span class="line">    install -d $&#123;D&#125;$&#123;sysconfdir&#125;&#x2F;wpa_supplicant&#x2F;</span><br><span class="line">    install -m 0600 $&#123;WORKDIR&#125;&#x2F;wpa_supplicant-wlan0.conf $&#123;D&#125;$&#123;sysconfdir&#125;&#x2F;wpa_supplicant&#x2F;</span><br><span class="line"></span><br><span class="line">    if $&#123;@bb.utils.contains(&#39;DISTRO_FEATURES&#39;,&#39;systemd&#39;,&#39;true&#39;,&#39;false&#39;,d)&#125;; then</span><br><span class="line">        install -d $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;network&#x2F;</span><br><span class="line">        install -m 0644 $&#123;WORKDIR&#125;&#x2F;51-wlan.network $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;network&#x2F;</span><br><span class="line"></span><br><span class="line">        install -d $&#123;D&#125;$&#123;sysconfdir&#125;&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;</span><br><span class="line">        ln -s $&#123;systemd_unitdir&#125;&#x2F;system&#x2F;wpa_supplicant@.service \</span><br><span class="line">        $&#123;D&#125;$&#123;sysconfdir&#125;&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;wpa_supplicant@wlan0.service</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Under Maintenance</title>
    <url>/2019-12-13/Under-Maintenance/</url>
    <content><![CDATA[<p>Website is currently under maintenance since some new features I have enabled recently might cause some performance issues(i.e. loading too slow)‚Ä¶</p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux USB gadget configfs</title>
    <url>/2019-12-07/Linux-USB-gadget-configfs/</url>
    <content><![CDATA[<p>Using configs we can easily set up usb gadget in user space. You even can make your board as a compound USB device, just by few commands.</p>
<a id="more"></a>

<h2 id="Enable-and-mount-configfs"><a href="#Enable-and-mount-configfs" class="headerlink" title="Enable and mount configfs"></a>Enable and mount configfs</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">modprobe libcomposite</span><br><span class="line">mount -t configfs configfs /sys/kernel/config</span><br></pre></td></tr></table></figure>

<h2 id="Create-gadget-s"><a href="#Create-gadget-s" class="headerlink" title="Create gadget(s)"></a>Create gadget(s)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir /sys/kernel/config/usb_gadget/g1</span><br></pre></td></tr></table></figure>

<h2 id="Create-English-strings-and-write-to-common-attributes"><a href="#Create-English-strings-and-write-to-common-attributes" class="headerlink" title="Create English strings and write to common attributes"></a>Create English strings and write to common attributes</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p /sys/kernel/config/usb_gadget/g1/strings/0x409</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;SERIALNUMBER&#125;</span> &gt; /sys/kernel/config/usb_gadget/g1/strings/0x409/serialnumber</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;MANUFACTURER&#125;</span> &gt; /sys/kernel/config/usb_gadget/g1/strings/0x409/manufacturer</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;PRODUCT_NAME&#125;</span> &gt; /sys/kernel/config/usb_gadget/g1/strings/0x409/product</span><br></pre></td></tr></table></figure>
<h2 id="Create-gadget-configuration-s"><a href="#Create-gadget-configuration-s" class="headerlink" title="Create gadget configuration(s)"></a>Create gadget configuration(s)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p /sys/kernel/config/usb_gadget/g1/configs/c1</span><br><span class="line">mkdir -p /sys/kernel/config/usb_gadget/g1/configs/c1/strings/0x409</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Config 1: ADB"</span> &gt; /sys/kernel/config/usb_gadget/g1/configs/c1/strings/0x409/configuration</span><br><span class="line"><span class="built_in">echo</span> 250 &gt; /sys/kernel/config/usb_gadget/g1/configs/c1/MaxPower</span><br></pre></td></tr></table></figure>

<h2 id="Create-gadget-function-s"><a href="#Create-gadget-function-s" class="headerlink" title="Create gadget function(s)"></a>Create gadget function(s)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Here we use ffs adb as an example</span></span><br><span class="line">mkdir -p /sys/kernel/config/usb_gadget/g1/<span class="built_in">functions</span>/ffs.adb</span><br></pre></td></tr></table></figure>

<h2 id="Associate-gadget-functions-with-configuration-s"><a href="#Associate-gadget-functions-with-configuration-s" class="headerlink" title="Associate gadget functions with configuration(s)"></a>Associate gadget functions with configuration(s)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -s /sys/kernel/config/usb_gadget/g1/<span class="built_in">functions</span>/ffs.adb /sys/kernel/config/usb_gadget/g1/configs/c1</span><br></pre></td></tr></table></figure>

<h2 id="Extra-setup-for-gadget-functions"><a href="#Extra-setup-for-gadget-functions" class="headerlink" title="Extra setup for gadget functions"></a>Extra setup for gadget functions</h2><p>Sometime there is some steps need to be done before enabling gadget(i.e. ffs need to be mounted before active)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Create mount point for ffs and start adbd</span></span><br><span class="line">mkdir -p <span class="string">"<span class="variable">$&#123;mount_point&#125;</span>"</span></span><br><span class="line">mount -t functionfs adb <span class="string">"<span class="variable">$&#123;mount_point&#125;</span>"</span> -o uid=0,gid=0</span><br><span class="line">adbd &amp;</span><br></pre></td></tr></table></figure>
<p>If no extra step is needed, we can directly enable gadget</p>
<h2 id="Enable-the-gadget"><a href="#Enable-the-gadget" class="headerlink" title="Enable the gadget"></a>Enable the gadget</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Find the available udc</span></span><br><span class="line">udc=$(ls -1 /sys/class/udc/)</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$udc</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"No UDC driver registered"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;udc&#125;</span>"</span> &gt; /sys/kernel/config/usb_gadget/g1/UDC</span><br></pre></td></tr></table></figure>
<h2 id="Compound-USB-Device"><a href="#Compound-USB-Device" class="headerlink" title="Compound USB Device"></a>Compound USB Device</h2><p>To setup a compound USB device, we just need to create several gadget functions and binding them with configuration(s) before enabling the gadget</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto devtool</title>
    <url>/2019-11-30/Yocto-devtool/</url>
    <content><![CDATA[<p>I have got used to create patch and <strong>bbappend</strong> files manually, now I‚Äôm switching to use <strong>devtool</strong> - To be honest it‚Äôs quite easy to use.</p>
<a id="more"></a>

<h2 id="Export-source-code-to-external-patch"><a href="#Export-source-code-to-external-patch" class="headerlink" title="Export source code to external patch"></a>Export source code to external patch</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">devtool modify &lt;recipe_name&gt; &lt;dst_path_to_export&gt;</span><br></pre></td></tr></table></figure>
<p>Then we can do changes based on exported source code.</p>
<h2 id="Upgrade-changes-to-bbappend"><a href="#Upgrade-changes-to-bbappend" class="headerlink" title="Upgrade changes to bbappend"></a>Upgrade changes to bbappend</h2><p>When changes are verified and we need to add changes into bbapned file as a patch, just use git to commit changes, then:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">devtool update-recipe &lt;recipe_name&gt; -m patch -a &lt;dst_layer_path_to_generate_bbapned&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Exit-dev-mode"><a href="#Exit-dev-mode" class="headerlink" title="Exit dev mode"></a>Exit dev mode</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">devtool reset &lt;recipe_name&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: devtool will not delete exported source code.</p>
</blockquote>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32MP1 getting started: create machine</title>
    <url>/2019-11-30/STM32MP1-getting-started-create-machine/</url>
    <content><![CDATA[<p>Brief notes about how to create a customized machine based on STM32MP1.</p>
<a id="more"></a>

<h2 id="Device-tree"><a href="#Device-tree" class="headerlink" title="Device tree"></a>Device tree</h2><p>dts files should be created at the very beginning. There are 3 dts files need to implement:</p>
<ul>
<li>TF-A device tree</li>
<li>U-BOOT device tree</li>
<li>Kernel device tree</li>
</ul>
<h2 id="Machine-layer"><a href="#Machine-layer" class="headerlink" title="Machine layer"></a>Machine layer</h2><p>A custom layer can be created outside of <em>meta-st</em>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">‚îú‚îÄ‚îÄ conf</span><br><span class="line">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ eula</span><br><span class="line">‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ stm32mp1-cp</span><br><span class="line">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ layer.conf</span><br><span class="line">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ machine</span><br><span class="line">‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ stm32mp1-cp.conf</span><br><span class="line">‚îú‚îÄ‚îÄ COPYING.MIT</span><br><span class="line">‚îú‚îÄ‚îÄ README</span><br><span class="line">‚îú‚îÄ‚îÄ recipes-bsp</span><br><span class="line">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ trusted-firmware-a</span><br><span class="line">‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ tf-a-stm32mp</span><br><span class="line">‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ 0001-tf-a-alex.patch</span><br><span class="line">‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ tf-a-stm32mp_2.0.bbappend</span><br><span class="line">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ u-boot</span><br><span class="line">‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ u-boot-stm32mp</span><br><span class="line">‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ 0001-u-boot-alex.patch</span><br><span class="line">‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ u-boot-stm32mp_2018.11.bbappend</span><br><span class="line">‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ u-boot-stm32mp-extlinux</span><br><span class="line">‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ boot.scr.cmd</span><br><span class="line">‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ u-boot-stm32mp-extlinux.bb</span><br><span class="line">‚îî‚îÄ‚îÄ recipes-kernel</span><br><span class="line">    ‚îî‚îÄ‚îÄ linux</span><br><span class="line">        ‚îú‚îÄ‚îÄ linux-stm32mp</span><br><span class="line">        ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ stm32mp157a-cp.dts</span><br><span class="line">        ‚îî‚îÄ‚îÄ linux-stm32mp_%.bbappend</span><br></pre></td></tr></table></figure>
<p>Here I use patchs and <em>bbappend</em> to add dts files.</p>
<h2 id="Machine-conf"><a href="#Machine-conf" class="headerlink" title="Machine conf"></a>Machine conf</h2><p>Machine conf can be created based on <strong>stm32mp1-disco.conf</strong>. There are some variables are pre-defined in <strong>st-machine-common-stm32mp.inc</strong> which need to be override in your machine conf.</p>
<h2 id="U-Boot-extlinux"><a href="#U-Boot-extlinux" class="headerlink" title="U-Boot extlinux"></a>U-Boot extlinux</h2><p>There are some u-boot related env variables are set by <strong>UBOOT_EXTLINUX_</strong> started configs in machine conf. In ST U-Boot, there path of <strong>extlinux.conf</strong> are related to <strong>UBOOT_EXTLINUX_BOOTPREFIXES</strong>.</p>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Install JDK/JRE for Ubuntu</title>
    <url>/2019-11-16/Install-JDK-JRE-for-Ubuntu/</url>
    <content><![CDATA[<p>‚Ä¶</p>
<a id="more"></a>

<p>There are two versions of JDK/JRE can be installed on Ubuntu:</p>
<ul>
<li>Open JDK/JRE</li>
<li>Oracle JDK/JRE</li>
</ul>
<h2 id="Install-Open-JDK-JRE"><a href="#Install-Open-JDK-JRE" class="headerlink" title="Install Open JDK/JRE"></a>Install Open JDK/JRE</h2><p><strong>Open JDK/JRE</strong> can be easily installed by</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install default-jre</span><br><span class="line">sudo apt install default-jdk</span><br></pre></td></tr></table></figure>

<h2 id="Install-Oracle-standalone-JRE"><a href="#Install-Oracle-standalone-JRE" class="headerlink" title="Install Oracle standalone JRE"></a>Install Oracle standalone JRE</h2><ol>
<li>First of all download Oracle JRE from <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">Oracle</a></li>
<li>Unpack downloaded package and install it into the path you like(i.e <em>/usr/lib/java</em>) <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/lib/java</span><br><span class="line">sudo tar -zxvf ~/Downloads/jre-8u231-linux-x64.tar.gz</span><br></pre></td></tr></table></figure></li>
<li>Add JRE installation path into <strong>$PATH</strong> <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo nano /etc/environment</span><br></pre></td></tr></table></figure>
 Add <span style="color:red"><strong>:/usr/lib/java/jre1.8.0_231</strong></span> into <span style="color:red"><strong>PATH</strong></span></li>
<li>Add installed java as alternative <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/java java /usr/lib/java/jre1.8.0_231/bin/java 1</span><br></pre></td></tr></table></figure>
 To switch to other alternative java. use: <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo update-alternatives --config java</span><br></pre></td></tr></table></figure></li>
<li>Check installation <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -version</span><br><span class="line">java version <span class="string">"1.8.0_231"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_231-b11)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.231-b11, mixed mode)</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>STM32MP1 getting started: setup environments</title>
    <url>/2019-11-16/STM32MP1-getting-started-setup-environments/</url>
    <content><![CDATA[<p>I‚Äôm planing to do some research on ST newest MPU series: STM32MP1. It‚Äôs a Cortex A7(solo or dual core) + M4 solution, not very powerful but the price might be very competitive. In this post we will setup the development environments.</p>
<a id="more"></a>

<h2 id="Choose-the-suitable-base-software-package"><a href="#Choose-the-suitable-base-software-package" class="headerlink" title="Choose the suitable base software package"></a>Choose the suitable base software package</h2><p>There are 3 basic software packages provided by ST:</p>
<ul>
<li>Starter Package(For evaluation)</li>
<li>Developer Package(For limited modification and application development)</li>
<li>Distribution Package(For creating custom distribution)</li>
</ul>
<p>Similar with Qualcomm solutions, there are two packages are available for development purpose. In my scenario I will use Distribution Package for sure, so the following parts of this post is about how to setup environments for Developer Package based development.</p>
<p>BTW the experiences I got during Qualcomm apq8009 based SoC really sucks‚Ä¶ Their packages just like a huge shit mountain.</p>
<h2 id="Initialize-repo"><a href="#Initialize-repo" class="headerlink" title="Initialize repo"></a>Initialize repo</h2><p>If you are new to Yocto, you need to install some packages before start(i.e. <strong>repo</strong>)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir openstlinux-4.19-thud-mp1-19-10-09 &amp;&amp; <span class="built_in">cd</span> openstlinux-4.19-thud-mp1-19-10-09</span><br><span class="line">repo init -u https://github.com/STMicroelectronics/oe-manifest.git -b refs/tags/openstlinux-4.19-thud-mp1-19-10-09</span><br><span class="line">repo sync</span><br></pre></td></tr></table></figure>
<h2 id="Package-structure"><a href="#Package-structure" class="headerlink" title="Package structure"></a>Package structure</h2><p>From <a href="https://wiki.st.com/stm32mpu/wiki/STM32MP1_Distribution_Package" target="_blank" rel="noopener">ST WIKI</a>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">openstlinux-4.19-thud-mp1-19-10-09  OpenSTLinux distribution</span><br><span class="line">‚îú‚îÄ‚îÄ layers </span><br><span class="line">‚îÇ    ‚îú‚îÄ‚îÄ meta-openembedded                Collection of layers <span class="keyword">for</span> the OpenEmbedded-Core universe (OpenEmbedded standard)</span><br><span class="line">‚îÇ    ‚îú‚îÄ‚îÄ meta-qt5                         QT5 layer <span class="keyword">for</span> OpenEmbedded (standard)</span><br><span class="line">‚îÇ    ‚îú‚îÄ‚îÄ meta-st</span><br><span class="line">‚îÇ    ‚îÇ   ‚îú‚îÄ‚îÄ meta-st-openstlinux          STMicroelectronics layer that contains the frameworks and images settings <span class="keyword">for</span> the OpenSTLinux distribution</span><br><span class="line">‚îÇ    ‚îÇ   ‚îú‚îÄ‚îÄ meta-st-stm32mp              STMicroelectronics layer that contains the description of the BSP <span class="keyword">for</span> the STM32 MPU devices</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes-bsp</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alsa                 Recipes <span class="keyword">for</span> ALSA control configuration</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ drivers              Recipes <span class="keyword">for</span> Vivante GCNANO GPU kernel drivers</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trusted-firmware<span class="_">-a</span>   Recipes <span class="keyword">for</span> TF-A</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ u-boot               Recipes <span class="keyword">for</span> U-Boot</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes-extended</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ linux-examples       Recipes <span class="keyword">for</span> Linux examples <span class="keyword">for</span> STM32 MPU devices</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4coredump           Recipes <span class="keyword">for</span> script to manage coredump of cortexM4</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ m4projects           Recipes <span class="keyword">for</span> firmware examples <span class="keyword">for</span> Cortex M4</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes-graphics</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gcnano-userland      Recipes <span class="keyword">for</span> Vivante libraries OpenGL ES, OpenVG and EGL (multi backend)</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...]</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes-kernel</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ linux                Recipes <span class="keyword">for</span> Linux kernel</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ linux-firmware       Recipes <span class="keyword">for</span> Linux firmwares (example, Bluetooth firmware)</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes-security</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ optee                Recipes <span class="keyword">for</span> OPTEE</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes-st</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ images               Recipes <span class="keyword">for</span> the bootfs and userfs partitions binaries</span><br><span class="line">‚îÇ    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [...]</span><br><span class="line">‚îÇ    ‚îÇ   ‚îú‚îÄ‚îÄ meta-st-stm32mp-addons       STMicroelectronics layer that helps managing the STM32CubeMX integration</span><br><span class="line">‚îÇ    ‚îÇ   ‚îî‚îÄ‚îÄ scripts</span><br><span class="line">‚îÇ    ‚îÇ       ‚îú‚îÄ‚îÄ envsetup.sh              Environment setup script <span class="keyword">for</span> Distribution Package</span><br><span class="line">‚îÇ    ‚îÇ       ‚îî‚îÄ‚îÄ [...]</span><br><span class="line">‚îÇ    ‚îú‚îÄ‚îÄ meta-timesys                     Timesys layer <span class="keyword">for</span> OpenEmbedded (standard)</span><br><span class="line">‚îÇ    ‚îî‚îÄ‚îÄ openembedded-core                Core metadata <span class="keyword">for</span> current versions of OpenEmbedded (standard)</span><br></pre></td></tr></table></figure>

<h2 id="Test-building-image"><a href="#Test-building-image" class="headerlink" title="Test building image"></a>Test building image</h2><h3 id="Environment-setup"><a href="#Environment-setup" class="headerlink" title="Environment setup"></a>Environment setup</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DISTRO=openstlinux-weston MACHINE=stm32mp1 <span class="built_in">source</span> layers/meta-st/scripts/envsetup.sh</span><br></pre></td></tr></table></figure>
<p>If you want to test without wayland or x11 support, using <strong>DISTRO=openstlinux-eglfs MACHINE=st-image-core</strong> instead.</p>
<p>If build folder has been created, using blow command to re-use it:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> layers/meta-st/scripts/envsetup.sh build-openstlinuxweston-stm32mp1/</span><br></pre></td></tr></table></figure>
<h3 id="Trigger-building"><a href="#Trigger-building" class="headerlink" title="Trigger building"></a>Trigger building</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake st-image-weston</span><br></pre></td></tr></table></figure>
<p><strong>st-image-core</strong> is also available if you want to create a console only image.</p>
<h2 id="USB-Flash"><a href="#USB-Flash" class="headerlink" title="USB Flash"></a>USB Flash</h2><p>USB flash need to use <a href="https://my.st.com/content/my_st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-programmers/stm32cubeprog.html" target="_blank" rel="noopener">STM32CubeProgrammer</a>. Device need to switched as usb flash mode as well.</p>
<p>After installation, using <strong>STM32_Programmer_CLI</strong> to check if device can be detected:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo STM32_Programmer_CLI -l usb</span><br><span class="line">      -------------------------------------------------------------------</span><br><span class="line">                        STM32CubeProgrammer v2.2.1                  </span><br><span class="line">      -------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">=====  DFU Interface   =====</span><br><span class="line"></span><br><span class="line">Total number of available STM32 device <span class="keyword">in</span> DFU mode: 1</span><br><span class="line"></span><br><span class="line">  Device Index           : USB1</span><br><span class="line">  USB Bus Number         : 001</span><br><span class="line">  USB Address Number     : 004</span><br><span class="line">  Product ID             : DFU <span class="keyword">in</span> HS Mode @Device ID /0x500, @Revision ID /0x0000</span><br><span class="line">  Serial number          : 004800293338511139303435</span><br><span class="line">  Firmware version       : 0x0110</span><br><span class="line">  Device ID              : 0x0500</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Notice: You may need to create a soft link from <em>$HOME/STMicroelectronics/STM32Cube/STM32CubeProgrammer/bin/STM32_Programmer_CLI</em></p>
</blockquote>
<p>You also can add an udev rule to allow connection without su:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp <span class="variable">$HOME</span>/STMicroelectronics/STM32Cube/STM32CubeProgrammer/Drivers/rules/50-usb-conf.rules /etc/udev/rules.d/</span><br><span class="line">sudo service udev restart</span><br></pre></td></tr></table></figure>
<p>If device can be found in DFU mode, using blow cmd to trigger usb flash:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">STM32_Programmer_CLI -c port=usb1 -w flashlayout_st-image-weston/FlashLayout_xxxxxx.tsv</span><br></pre></td></tr></table></figure>
<p>STM32CubeProgrammer using a <code>.tsv</code> file to specify flash layout and the binaries are going to use.</p>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome: ERR_NETWORK_CHANGED on Ubuntu</title>
    <url>/2019-11-14/Chrome-ERR-NETWORK-CHANGED-on-Ubuntu/</url>
    <content><![CDATA[<p>In my scenario it was caused by some docker containers - All of them have booting issues but they have been set as <strong>‚Äìrestart=always</strong>, which caused they start to create js requests periodicity. Everything is ok after removing those docker containers.</p>
]]></content>
      <categories>
        <category>ÈóÆÈ¢òËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>vscode settings for zephyr</title>
    <url>/2019-11-10/vscode-settings-for-zephyr/</url>
    <content><![CDATA[<p>This is an example <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">vscode</a> settings to provide supports for <a href="https://zephyrproject.org/" target="_blank" rel="noopener">zephyr</a> based projects build/debug:</p>
<p><a href="https://github.com/codingspirit/vscode-zephyr" target="_blank" rel="noopener">vscode-zepjyr</a></p>
<p>I‚Äôm not planing to discuss details about those json files here since I know you lazy guys just want to know how to use it(Or maybe I‚Äôm too lazy to write those details down, who knows).</p>
<a id="more"></a>

<h2 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h2><ul>
<li>Copy this <em>.vscode</em> folder into your project root folder.</li>
<li>Modify the environment variables at the end of <em>task.json</em> and <em>launch.json</em> base on your own settings:<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">//task.json</span></span><br><span class="line">"options": &#123;</span><br><span class="line">    "env": &#123;</span><br><span class="line">        "ZEPHYR_TOOLCHAIN_VARIANT": "zephyr",</span><br><span class="line">        "ZEPHYR_SDK_INSTALL_DIR": "/home/alex/zephyr-sdk-0.10.3",</span><br><span class="line">        "ZEPHYR_BASE": "$&#123;workspaceFolder&#125;/zephyrproject/zephyr",</span><br><span class="line">        "VS_CODE_BOARD_TO_BUILD": "reel_board",</span><br><span class="line">        "VS_CODE_ZEPHYR_BIN_NAME": "zephyr.elf",</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">    <span class="comment">//launch.json</span></span><br><span class="line">            "miDebuggerPath": "/home/alex/zephyr-sdk-0.10.3/arm-zephyr-eabi/bin/arm-zephyr-eabi-gdb"</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Press <strong>Ctrl+Shit+B</strong> to trigger build task(You also can run task ‚Äú<strong>zephyr build ninja</strong>‚Äú alternatively if you want to use <strong>ninja</strong> to build).</li>
<li>Press the holy <strong>F5</strong> button(which is on the right side of the <strong>F4</strong> button) to start debugging.</li>
<li>An selecting list will jump out when terminated debug process, don‚Äôt forget to select it.</li>
</ul>
<h2 id="Known-issues"><a href="#Known-issues" class="headerlink" title="Known issues"></a>Known issues</h2><ul>
<li><p>An exception will occur when stop at <strong>main()</strong>. Not sure where the root cause is, but debug process still can proceed, just ignore it.</p>
</li>
<li><p>Breakpoints can‚Äôt be added into some lines but you can run code step by step to those lines. Disable zephyr build optimization doesn‚Äôt help on this, it might related to zephyr toolchain.</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Palindrome Number</title>
    <url>/2019-10-26/Algorithm-Puzzles-Palindrome-Number/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Palindrome Number</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Determine whether an integer is a palindrome. An integer is a palindrome when it reads the same backward as forward.</p>
<p>Example 1:</p>
<p>Input: 121<br>Output: true<br>Example 2:</p>
<p>Input: -121<br>Output: false<br>Explanation: From left to right, it reads -121. From right to left, it becomes 121-. Therefore it is not a palindrome.<br>Example 3:</p>
<p>Input: 10<br>Output: false<br>Explanation: Reads 01 from right to left. Therefore it is not a palindrome.</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><h3 id="First-came-out-solution"><a href="#First-came-out-solution" class="headerlink" title="First came out solution"></a>First came out solution</h3><p>My first came out solution is using string:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">stringstream</span> stream;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line">        stream &lt;&lt; x;</span><br><span class="line">        stream &gt;&gt; str;</span><br><span class="line">        <span class="keyword">size_t</span> length = str.length();</span><br><span class="line">        <span class="keyword">auto</span> iterHead = str.cbegin();</span><br><span class="line">        <span class="keyword">auto</span> iterTail = str.cend() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; length; i+=<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(*iterHead == *iterTail)&#123;</span><br><span class="line">                ++iterHead;</span><br><span class="line">                --iterTail;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>I know it‚Äôs not the best solution at very beginning, but it still surprised me when submitted:</p>
<p><img src="/2019-10-26/Algorithm-Puzzles-Palindrome-Number/s1.png" alt></p>
<h3 id="Another-approach"><a href="#Another-approach" class="headerlink" title="Another approach"></a>Another approach</h3><p>Since the performance of transferring to string is so bad, I‚Äôd like to try to handle it in integer only.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> reverted = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (x &gt; reverted) &#123;</span><br><span class="line">            reverted = reverted * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (x == reverted) || (x == reverted / <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/2019-10-26/Algorithm-Puzzles-Palindrome-Number/s2.png" alt></p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Setting up Gitlab CI (II): pipeline and .gitlab-ci.yml</title>
    <url>/2019-10-19/Setting-up-Gitlab-CI-II-pipeline-and-gitlab-ci-yml/</url>
    <content><![CDATA[<p>A brief introduction about how to setup Gitlab CI (part II).</p>
<a id="more"></a>

<p>In <a href="https://lzqblog.top/2019-09-28/Setting-up-Gitlab-CI-I-docker-gitlab-runner/">Setting up Gitlab CI (I): docker+gitlab-runner</a> we already created a docker image for gitlab-runner, which will be our CI environment. Next step is define the behaviors of your CI processes.</p>
<h2 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a>Pipeline</h2><p><a href="https://docs.gitlab.com/ee/ci/pipelines.html" target="_blank" rel="noopener">Creating and using CI/CD pipelines</a>:</p>
<blockquote>
<p> Pipelines are the top-level component of continuous integration, delivery, and deployment.</p>
</blockquote>
<p>If <strong>.gitlab-ci.yml</strong> has been set up correctly, you could see pipeline flow under <em>CI/CD-&gt;Pipelines</em>. </p>
<h2 id="gitlab-ci-yml"><a href="#gitlab-ci-yml" class="headerlink" title=".gitlab-ci.yml"></a>.gitlab-ci.yml</h2><p>If CI was enabled in your gitlab projects, gitlab-runner will try to find a file named <strong>.gitlab-ci.yml</strong> in your repository root. This file will tell gitlab-runner what should be done during CI process. </p>
<h3 id="image-variables"><a href="#image-variables" class="headerlink" title="image, variables"></a>image, variables</h3><p>You need to specify the docker image and environment variables gitlab-runner are going to use at very beginning:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">localhost:5000/$&#123;name_of_your_image&#125;</span></span><br><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">SDK_VERSION:</span> <span class="number">1.2</span><span class="number">.3</span></span><br></pre></td></tr></table></figure>
<p>In our case we use the image from local docker hub.</p>
<h3 id="stages-jobs-and-script"><a href="#stages-jobs-and-script" class="headerlink" title="stages, jobs and script"></a>stages, jobs and script</h3><p>In normal cases, our pipeline should have 3 stages roughly:</p>
<ul>
<li>build</li>
<li>test</li>
<li>deploy</li>
</ul>
<p>Stages can be split into several jobs like:</p>
<ul>
<li>code/commit style check</li>
<li>downloading build dependencies</li>
<li>build code</li>
<li>run unit test</li>
<li>run integration testing</li>
<li>deploy</li>
</ul>
<p>In <strong>.gitlab-ci.yml</strong>, job can be defined as:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">job_name:</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">test</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">uname</span> <span class="string">-a</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">"hello"</span></span><br></pre></td></tr></table></figure>
<p><strong>script</strong> defines shell scripts which will be executed by gitlab-runner.</p>
<p>Each job must have a unique name, but there are some reserved keywords can‚Äôt be used as job name:</p>
<ul>
<li>image</li>
<li>services</li>
<li>stages</li>
<li>types</li>
<li>before_script</li>
<li>after_script</li>
<li>variables</li>
<li>cache</li>
</ul>
<p>Job name also can start with a dot(<strong>.</strong>) like <em>.job</em>. If a job name started with a dot, it will be ignored by gitlab CI(gitlab-runner will skip it).</p>
<h3 id="More"><a href="#More" class="headerlink" title="More"></a>More</h3><p>There are a lot of features can be defined in <strong>.gitlab-ci.yml</strong>. Go to <a href="https://docs.gitlab.com/ee/ci/yaml/README.html" target="_blank" rel="noopener">GitLab CI/CD Pipeline Configuration Reference</a> for more details.</p>
]]></content>
      <categories>
        <category>CI</category>
      </categories>
      <tags>
        <tag>Continuous integration</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: String to Integer (atoi)</title>
    <url>/2019-10-13/Algorithm-Puzzles-String-to-Integer-atoi/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: String to Integer (atoi)</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Implement atoi which converts a string to an integer.</p>
<p>The function first discards as many whitespace characters as necessary until the first non-whitespace character is found. Then, starting from this character, takes an optional initial plus or minus sign followed by as many numerical digits as possible, and interprets them as a numerical value.</p>
<p>The string can contain additional characters after those that form the integral number, which are ignored and have no effect on the behavior of this function.</p>
<p>If the first sequence of non-whitespace characters in str is not a valid integral number, or if no such sequence exists because either str is empty or it contains only whitespace characters, no conversion is performed.</p>
<p>If no valid conversion could be performed, a zero value is returned.</p>
<p>Note:</p>
<p>Only the space character ‚Äò ‚Äò is considered as whitespace character.<br>Assume we are dealing with an environment which could only store integers within the 32-bit signed integer range: [‚àí231,  231 ‚àí 1]. If the numerical value is out of the range of representable values, INT_MAX (231 ‚àí 1) or INT_MIN (‚àí231) is returned.<br>Example 1:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: &quot;42&quot;</span><br><span class="line">Output: 42</span><br></pre></td></tr></table></figure>
<p>Example 2:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: &quot;   -42&quot;</span><br><span class="line">Output: -42</span><br><span class="line">Explanation: The first non-whitespace character is &#39;-&#39;, which is the minus sign.</span><br><span class="line">             Then take as many numerical digits as possible, which gets 42.</span><br></pre></td></tr></table></figure>
<p>Example 3:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: &quot;4193 with words&quot;</span><br><span class="line">Output: 4193</span><br><span class="line">Explanation: Conversion stops at digit &#39;3&#39; as the next character is not a numerical digit.</span><br></pre></td></tr></table></figure>
<p>Example 4:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: &quot;words and 987&quot;</span><br><span class="line">Output: 0</span><br><span class="line">Explanation: The first non-whitespace character is &#39;w&#39;, which is not a numerical </span><br><span class="line">             digit or a +&#x2F;- sign. Therefore no valid conversion could be performed.</span><br></pre></td></tr></table></figure>
<p>Example 5:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: &quot;-91283472332&quot;</span><br><span class="line">Output: -2147483648</span><br><span class="line">Explanation: The number &quot;-91283472332&quot; is out of the range of a 32-bit signed integer.</span><br><span class="line">             Thefore INT_MIN (‚àí231) is returned.</span><br></pre></td></tr></table></figure>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>My first solution is using regex to filtrate incorrect inputs and find out the numerical:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> intMin = <span class="number">-2147483648</span>;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> intMax = <span class="number">2147483647</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">std</span>::regex_match(str, <span class="built_in">std</span>::regex(<span class="string">"[ ]*[-+]?\\d&#123;1,&#125;[\\s\\S]*"</span>))) &#123;</span><br><span class="line">            <span class="built_in">std</span>::smatch numMatch;</span><br><span class="line">            <span class="built_in">std</span>::regex_search(str, numMatch, <span class="built_in">std</span>::regex(<span class="string">"[-+]?\\d&#123;1,&#125;"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>, res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> negative = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (numMatch[<span class="number">0</span>].str()[<span class="number">0</span>] == <span class="string">'-'</span>) &#123;</span><br><span class="line">                negative = <span class="number">-1</span>;</span><br><span class="line">                index = <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (numMatch[<span class="number">0</span>].str()[<span class="number">0</span>] == <span class="string">'+'</span>) &#123;</span><br><span class="line">                index = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (; index &lt; numMatch[<span class="number">0</span>].str().length(); ++index) &#123;</span><br><span class="line">                <span class="keyword">if</span> (res &gt; <span class="number">214748364</span> ||</span><br><span class="line">                    (res == <span class="number">214748364</span> &amp;&amp; numMatch[<span class="number">0</span>].str()[index] - <span class="string">'0'</span> &gt; <span class="number">7</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> negative == <span class="number">-1</span> ? intMin : intMax;</span><br><span class="line">                &#125;</span><br><span class="line">                res = res * <span class="number">10</span> + (numMatch[<span class="number">0</span>].str()[index] - <span class="string">'0'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> res * negative;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Then :</p>
<p><img src="/2019-10-13/Algorithm-Puzzles-String-to-Integer-atoi/s1.png" alt></p>
<p><img src="/2019-10-13/Algorithm-Puzzles-String-to-Integer-atoi/p1.jpeg" alt></p>
<p>I realized that maybe using regex is not a good idea since there is no need to traversal string more than once‚Ä¶ After some modification, here is my solution 2:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> intMin = <span class="number">-2147483648</span>;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> intMax = <span class="number">2147483647</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">size_t</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">size_t</span> length = str.length();</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">bool</span> negative = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        index = str.find_first_not_of(<span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (index == <span class="built_in">std</span>::<span class="built_in">string</span>::npos) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (str[index] &lt; <span class="string">'0'</span> || str[index] &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[index] == <span class="string">'-'</span>) &#123;</span><br><span class="line">                negative = <span class="literal">true</span>;</span><br><span class="line">                ++index;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str[index] == <span class="string">'+'</span>) &#123;</span><br><span class="line">                ++index;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (; index &lt; length; ++index) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[index] &lt; <span class="string">'0'</span> || str[index] &gt; <span class="string">'9'</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (res &gt; <span class="number">214748364</span> ||</span><br><span class="line">                (res == <span class="number">214748364</span> &amp;&amp; (str[index] - <span class="string">'0'</span> &gt; <span class="number">7</span>))) &#123;</span><br><span class="line">                <span class="keyword">return</span> negative ? intMin : intMax;</span><br><span class="line">            &#125;</span><br><span class="line">            res = res * <span class="number">10</span> + (str[index] - <span class="string">'0'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> negative ? -res : res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result I got:</p>
<p><img src="/2019-10-13/Algorithm-Puzzles-String-to-Integer-atoi/s2.png" alt></p>
<p>0 ms and better than 100%‚Ä¶</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Reverse Integer</title>
    <url>/2019-10-05/Algorithm-Puzzles-Reverse-Integer/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Reverse Integer</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Given a 32-bit signed integer, reverse digits of an integer.</p>
<p>Example 1:</p>
<p>Input: 123<br>Output: 321<br>Example 2:</p>
<p>Input: -123<br>Output: -321<br>Example 3:</p>
<p>Input: 120<br>Output: 21</p>
<p>Note:<br>Assume we are dealing with an environment which could only store integers within the 32-bit signed integer range: [‚àí231,  231 ‚àí 1]. For the purpose of this problem, assume that your function returns 0 when the reversed integer overflows.</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>This puzzle is ez to solve if you considered possible overflow at the very beginning. I‚Äôd like to using string to do reverse process, which should be no overflow during reverse, after reversing then do overflow check. Considering that the range of int32_t is <em>[-2147483648, 2147483647]</em>, we need to check the value after reversing is in this range or not.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int32_t</span> reverse(<span class="keyword">int32_t</span> x)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> ori = <span class="built_in">std</span>::to_string(x);</span><br><span class="line">        <span class="keyword">if</span> (ori[<span class="number">0</span>] == <span class="string">'-'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">std</span>::reverse(++<span class="built_in">std</span>::begin(ori), <span class="built_in">std</span>::end(ori));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">std</span>::reverse(<span class="built_in">std</span>::begin(ori), <span class="built_in">std</span>::end(ori));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ori.length() == <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ori[<span class="number">0</span>] &gt; <span class="string">'2'</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (ori[<span class="number">0</span>] == <span class="string">'2'</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (atoi(ori.substr(<span class="number">1</span>, <span class="number">9</span>).c_str()) &gt; <span class="number">147483647</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ori.length() == <span class="number">11</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ori[<span class="number">1</span>] &gt; <span class="string">'2'</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (ori[<span class="number">1</span>] == <span class="string">'2'</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (atoi(ori.substr(<span class="number">2</span>, <span class="number">9</span>).c_str()) &gt; <span class="number">147483648</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> atoi(ori.c_str());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result I got:</p>
<p><img src="/2019-10-05/Algorithm-Puzzles-Reverse-Integer/s1.png" alt></p>
<p>One shot pass~~</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Setting up Gitlab CI (I): docker+gitlab-runner</title>
    <url>/2019-09-28/Setting-up-Gitlab-CI-I-docker-gitlab-runner/</url>
    <content><![CDATA[<p>A brief introduction about how to setup Gitlab CI (part I).</p>
<a id="more"></a>

<p>If you are new to docker, this post might help: <a href="https://lzqblog.top/2018-01-09/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Click this</a></p>
<h2 id="Install-and-setup-gitlab-runner"><a href="#Install-and-setup-gitlab-runner" class="headerlink" title="Install and setup gitlab runner"></a>Install and setup gitlab runner</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Install gitlab runner docker image</span></span><br><span class="line">docker run -d --name gitlab-runner --restart always \</span><br><span class="line">  -v /srv/gitlab-runner/config:/etc/gitlab-runner \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  gitlab/gitlab-runner:latest</span><br><span class="line"><span class="comment"># Config and register runner</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="variable">$&#123;container_id_of_gitlab-runner&#125;</span> gitlab-runner register</span><br></pre></td></tr></table></figure>

<p>If you have installed gitlab-runner binary, you also can do register by one single command:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gitlab-runner register \</span><br><span class="line">  --non-interactive \</span><br><span class="line">  --url <span class="string">"https://gitlab.com/"</span> \</span><br><span class="line">  --registration-token <span class="string">"PROJECT_REGISTRATION_TOKEN"</span> \</span><br><span class="line">  --executor <span class="string">"docker"</span> \</span><br><span class="line">  --docker-image alpine:latest \</span><br><span class="line">  --description <span class="string">"description_of_runner"</span> \</span><br><span class="line">  --tag-list <span class="string">"docker,aws"</span> \</span><br><span class="line">  --run-untagged=<span class="string">"true"</span> \</span><br><span class="line">  --locked=<span class="string">"false"</span> \</span><br><span class="line">  --access-level=<span class="string">"not_protected"</span></span><br></pre></td></tr></table></figure>

<h2 id="Prepare-your-docker-image-as-CI-environment"><a href="#Prepare-your-docker-image-as-CI-environment" class="headerlink" title="Prepare your docker image as CI environment"></a>Prepare your docker image as CI environment</h2><p>Docker images can be built from a local <strong>Dockerfile</strong>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t <span class="variable">$&#123;image_name&#125;</span>:<span class="variable">$&#123;version_number&#125;</span> .</span><br></pre></td></tr></table></figure>
<p>There is a ‚Äú.‚Äù at the end, don‚Äôt forget it.</p>
<h2 id="Create-local-docker-hub"><a href="#Create-local-docker-hub" class="headerlink" title="Create local docker hub"></a>Create local docker hub</h2><p>Normally you can deploy your image to dockerhub.com. But if you don‚Äôt want to open your images to public, you also can create a local docker hub instead:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 5000:5000 --restart=always --name registry registry:2</span><br><span class="line">docker tag <span class="variable">$&#123;image_name&#125;</span>:<span class="variable">$&#123;image_tag&#125;</span> localhost:5000/<span class="variable">$&#123;image_name&#125;</span></span><br><span class="line">docker push localhost:5000/<span class="variable">$&#123;image_name&#125;</span></span><br></pre></td></tr></table></figure>
<p>After that gitlab-runner can ‚Äúdownload‚Äù your images from <em>localhost:5000/${image_name}</em>. </p>
<p>You also can do a quick check if your image repo exist or not by accessing catalog:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl http://localhost:5000/v2/_catalog</span><br></pre></td></tr></table></figure>

<p>To be continued‚Ä¶</p>
]]></content>
      <categories>
        <category>CI</category>
      </categories>
      <tags>
        <tag>Continuous integration</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: ZigZag Conversion</title>
    <url>/2019-09-28/Algorithm-Puzzles-ZigZag-Conversion/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: ZigZag Conversion</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>The string ‚ÄúPAYPALISHIRING‚Äù is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">P   A   H   N</span><br><span class="line">A P L S I I G</span><br><span class="line">Y   I   R</span><br></pre></td></tr></table></figure>
<p>And then read line by line: ‚ÄúPAHNAPLSIIGYIR‚Äù</p>
<p>Write the code that will take a string and make this conversion given a number of rows:</p>
<p>string convert(string s, int numRows);<br>Example 1:</p>
<p>Input: s = ‚ÄúPAYPALISHIRING‚Äù, numRows = 3<br>Output: ‚ÄúPAHNAPLSIIGYIR‚Äù<br>Example 2:</p>
<p>Input: s = ‚ÄúPAYPALISHIRING‚Äù, numRows = 4<br>Output: ‚ÄúPINALSIGYAHRPI‚Äù<br>Explanation:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">P     I    N</span><br><span class="line">A   L S  I G</span><br><span class="line">Y A   H R</span><br><span class="line">P     I</span><br></pre></td></tr></table></figure>

<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><h3 id="First-came-out-solution"><a href="#First-came-out-solution" class="headerlink" title="First came out solution"></a>First came out solution</h3><table>
<thead>
<tr>
<th align="center">0</th>
<th align="center"></th>
<th align="center"></th>
<th align="center">6</th>
<th align="center"></th>
<th align="center"></th>
<th align="center">12</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center"></td>
<td align="center">5</td>
<td align="center">7</td>
<td align="center"></td>
<td align="center">11</td>
<td align="center">13</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">4</td>
<td align="center"></td>
<td align="center">8</td>
<td align="center">10</td>
<td align="center"></td>
<td align="center">14</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">9</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">15</td>
</tr>
</tbody></table>
<p>It‚Äôs obvious that the output is periodic for first row:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 &#x3D; 2 * (numRows - 1) * 0</span><br><span class="line">6 &#x3D; 2 * (numRows - 1) * 1</span><br><span class="line">12 &#x3D; 2 * (numRows - 1) * 2</span><br></pre></td></tr></table></figure>

<p>Let <span style="color:red"><em>T = 2 * (numRows - 1)</em></span>, for next row(row[1]):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1 &#x3D; T * 0 + 1 </span><br><span class="line">5 &#x3D; T * 1 - 1</span><br><span class="line">7 &#x3D; T * 1 + 1</span><br><span class="line">11 &#x3D; T * 2 - 1</span><br><span class="line">13 &#x3D; T * 2 + 1</span><br></pre></td></tr></table></figure>

<p>For row[2]:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2 &#x3D; T * 0 + 2</span><br><span class="line">4 &#x3D; T * 1 - 2</span><br><span class="line">8 &#x3D; T * 1 + 2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>Change 1,2 to <em>rowIndex</em> which start from <em>0</em> to <em>numRows - 1</em> :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 &#x3D; T * 0 + rowIndex (rowIndex &#x3D; 0)</span><br><span class="line">1 &#x3D; T * 0 + rowIndex (rowIndex &#x3D; 1)</span><br><span class="line">2 &#x3D; T * 0 + rowIndex (rowIndex &#x3D; 2)</span><br></pre></td></tr></table></figure>


<p>Cool, can start coding now</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">convert</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (numRows == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> res;</span><br><span class="line">        <span class="keyword">size_t</span> maxLength = s.size();</span><br><span class="line">        <span class="keyword">size_t</span> T = <span class="number">2</span> * (numRows - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> rowIndex = <span class="number">0</span>; rowIndex &lt; numRows; ++rowIndex) &#123;</span><br><span class="line">            <span class="keyword">size_t</span> oriIndex = rowIndex;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (oriIndex &lt; maxLength) &#123;</span><br><span class="line">                res.push_back(s[oriIndex]);</span><br><span class="line">                <span class="keyword">size_t</span> insertOne = oriIndex + T - rowIndex - rowIndex;</span><br><span class="line">                <span class="keyword">if</span> (insertOne &gt; oriIndex &amp;&amp; insertOne &lt; oriIndex + T &amp;&amp;</span><br><span class="line">                    insertOne &lt; maxLength) &#123;</span><br><span class="line">                    res.push_back(s[insertOne]);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                oriIndex += T;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result:</p>
<p><img src="/2019-09-28/Algorithm-Puzzles-ZigZag-Conversion/s1.png" alt></p>
<p>Let‚Äôs do some optimization:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">convert</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (numRows == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> res;</span><br><span class="line">        <span class="keyword">size_t</span> maxLength = s.size();</span><br><span class="line">        <span class="keyword">size_t</span> T = <span class="number">2</span> * (numRows - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> rowIndex = <span class="number">0</span>; rowIndex &lt; numRows; ++rowIndex) &#123;</span><br><span class="line">            <span class="keyword">size_t</span> oriIndex = rowIndex;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (oriIndex &lt; maxLength) &#123;</span><br><span class="line">                res.push_back(s[oriIndex]);</span><br><span class="line">                <span class="keyword">size_t</span> insertOne = oriIndex + T - rowIndex - rowIndex;</span><br><span class="line">                <span class="keyword">if</span> (insertOne &gt; oriIndex &amp;&amp; insertOne &lt; oriIndex + T &amp;&amp;</span><br><span class="line">                    insertOne &lt; maxLength) &#123;</span><br><span class="line">                    res.push_back(s[insertOne]);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                oriIndex += T;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">std</span>::move(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result:</p>
<p><img src="/2019-09-28/Algorithm-Puzzles-ZigZag-Conversion/s2.png" alt></p>
<p>Looks like we also can change <em>size_t T = 2 * (numRows - 1)</em> to <em>size_t T = numRows + numRows -2</em> to use add instead of multiply</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">convert</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (numRows == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> res;</span><br><span class="line">        <span class="keyword">size_t</span> maxLength = s.size();</span><br><span class="line">        <span class="keyword">size_t</span> T = (numRows + numRows - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">size_t</span> rowIndex = <span class="number">0</span>; rowIndex &lt; numRows; ++rowIndex) &#123;</span><br><span class="line">            <span class="keyword">size_t</span> oriIndex = rowIndex;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (oriIndex &lt; maxLength) &#123;</span><br><span class="line">                res.push_back(s[oriIndex]);</span><br><span class="line">                <span class="keyword">size_t</span> insertOne = oriIndex + T - rowIndex - rowIndex;</span><br><span class="line">                <span class="keyword">if</span> (insertOne &gt; oriIndex &amp;&amp; insertOne &lt; oriIndex + T &amp;&amp;</span><br><span class="line">                    insertOne &lt; maxLength) &#123;</span><br><span class="line">                    res.push_back(s[insertOne]);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                oriIndex += T;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">std</span>::move(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result:</p>
<p><img src="/2019-09-28/Algorithm-Puzzles-ZigZag-Conversion/s3.png" alt></p>
<p>Super, better than 99.34% now!</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>ALSA: Naming rule of codec_name inside snd_soc_dai_link</title>
    <url>/2019-09-01/ALSA-Naming-rule-of-codec-name-inside-snd-soc-dai-link/</url>
    <content><![CDATA[<p>‚Ä¶</p>
<a id="more"></a>

<p>When we define a dai link in machine driver, a structure names ‚Äúsnd_soc_dai_link‚Äù will be created. There are two members inside this structure to find the adaptive codec drivers: <strong>codec_name</strong> and <strong>codec_dai_name</strong>. </p>
<p>Normally codec driver will define <strong>codec_dai_name</strong>. You can find it easily inside codec driver source code. To make sure the dai link created properly, the <strong>codec_dai_name</strong> in machine driver and codec driver should be exactly same. As for <strong>codec_name</strong>, the naming rule should be like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">codec_name.bus_number-codec_address</span><br></pre></td></tr></table></figure>

<p>Taking pcm512x as an example, if we connect it to <strong>i2c bus 4</strong> and the i2c address of pcm512x we are using is <strong>0x4e</strong> in device tree, we should define snd_soc_dai_link like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.codec_name     &#x3D; &quot;pcm512x.4-004e&quot;,</span><br><span class="line">.codec_dai_name &#x3D; &quot;pcm512x-hifi&quot;,</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto: Configure kernel with config fragments</title>
    <url>/2019-08-24/Yocto-Configure-kernel-with-config-fragments/</url>
    <content><![CDATA[<p>From my point of view it will be better to use config fragments to configure kernel instead of directly modifying <em>.config</em> file, the former way will be much easier to disable changes when you want to roll back.</p>
<a id="more"></a>

<h2 id="Using-menuconfig-to-get-the-new-config-file-you-want"><a href="#Using-menuconfig-to-get-the-new-config-file-you-want" class="headerlink" title="Using menuconfig to get the new .config file you want"></a>Using menuconfig to get the new .config file you want</h2><p>Taking raspberrypi as an example. Replace <em>linux-raspberrypi</em> to your kernel recipe name. i.e. change it to linux-imx if you are using NXP i.MX SoC. Same modification need to be applied for following steps.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake linux-raspberrypi -c menuconfig</span><br></pre></td></tr></table></figure>

<h2 id="Get-differences"><a href="#Get-differences" class="headerlink" title="Get differences"></a>Get differences</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake linux-raspberrypi -c diffconfig</span><br></pre></td></tr></table></figure>

<p>Save the generated <em>.cfg</em> fragments file. We gonna use it in next step.</p>
<p>If you can make sure about which <em>CONFIG_XXXX</em> need to be changed, you can write fragments file by yourself as well.</p>
<h2 id="Using-bbappend-to-apply-fragments"><a href="#Using-bbappend-to-apply-fragments" class="headerlink" title="Using bbappend to apply fragments"></a>Using bbappend to apply fragments</h2><p>Yocto provides bbappend for developers to modify constructing steps without modifying the original recipes, and that‚Äôs how we apply fragments.</p>
<p>Assuming that you already have a yocto layer works properly, then create recipes with this structure:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recipes-kernel/</span><br><span class="line">‚îî‚îÄ‚îÄ linux</span><br><span class="line">    ‚îú‚îÄ‚îÄ linux-raspberrypi</span><br><span class="line">    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ enable_adb-cp.cfg</span><br><span class="line">    ‚îî‚îÄ‚îÄ linux-raspberrypi_%.bbappend</span><br></pre></td></tr></table></figure>

<p>Name of bbappend file should be same as your kernel recipe, here we use wildcard <em>%</em> to make sure bbappend can be applied to any version of linux-raspberrypi recipes.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">FILESEXTRAPATHS_prepend:&#x3D;&quot;$&#123;THISDIR&#125;&#x2F;$&#123;PN&#125;:&quot;</span><br><span class="line"></span><br><span class="line"># Enable adb</span><br><span class="line">SRC_URI_append +&#x3D; &quot;file:&#x2F;&#x2F;enable_adb-cp.cfg&quot;</span><br><span class="line"></span><br><span class="line">do_configure_append() &#123;</span><br><span class="line">    $&#123;S&#125;&#x2F;scripts&#x2F;kconfig&#x2F;merge_config.sh -m -O $&#123;B&#125; $&#123;B&#125;&#x2F;.config $&#123;WORKDIR&#125;&#x2F;*-cp.cfg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>As you can see the path we put <strong>*.cfg</strong> files will not be include by default, so using <strong>FILESEXTRAPATHS_prepend</strong> to specify searching path is required. Then we will add step when do_configure, which will call <strong>merge_config.sh</strong> tool provided by kernel source to automatically merge fragments into kernel config file.</p>
<p>The funny part is I found that I made a mistake when I trying to enable usb adbd on raspberry pi 3: raspberry pi 3 can‚Äôt be used as gadget mode because of hardware limitations. But at least I verified the way to apply fragments works.-_-.</p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto: Replace sysvinit with systemd</title>
    <url>/2019-08-17/Yocto-Replace-sysvinit-with-systemd/</url>
    <content><![CDATA[<p>There are some Yocto distributions still using sysvinit as their default init manager. To replace it with systemd, some modifications need to be done in <strong>local.conf</strong>:</p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># build&#x2F;conf&#x2F;local.conf</span><br><span class="line">DISTRO_FEATURES_append +&#x3D; &quot;systemd&quot;</span><br><span class="line">VIRTUAL-RUNTIME_init_manager &#x3D; &quot;systemd&quot;</span><br><span class="line">DISTRO_FEATURES_BACKFILL_CONSIDERED +&#x3D; &quot;sysvinit&quot;</span><br><span class="line">VIRTUAL-RUNTIME_initscripts &#x3D; &quot;&quot;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Longest Palindromic Substring</title>
    <url>/2019-08-04/Algorithm-Puzzles-Longest-Palindromic-Substring/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Longest Palindromic Substring</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.</p>
<p>Example 1:</p>
<p>Input: ‚Äúbabad‚Äù<br>Output: ‚Äúbab‚Äù<br>Note: ‚Äúaba‚Äù is also a valid answer.<br>Example 2:</p>
<p>Input: ‚Äúcbbd‚Äù<br>Output: ‚Äúbb‚Äù</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><h3 id="First-Came-out-solution"><a href="#First-Came-out-solution" class="headerlink" title="First Came out solution:"></a>First Came out solution:</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> head = <span class="number">0</span>,tail = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = s.length();</span><br><span class="line">        <span class="keyword">int</span> longestH = <span class="number">0</span>, longestT = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(head != length)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[head] == s[tail])&#123;</span><br><span class="line">                <span class="keyword">if</span>(isPalindromic(s.substr(head, tail - head + <span class="number">1</span>)))&#123;</span><br><span class="line">                    longestH = head;</span><br><span class="line">                    longestT = tail;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ++tail;</span><br><span class="line">            <span class="keyword">if</span>(tail &gt;= length)&#123;</span><br><span class="line">                ++head;</span><br><span class="line">                tail = head + longestT - longestH + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(tail &gt;= length)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substr(longestH, longestT - longestH + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isPalindromic</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> dMid = s.length()/<span class="number">2.0</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = s.length()/<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">string</span> sub = s.substr((dMid - mid) &gt; <span class="number">0</span> ? mid + <span class="number">1</span> : mid);</span><br><span class="line">        <span class="built_in">std</span>::reverse(sub.begin(), sub.end());</span><br><span class="line">        <span class="keyword">if</span>(sub == s.substr(<span class="number">0</span>, mid))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result:</p>
<p><img src="/2019-08-04/Algorithm-Puzzles-Longest-Palindromic-Substring/s1.png" alt></p>
<div align="center"> 
![](Algorithm-Puzzles-Longest-Palindromic-Substring/f1.jpeg)
</div>

<p>Well, that‚Äôs the worst result I have ever seen.</p>
<h2 id="Extend-from-the-center"><a href="#Extend-from-the-center" class="headerlink" title="Extend from the center"></a>Extend from the center</h2><p>Checked the solution provided by leetcode, there is one way only have time complexity O(n¬≤), I implemented in it C++ with a little optimization:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">const</span> <span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, maxLength = <span class="number">0</span>, halfLength = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.length() - i + <span class="number">1</span> &lt; halfLength || i + <span class="number">1</span> &lt; halfLength)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> len1 = extendFromCenter(s, i, i);</span><br><span class="line">            <span class="keyword">int</span> len2 = extendFromCenter(s, i, i+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">int</span> len = len1 &gt; len2 ? len1 : len2;</span><br><span class="line">            <span class="keyword">if</span>(len &gt; maxLength)&#123;</span><br><span class="line">                start = i - (len - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">                maxLength = len;</span><br><span class="line">                halfLength = maxLength / <span class="number">2</span>; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substr(start, maxLength);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">extendFromCenter</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; s, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(left &gt;= <span class="number">0</span> &amp;&amp; right &lt; s.length() &amp;&amp; s[left] == s[right])&#123;</span><br><span class="line">            --left;</span><br><span class="line">            ++right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right - left - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Result with this:</p>
<p><img src="/2019-08-04/Algorithm-Puzzles-Longest-Palindromic-Substring/s2.png" alt></p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Median of Two Sorted Arrays</title>
    <url>/2019-07-27/Algorithm-Puzzles-Median-of-Two-Sorted-Arrays/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Median of Two Sorted Arrays</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>There are two sorted arrays nums1 and nums2 of size m and n respectively.</p>
<p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<p>You may assume nums1 and nums2 cannot be both empty.</p>
<p>Example 1:</p>
<p>nums1 = [1, 3]<br>nums2 = [2]</p>
<p>The median is 2.0<br>Example 2:</p>
<p>nums1 = [1, 2]<br>nums2 = [3, 4]</p>
<p>The median is (2 + 3)/2 = 2.5</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>The first came out solution is using merge sort since the sub-vectors are already sorted. The funny part is the puzzle requests time complexity should be O(log (m+n)), which is same as merge sort.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums1,<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; nums3;</span><br><span class="line">        nums3.resize(nums1.size()+nums2.size());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">auto</span> iter1 = nums1.begin();</span><br><span class="line">        <span class="keyword">auto</span> iter2 = nums2.begin();</span><br><span class="line">        <span class="keyword">auto</span> iter3 = nums3.begin();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(;; ++iter3)&#123;</span><br><span class="line">            <span class="keyword">if</span>(iter1 == nums1.end())&#123;</span><br><span class="line">                <span class="built_in">std</span>::copy(iter2,nums2.end(),iter3);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(iter2 == nums2.end())&#123;</span><br><span class="line">                <span class="built_in">std</span>::copy(iter1,nums1.end(),iter3);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(*iter1&lt;=*iter2)&#123;</span><br><span class="line">                *iter3 = *iter1;</span><br><span class="line">                ++iter1;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                *iter3 = *iter2;</span><br><span class="line">                ++iter2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(nums3.size()%<span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums3[(nums3.size()<span class="number">-1</span>)/<span class="number">2</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (nums3[nums3.size()/<span class="number">2</span>] + nums3[nums3.size()/<span class="number">2</span> - <span class="number">1</span>])/<span class="number">2.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(log(m+n))</p>
<p>Result I got:<br><img src="/2019-07-27/Algorithm-Puzzles-Median-of-Two-Sorted-Arrays/s1.png" alt></p>
<p>Better than 98.75%. BTW it seems I can get different result with the exactly same code‚Ä¶</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX8 adb bring up</title>
    <url>/2019-07-27/i-MX8-adb-bring-up/</url>
    <content><![CDATA[<p>The default BSP provided by NXP doesn‚Äôt support <strong>adb</strong>, we have to port it by ourselves. Our goal is making <strong>adbd</strong> running on SoC meanwhile we can use <strong>adb</strong> through USB port.<br>Let‚Äôs have a quick summary before I forget it(I already done this 3 months ago‚Ä¶)</p>
<a id="more"></a>

<h2 id="Source-code-of-adb-amp-adbd"><a href="#Source-code-of-adb-amp-adbd" class="headerlink" title="Source code of adb &amp; adbd"></a>Source code of adb &amp; adbd</h2><p>You can find adb &amp; adbd source codes easily, but I found that there is a recipe in openembedded already provided adb &amp; adbd:<br><em>meta-openembedded/meta-oe/recipes-devtools/android-tools</em><br>But the default recipes can‚Äôt work on imx8mm through USB. We need do some modifications later.</p>
<h2 id="Adding-support-for-login-adb-as-root"><a href="#Adding-support-for-login-adb-as-root" class="headerlink" title="Adding support for login adb as root"></a>Adding support for login adb as root</h2><p>There is a function called <strong>should_drop_privileges</strong> in adbd source code, modify this function that makes it always return 0 to disallow drop privileges. It has been added into newer openembedded but not the i.mx BSP.</p>
<figure class="highlight patch"><table><tr><td class="code"><pre><span class="line">From 3a788e9168c9b9eac66c4fa479413f4a95c61be4 Mon Sep 17 00:00:00 2001</span><br><span class="line">From: Florent Revest &lt;revestflo@gmail.com&gt;</span><br><span class="line">Date: Mon, 30 Oct 2017 21:05:46 +0100</span><br><span class="line">Subject: [PATCH] adb: Allow adbd to be ran as root</span><br><span class="line"></span><br><span class="line"><span class="comment">---</span></span><br><span class="line"> adb/adb.c | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"></span><br><span class="line">diff --git a/adb/adb.c b/adb/adb.c</span><br><span class="line">index 027edd9359..e0f7ecde45 100644</span><br><span class="line"><span class="comment">--- a/adb/adb.c</span></span><br><span class="line"><span class="comment">+++ b/adb/adb.c</span></span><br><span class="line">@@ -1271,6 +1271,7 @@ static int should_drop_privileges() &#123;</span><br><span class="line">     int secure = 0;</span><br><span class="line">     char value[PROPERTY_VALUE_MAX];</span><br><span class="line"> </span><br><span class="line"><span class="addition">+    return 0;</span></span><br><span class="line">    /* run adbd in secure mode if ro.secure is set and</span><br><span class="line">     ** we are not in the emulator</span><br><span class="line">     */</span><br></pre></td></tr></table></figure>
<p>You need to add this patch into recipe sources as well:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SRC_URI +&#x3D; &quot; \</span><br><span class="line">    file:&#x2F;&#x2F;0008-adb-Allow-adbd-to-be-ran-as-root.patch;patchdir&#x3D;system&#x2F;core \</span><br><span class="line">&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Adding-support-for-USB-adb"><a href="#Adding-support-for-USB-adb" class="headerlink" title="Adding support for USB adb"></a>Adding support for USB adb</h2><p>To connect adbd through USB, we need support from usb function filesystem. To enable it in kernel:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">‚îÇ Symbol: USB_FUNCTIONFS [&#x3D;m]                                                                      ‚îÇ  </span><br><span class="line">‚îÇ Type  : tristate                                                                                 ‚îÇ  </span><br><span class="line">‚îÇ Prompt: Function Filesystem                                                                      ‚îÇ  </span><br><span class="line">‚îÇ   Location:                                                                                      ‚îÇ  </span><br><span class="line">‚îÇ     -&gt; Device Drivers                                                                            ‚îÇ  </span><br><span class="line">‚îÇ       -&gt; USB support (USB_SUPPORT [&#x3D;y])                                                          ‚îÇ  </span><br><span class="line">‚îÇ         -&gt; USB Gadget Support (USB_GADGET [&#x3D;y])                                                  ‚îÇ  </span><br><span class="line">‚îÇ (4)       -&gt; USB Gadget precomposed configurations (&lt;choice&gt; [&#x3D;m])                               ‚îÇ  </span><br><span class="line">‚îÇ   Defined at drivers&#x2F;usb&#x2F;gadget&#x2F;legacy&#x2F;Kconfig:196                                               ‚îÇ  </span><br><span class="line">‚îÇ   Depends on: &lt;choice&gt;                                                                           ‚îÇ  </span><br><span class="line">‚îÇ   Selects: USB_LIBCOMPOSITE [&#x3D;y] &amp;&amp; USB_F_FS [&#x3D;y] &amp;&amp; USB_FUNCTIONFS_GENERIC [&#x3D;y]</span><br></pre></td></tr></table></figure>

<p>After installation of <strong>USB_FUNCTIONFS</strong>, we need to <em>modprobe</em> and <em>mount</em> functionfs before adbd start(initialization):</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">modprobe g_ffs idVendor=0x18d1 idProduct=0x4e42 iSerialNumber=<span class="string">"codingspirit"</span></span><br><span class="line">mkdir -p /dev/usb-ffs/adb</span><br><span class="line">mount -t functionfs adb /dev/usb-ffs/adb -o uid=0,gid=0</span><br></pre></td></tr></table></figure>

<p>Then we can start adbd now.</p>
<p>In my case I‚Äôm using systemd to do this initialization(as a <strong>ExecStartPre</strong>), then set <em>/usr/bin/adbd</em> as <strong>ExecStart</strong>.</p>
<p>After all of those steps, we can do quick test by <strong>adb devices</strong>! If everything goes well, you can see your device has been recognized. Then use <strong>adb shell</strong> to login, a <strong>#</strong> symbol should be shown which means you are in root.</p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Longest Substring Without Repeating Characters</title>
    <url>/2019-07-21/Algorithm-Puzzles-Longest-Substring-Without-Repeating-Characters/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Longest Substring Without Repeating Characters</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Given a string, find the length of the longest substring without repeating characters.</p>
<p>Example 1:</p>
<p>Input: ‚Äúabcabcbb‚Äù<br>Output: 3<br>Explanation: The answer is ‚Äúabc‚Äù, with the length of 3.<br>Example 2:</p>
<p>Input: ‚Äúbbbbb‚Äù<br>Output: 1<br>Explanation: The answer is ‚Äúb‚Äù, with the length of 1.<br>Example 3:</p>
<p>Input: ‚Äúpwwkew‚Äù<br>Output: 3<br>Explanation: The answer is ‚Äúwke‚Äù, with the length of 3.<br>             Note that the answer must be a substring, ‚Äúpwke‚Äù is a subsequence and not a substring.</p>
<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><h3 id="First-came-out-solution"><a href="#First-came-out-solution" class="headerlink" title="First came out solution"></a>First came out solution</h3><p>Traverse substring(not all of them, with a little bit optimization)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> longest = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.size(); i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; s.size() + <span class="number">1</span>; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>((j-i) &lt;= longest)&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(checkStringUnique(s.substr(i,j-i)))</span><br><span class="line">                    longest = (longest &gt; (j - i)) ? longest : (j - i);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> longest;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">checkStringUnique</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span>&amp;&amp; s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> iter = s.begin(); iter != s.end(); ++iter)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.find_first_of(*iter, <span class="built_in">std</span>::distance(s.begin(), iter)+<span class="number">1</span>) != <span class="built_in">std</span>::<span class="built_in">string</span>::npos)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n^3)</p>
<p><img src="/2019-07-21/Algorithm-Puzzles-Longest-Substring-Without-Repeating-Characters/s1.png" alt></p>
<p>But this solution is not good enough since the time complexity is O(n^3). Only better than 62.78% cpp users.</p>
<h3 id="Sliding-Window"><a href="#Sliding-Window" class="headerlink" title="Sliding Window"></a>Sliding Window</h3><p>Checked the reference answer, there is another solution: using sliding Window. </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; <span class="built_in">map</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">auto</span> res = <span class="built_in">map</span>.find(s[j]);</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="built_in">map</span>.end()) &#123;</span><br><span class="line">                i = (res-&gt;second &gt; i) ? res-&gt;second : i;</span><br><span class="line">                res-&gt;second = j + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">map</span>.insert(&#123;s[j], j + <span class="number">1</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans &gt; (j - i + <span class="number">1</span>)) ? ans : (j - i + <span class="number">1</span>);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n)</p>
<p><img src="/2019-07-21/Algorithm-Puzzles-Longest-Substring-Without-Repeating-Characters/s2.png" alt></p>
<p>It‚Äôs better than 85.71% now.</p>
<h3 id="Assuming-ASCII-128"><a href="#Assuming-ASCII-128" class="headerlink" title="Assuming ASCII 128"></a>Assuming ASCII 128</h3><p>The third way to solve this is assuming the string inputs are all ASCII 128 characters‚Ä¶ In this case no hash table is needed.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> index[<span class="number">128</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            i = index[s[j]] &gt; i ? index[s[j]] : i;</span><br><span class="line">            ans = (ans &gt; (j - i + <span class="number">1</span>)) ? ans : (j - i + <span class="number">1</span>);</span><br><span class="line">            index[s[j]] = j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/2019-07-21/Algorithm-Puzzles-Longest-Substring-Without-Repeating-Characters/s3.png" alt></p>
<p>This solution is faster than 95.65%.</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Add two numbers</title>
    <url>/2019-07-14/Algorithm-Puzzles-Add-two-numbers/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Add two numbers</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p>
<p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
<p>Example:</p>
<p>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>Output: 7 -&gt; 0 -&gt; 8<br>Explanation: 342 + 465 = 807.</p>
<p>The template code provided by leetcode:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>My first came out solution just like how we do sum on draft paper:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        ListNode* result = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode* resultHead = result;</span><br><span class="line">        ListNode emptyNode&#123;<span class="number">0</span>&#125;; </span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            carry = addTwoNode(l1, l2, carry, result);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>((carry == <span class="number">0</span>) &amp;&amp; (l1-&gt;next == <span class="literal">nullptr</span>) &amp;&amp; (l2-&gt;next == <span class="literal">nullptr</span>))&#123;</span><br><span class="line">                <span class="keyword">return</span> resultHead;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                result-&gt;next = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">                result = result-&gt;next;</span><br><span class="line">                l1 = l1-&gt;next?l1-&gt;next:&amp;emptyNode;</span><br><span class="line">                l2 = l2-&gt;next?l2-&gt;next:&amp;emptyNode;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addTwoNode</span><span class="params">(ListNode* l1, ListNode* l2, <span class="keyword">int</span> carry, ListNode* result)</span></span>&#123;</span><br><span class="line">        result-&gt;val = (l1-&gt;val + l2-&gt;val + carry);</span><br><span class="line">        <span class="keyword">if</span>(result-&gt;val &gt;= <span class="number">10</span>)&#123;</span><br><span class="line">            result-&gt;val -= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n)<br><img src="/2019-07-14/Algorithm-Puzzles-Add-two-numbers/s1.png" alt></p>
<p>It‚Äôs do a little optimization:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        ListNode* result = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode* resultHead = result;</span><br><span class="line">        ListNode emptyNode&#123;<span class="number">0</span>&#125;; </span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            carry = addTwoNode(l1-&gt;val, l2-&gt;val, result);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>((carry == <span class="number">0</span>) &amp;&amp; (l1-&gt;next == <span class="literal">nullptr</span>) &amp;&amp; (l2-&gt;next == <span class="literal">nullptr</span>))&#123;</span><br><span class="line">                <span class="keyword">return</span> resultHead;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                result-&gt;next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">                result = result-&gt;next;</span><br><span class="line">                l1 = l1-&gt;next?l1-&gt;next:&amp;emptyNode;</span><br><span class="line">                l2 = l2-&gt;next?l2-&gt;next:&amp;emptyNode;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addTwoNode</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span>&amp; l1, <span class="keyword">const</span> <span class="keyword">int</span>&amp; l2, ListNode* result)</span></span>&#123;</span><br><span class="line">        result-&gt;val += (l1 + l2);</span><br><span class="line">        <span class="keyword">if</span>(result-&gt;val &gt;= <span class="number">10</span>)&#123;</span><br><span class="line">            result-&gt;val -= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/2019-07-14/Algorithm-Puzzles-Add-two-numbers/s2.png" alt></p>
<p>Super! Better than 99.99%!</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Algorithm Puzzles: Two Sum</title>
    <url>/2019-07-11/Algorithm-Puzzles-Two-Sum/</url>
    <content><![CDATA[<p>Algorithm Puzzles <del>everyday</del> <del>every week</del> sometimes: Two Sum</p>
<a id="more"></a>

<h2 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h2><p>Puzzle from <a href="https://leetcode.com" target="_blank" rel="noopener">leetcode</a>:</p>
<p>Given an array of integers, return <strong>indices</strong> of the two numbers such that they add up to a specific target.</p>
<p>You may assume that each input would have <strong>exactly</strong> one solution, and you may not use the same element twice.</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Given nums &#x3D; [2, 7, 11, 15], target &#x3D; 9,</span><br><span class="line"></span><br><span class="line">Because nums[0] + nums[1] &#x3D; 2 + 7 &#x3D; 9,</span><br><span class="line">return [0, 1].</span><br></pre></td></tr></table></figure>

<p>The template code provided by leetcode:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Solving"><a href="#Solving" class="headerlink" title="Solving"></a>Solving</h2><p>The first came out solution from my head is for every elements for-loop traverse once to find the result:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; a : nums)&#123;</span><br><span class="line">            <span class="keyword">auto</span> tryToFind = target - a;</span><br><span class="line">            <span class="keyword">for</span>(...)</span><br><span class="line">                <span class="comment">//if tryToFind exist in nums</span></span><br><span class="line">                <span class="comment">//return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>It‚Äôs really ez! But time complexity will be <strong>O(n^2)</strong> since there are 2 for-loops inside. There must be a better way, I can‚Äôt submit with this solution!</p>
<p><img src="/2019-07-11/Algorithm-Puzzles-Two-Sum/think.jpg" alt></p>
<p>So what kind of search method is better? Maybe hash table?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; <span class="built_in">map</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; a : nums)&#123;</span><br><span class="line">            <span class="built_in">map</span>.insert(&#123;a,i&#125;);</span><br><span class="line">            <span class="keyword">auto</span> res = <span class="built_in">map</span>.find(target-a);</span><br><span class="line">            <span class="keyword">if</span>(res != <span class="built_in">map</span>.end())&#123;</span><br><span class="line">                <span class="keyword">if</span>(i != res-&gt;second)</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(&#123;i, res-&gt;second&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::invalid_argument(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Bravo! Time complexity is <strong>O(n)</strong> now!(but we used more space)<br>results:<br><img src="/2019-07-11/Algorithm-Puzzles-Two-Sum/s1.png" alt><br>What? Only better than 88.56%? OK it still can get improvements by replacing for-each with for-loop(But why I choose for-each at the first time‚Ä¶)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; <span class="built_in">map</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++)&#123;</span><br><span class="line">            <span class="built_in">map</span>.insert(&#123;nums[i],i&#125;);</span><br><span class="line">            <span class="keyword">auto</span> res = <span class="built_in">map</span>.find(target-nums[i]);</span><br><span class="line">            <span class="keyword">if</span>(res != <span class="built_in">map</span>.end())&#123;</span><br><span class="line">                <span class="keyword">if</span>(i != res-&gt;second)</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(&#123;i, res-&gt;second&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>result:<br><img src="/2019-07-11/Algorithm-Puzzles-Two-Sum/s2_1.png" alt></p>
<p><img src="/2019-07-11/Algorithm-Puzzles-Two-Sum/s2_2.png" alt></p>
<p>Cool, better than 99.79% now!</p>
]]></content>
      <categories>
        <category>ÁÆóÊ≥ïÈ¢òËß£</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Webserver bring up (II): Create a demo page(html+fcgi)</title>
    <url>/2019-06-28/Webserver-bring-up-II-Create-a-demo-page-html-fcgi/</url>
    <content><![CDATA[<p>In last post we have installed lighttpd and fastcgi++, it‚Äôs create a demo page to have a quick verification.</p>
<a id="more"></a>


<h2 id="A-simple-html"><a href="#A-simple-html" class="headerlink" title="A simple html"></a>A simple html</h2><p>Let‚Äôs write a simple html for demo:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">'utf-8'</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">href</span>=<span class="string">"/img/favicon.ico"</span> <span class="attr">type</span>=<span class="string">"img/x-ico"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Alex Demo page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">background</span>=<span class="string">"/img/back.jpg"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">" background-repeat:no-repeat ;background-size:100% 100%;background-attachment: fixed;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">style</span>=<span class="string">"margin-top: 25%"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"diag"</span> <span class="attr">action</span>=<span class="string">"/cpp_get.fcgi"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">style</span>=<span class="string">"background-color:dimgrey"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">"right"</span> <span class="attr">valign</span>=<span class="string">"middle"</span>&gt;</span></span><br><span class="line">                        Product Name:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">" text"</span> <span class="attr">name</span>=<span class="string">"product_name"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">                        Product ID:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"product_id"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Êèê‰∫§"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>This page will show a picture as page background, meanwhile a from will be created for testing GET method. The path we are using in html is relative path, i.e. if you put your pages to <em>/var/www/pages/test.html</em>, the absolute path of back.jpg will be <em>/var/www/pages/img/back.jpg</em> and the relative path will be <em>/img/back.jpg</em>.</p>
<p>Beware of access rights of those files/directories, the user and user group of lighttpd was configured in <strong>lighttpd.conf</strong> by <strong>server.username</strong> and <strong>server.groupname</strong>. Make sure lighttpd can access them.</p>
<h2 id="Write-a-simple-fgci-backend"><a href="#Write-a-simple-fgci-backend" class="headerlink" title="Write a simple fgci backend"></a>Write a simple fgci backend</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// fcgi_get.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fastcgi++/request.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetTest</span> :</span> <span class="keyword">public</span> Fastcgipp::Request&lt;<span class="keyword">wchar_t</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">response</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="function">wofstream <span class="title">outPutFile</span><span class="params">(<span class="string">"output.patch"</span>, <span class="built_in">std</span>::ios_base::out | <span class="built_in">std</span>::ios_base::binary)</span></span>;</span><br><span class="line">        <span class="comment">//! [Response definition]</span></span><br><span class="line">        <span class="comment">//! [HTTP header]</span></span><br><span class="line">        out &lt;&lt; <span class="string">L"Content-Type: text/html; charset=utf-8\r\n\r\n"</span>;</span><br><span class="line">        <span class="comment">//! [HTTP header]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//! [Output]</span></span><br><span class="line">        out &lt;&lt; <span class="string">L"&lt;!DOCTYPE html&gt;\n"</span></span><br><span class="line">               <span class="string">L"&lt;html&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;head&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;meta charset='utf-8' /&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;title&gt;Success&lt;/title&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;/head&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;body&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;p&gt;"</span>;</span><br><span class="line">        <span class="keyword">using</span> Fastcgipp::Encoding;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!environment().gets.empty())</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;get : environment().gets)</span><br><span class="line">            &#123;</span><br><span class="line">                out &lt;&lt; <span class="string">L"&lt;b&gt;"</span> &lt;&lt; Encoding::HTML &lt;&lt; get.first &lt;&lt; Encoding::NONE</span><br><span class="line">                    &lt;&lt; <span class="string">L":&lt;/b&gt; "</span> &lt;&lt; Encoding::HTML &lt;&lt; get.second</span><br><span class="line">                    &lt;&lt; Encoding::NONE &lt;&lt; <span class="string">L"&lt;br /&gt;"</span>;</span><br><span class="line">                outPutFile &lt;&lt; get.first &lt;&lt; <span class="string">":"</span> &lt;&lt; get.second;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        out &lt;&lt; <span class="string">L"&lt;/p&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;/body&gt;"</span></span><br><span class="line">               <span class="string">L"&lt;/html&gt;"</span>;</span><br><span class="line">        <span class="comment">//! [Output]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//! [Return]</span></span><br><span class="line">        outPutFile &lt;&lt; <span class="string">"FFF"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        outPutFile.close();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fastcgi++/manager.hpp&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Fastcgipp::Manager&lt;GetTest&gt; manager;</span><br><span class="line">    <span class="comment">//! [Manager]</span></span><br><span class="line">    <span class="comment">//! [Signals]</span></span><br><span class="line">    manager.setupSignals();</span><br><span class="line">    <span class="comment">//! [Signals]</span></span><br><span class="line">    <span class="comment">//! [Listen]</span></span><br><span class="line">    manager.listen();</span><br><span class="line">    <span class="comment">//! [Listen]</span></span><br><span class="line">    <span class="comment">//! [Start]</span></span><br><span class="line">    manager.start();</span><br><span class="line">    <span class="comment">//! [Start]</span></span><br><span class="line">    <span class="comment">//! [Join]</span></span><br><span class="line">    manager.join();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Use <em>environment().gets</em> to get all data passed by frontend through GET method.</p>
<h2 id="Compile-your-fcgi"><a href="#Compile-your-fcgi" class="headerlink" title="Compile your fcgi"></a>Compile your fcgi</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">g++ fcgi_get.cpp -lfastcgipp -o cpp_get.fcgi</span><br></pre></td></tr></table></figure>

<p>Then copy it to <em>/var/www/fcgi-bin/cpp_get.fcgi</em>. Don‚Äôt forget add rights of execution for this fcgi file.</p>
<h2 id="Add-your-fcgi-into-lighttpd-conf"><a href="#Add-your-fcgi-into-lighttpd-conf" class="headerlink" title="Add your fcgi into lighttpd conf"></a>Add your fcgi into lighttpd conf</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;&#x2F;cpp_get.fcgi&quot; &#x3D;&gt; (</span><br><span class="line">  &quot;cpp_get.fastcgi.handler&quot; &#x3D;&gt; (</span><br><span class="line">    &quot;socket&quot; &#x3D;&gt; &quot;&#x2F;var&#x2F;run&#x2F;lighttpd&#x2F;lighttpd-cpp_get-&quot; + PID + &quot;.socket&quot;,,</span><br><span class="line">    &quot;check-local&quot; &#x3D;&gt; &quot;disable&quot;,</span><br><span class="line">    &quot;bin-path&quot; &#x3D;&gt; &quot;&#x2F;var&#x2F;www&#x2F;fcgi-bin&#x2F;cpp_get.fcgi&quot;,</span><br><span class="line">    &quot;max-procs&quot; &#x3D;&gt; 30,</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>This configuration allows you execute your fcgi by access localhost/cpp_get.fcgi.</p>
<h2 id="Apply-changes"><a href="#Apply-changes" class="headerlink" title="Apply changes"></a>Apply changes</h2><p>If lighttpd is already started on your device, you might need to restart lighttpd services to apply changes: </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service lighttpd force-reload</span><br></pre></td></tr></table></figure>

<h2 id="Verification"><a href="#Verification" class="headerlink" title="Verification"></a>Verification</h2><p>Open <em><a href="http://localhost/test.html" target="_blank" rel="noopener">http://localhost/test.html</a></em>, input something in the form then click ‚ÄúÊèê‰∫§‚Äù, if everything is ok, browser will jump to <em><a href="http://localhost/cpp_get.fcgi" target="_blank" rel="noopener">http://localhost/cpp_get.fcgi</a></em> and show what you have inputted. Meanwhile a file called <em>output.patch</em> will be generated at your page folder which contains the text you inputted as well.</p>
<p>Tips: If error occurred, you can find the path of error log by checking the value of <strong>server.errorlog</strong> in your <strong>lighttpd.conf</strong>.</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Web</tag>
      </tags>
  </entry>
  <entry>
    <title>Webserver bring up (I): Install lighttpd and fastcgi++</title>
    <url>/2019-06-20/Webserver-bring-up-I-Install-lighttpd-and-fastcgi/</url>
    <content><![CDATA[<p>Webserver bring up(I): Install lighttpd and fastcgi++</p>
<a id="more"></a>

<h1 id="Install-Lighttpd"><a href="#Install-Lighttpd" class="headerlink" title="Install Lighttpd"></a>Install Lighttpd</h1><p><a href="https://www.lighttpd.net/" target="_blank" rel="noopener">Lighttpd</a> is a popular high performance webserver.</p>
<p>If you are using Debian based distributions, you can directly install it by apt install:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install lighttpd</span><br></pre></td></tr></table></figure>

<p>If you are using Yocto, you also can install it easily because poky already provided recipe for it. you can find it at <em>poky/meta/recipes-extended/lighttpd/</em>. </p>
<p>The default installed version(no matter PC or Yocto) only provides basic functions, fastcgi is not included. To enable support for fastcgi you need to :</p>
<ol>
<li>Modify file <strong>lighttpd.conf</strong>(On PC path is /etc/lighttpd/lighttpd.conf) to add <strong>mod_fcgi</strong> into <strong>server.modules</strong>. </li>
<li>If you are using Yocto, you also need to add <strong>lighttpd-module-fastcgi</strong> to <strong>IMAGE_INSTALL_append</strong> or declare dependencies of module fastcgi in your recipes:<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">IMAGE_INSTALL_append +&#x3D; &quot;lighttpd-module-fastcgi&quot;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="Install-fastcgi"><a href="#Install-fastcgi" class="headerlink" title="Install fastcgi++"></a>Install fastcgi++</h1><p><a href="https://fastcgipp.isatec.ca" target="_blank" rel="noopener">fastcgi++(fastcgipp)</a> is a C++ FastCGI and Web development platform. I choose this library because it provides support for C++14 and the official site of <a href="http://www.fastcgi.com/" target="_blank" rel="noopener">fastcgi</a> which provides C/C++ libraries before has been closed for several years.  </p>
<p>Seems there is no yocto recipe for fastcgi++ on internet, but it‚Äôs easy to write a recipe by myself because it supports built by cmake. Here comes my recipe for fastcgi++:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMMARY &#x3D; &quot;fastcgi++&quot;</span><br><span class="line">DESCRIPTION &#x3D; &quot;C++ FastCGI and Web development platform&quot;</span><br><span class="line">SECTION &#x3D; &quot;libs&quot;</span><br><span class="line">LICENSE &#x3D; &quot;GPL-2.0&quot;</span><br><span class="line">AUTHOR &#x3D; &quot;Alex.Don.Scofield(codingspirit)&quot;</span><br><span class="line">LIC_FILES_CHKSUM &#x3D; &quot;file:&#x2F;&#x2F;$&#123;COMMON_LICENSE_DIR&#125;&#x2F;GPL-2.0;md5&#x3D;801f80980d171dd6425610833a22dbe6&quot;</span><br><span class="line"></span><br><span class="line">$&#123;PN&#125;_REPO &#x3D; &quot;github.com&#x2F;eddic&#x2F;fastcgipp.git&quot;</span><br><span class="line">SRCREV_$&#123;PN&#125; &#x3D; &quot;5a5c3a263595a1792b2867188770bcf4f4df8b83&quot;</span><br><span class="line"></span><br><span class="line">TARGET_CC_ARCH +&#x3D; &quot;$&#123;LDFLAGS&#125;&quot;</span><br><span class="line"></span><br><span class="line">SRC_URI &#x3D; &quot; \</span><br><span class="line">  git:&#x2F;&#x2F;$&#123;$&#123;PN&#125;_REPO&#125;;name&#x3D;$&#123;PN&#125;;protocol&#x3D;https;nobranch&#x3D;1;destsuffix&#x3D;git&#x2F;$&#123;PN&#125; \</span><br><span class="line">  &quot;</span><br><span class="line"></span><br><span class="line">S &#x3D; &quot;$&#123;WORKDIR&#125;&#x2F;git&#x2F;$&#123;PN&#125;&quot;</span><br><span class="line">B &#x3D; &quot;$&#123;WORKDIR&#125;&#x2F;$&#123;BPN&#125;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">EXTRA_OECMAKE &#x3D; &quot;-DCMAKE_BUILD_TYPE&#x3D;RELEASE&quot;</span><br><span class="line">inherit cmake</span><br></pre></td></tr></table></figure>

<p>BTW to pass cmake runtime parameters in Yocto, we can use <strong>EXTRA_OECMAKE</strong> :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">EXTRA_OECMAKE +&#x3D; &quot;-DBUILD_SAMPLE&#x3D;ON&quot;</span><br><span class="line">inherit cmake</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Web</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto: systemd</title>
    <url>/2019-06-07/Yocto-systemd/</url>
    <content><![CDATA[<p>As a replacement of System V init, systemd has been supported by Yocto long time ago. Let‚Äôs take a look at how to implement a Yocto recipe for systemd services.</p>
<a id="more"></a>

<h2 id="Prepare-service-file"><a href="#Prepare-service-file" class="headerlink" title="Prepare .service file"></a>Prepare .service file</h2><p>An example of service config file <strong>mydaemon.service</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description&#x3D;My Daemon</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User&#x3D;root</span><br><span class="line">Group&#x3D;root</span><br><span class="line">Type&#x3D;simple</span><br><span class="line">ExecStart&#x3D;&#x2F;my_daemon&#x2F;my_daemon_start.sh</span><br><span class="line">StandardOutput&#x3D;null</span><br></pre></td></tr></table></figure>

<h2 id="Write-a-systemd-recipe"><a href="#Write-a-systemd-recipe" class="headerlink" title="Write a systemd recipe"></a>Write a systemd recipe</h2><p>First of all, don‚Äôt forget add your service file into source files:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SRC_URI &#x3D; &quot; \</span><br><span class="line">  git:&#x2F;&#x2F;$&#123;$&#123;PN&#125;_REPO&#125;;name&#x3D;$&#123;PN&#125;;protocol&#x3D;http;nobranch&#x3D;1;destsuffix&#x3D;git&#x2F;$&#123;PN&#125; \</span><br><span class="line">  file:&#x2F;&#x2F;mydaemon.service \</span><br><span class="line">  &quot;</span><br></pre></td></tr></table></figure>

<p>As you can see I put service file and application source code separately. You can put service file into your source code git repo as well.</p>
<p>Then to add systemd into Yocto recipe, you need to inherit your recipe from <strong>systemd</strong> class:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">inherit systemd</span><br></pre></td></tr></table></figure>

<p>BTW Yocto support multiple inheritance, in my case I was trying to setup a cmake based application as a startup application when system booting up, so :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">inherit cmake systemd</span><br></pre></td></tr></table></figure>

<p>Notice: Here is a short introduction from <a href="https://www.yoctoproject.org/docs/2.2/ref-manual/ref-manual.html" target="_blank" rel="noopener">Yocto reference manual</a></p>
<blockquote>
<p>The systemd class provides support for recipes that install systemd unit files.<br>The functionality for this class is disabled unless you have ‚Äúsystemd‚Äù in DISTRO_FEATURES.<br>Under this class, the recipe or Makefile (i.e. whatever the recipe is calling during the do_install task) installs unit files into ${D}${systemd_unitdir}/system. If the unit files being installed go into packages other than the main package, you need to set SYSTEMD_PACKAGES in your recipe to identify the packages in which the files will be installed.<br>You should set SYSTEMD_SERVICE to the name of the service file. You should also use a package name override to indicate the package to which the value applies. If the value applies to the recipe‚Äôs main package, use ${PN}. Here is an example from the connman recipe:</p>
</blockquote>
<blockquote>
<pre><code>SYSTEMD_SERVICE_${PN} = &quot;connman.service&quot;</code></pre></blockquote>
<blockquote>
<p>Services are set up to start on boot automatically unless you have set SYSTEMD_AUTO_ENABLE to ‚Äúdisable‚Äù.</p>
</blockquote>
<blockquote>
<p>For more information on systemd, see the ‚ÄúSelecting an Initialization Manager‚Äù section in the Yocto Project Development Manual.</p>
</blockquote>
<p>As you can see, we <em>should set SYSTEMD_SERVICE to the name of the service file</em>. </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SYSTEMD_SERVICE_$&#123;PN&#125; &#x3D; &quot;mydaemon.service&quot;</span><br></pre></td></tr></table></figure>

<p>The last step is write a <strong>do_install</strong> task to install our services into target. The problem is in my scenario, cmake class already provided a <strong>do_install</strong> task, if we just override <strong>do_install</strong> task as below:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">do_install() &#123;</span><br><span class="line">  install -D -p -m0644 $&#123;WORKDIR&#125;&#x2F;mydaemon.service \</span><br><span class="line">    $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;system&#x2F;mydaemon.service</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>cmake install task will not be executed. To fix this, we need to add <strong>cmake_do_install</strong> into overridden <strong>do_install</strong> task:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">do_install() &#123;</span><br><span class="line">  cmake_do_install</span><br><span class="line">  install -D -p -m0644 $&#123;WORKDIR&#125;&#x2F;mydaemon.service \</span><br><span class="line">    $&#123;D&#125;$&#123;systemd_unitdir&#125;&#x2F;system&#x2F;mydaemon.service</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then cmake install task will be executed, mydaemon.service will be installed and setup as well.</p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX setup auto login</title>
    <url>/2019-06-06/i-MX-setup-auto-login/</url>
    <content><![CDATA[<p>The default BSP provided by NXP requires login in UART after booting up, which seems ‚Äúunfriendly‚Äù to some users.</p>
<a id="more"></a>

<p>In i.MX Yocto BSP, Login is provided by a systemd service called systemd-serialgetty:<br><strong>sources/poky/meta/recipes-core/systemd/systemd-serialgetty/serial-getty@.service</strong><br>This service will execute <strong>agetty</strong> when system booting up and require login.</p>
<p>So there are two ways to disable login:</p>
<h2 id="Replace-agetty-with-bin-login"><a href="#Replace-agetty-with-bin-login" class="headerlink" title="Replace agetty with /bin/login"></a>Replace agetty with <strong>/bin/login</strong></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ExecStart&#x3D;&#x2F;bin&#x2F;login -f root</span><br></pre></td></tr></table></figure>

<h2 id="Provide-username-to-agetty"><a href="#Provide-username-to-agetty" class="headerlink" title="Provide username to agetty"></a>Provide username to agetty</h2><p>Add option <strong>-a</strong> to provide username to agetty.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Environment&#x3D;&quot;TERM&#x3D;xterm&quot;</span><br><span class="line">#ExecStart&#x3D;-&#x2F;sbin&#x2F;agetty -8 -L %I @BAUDRATE@ $TERM</span><br><span class="line">ExecStart&#x3D;-&#x2F;sbin&#x2F;agetty -8 -a root -L %I @BAUDRATE@ $TERM</span><br><span class="line">Type&#x3D;idle</span><br><span class="line">Restart&#x3D;always</span><br><span class="line">RestartSec&#x3D;0</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Android: Error when execute sdkmanager</title>
    <url>/2019-05-28/Android-Error-when-execute-sdkmanager/</url>
    <content><![CDATA[<p>Quick fix for error that <strong>sdkmanager</strong> throw exception when trying to call <strong>sdkmanager ‚Äìlicense</strong> and <strong>sdkmanager ‚Äìlist</strong>.</p>
<a id="more"></a>

<h2 id="Error-messages"><a href="#Error-messages" class="headerlink" title="Error messages"></a>Error messages</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax&#x2F;xml&#x2F;bind&#x2F;annotation&#x2F;XmlSchema</span><br><span class="line">    at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)</span><br><span class="line">    at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)</span><br><span class="line">    at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)</span><br><span class="line">    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)</span><br><span class="line">    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)</span><br><span class="line">    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:185)</span><br><span class="line">    at java.base&#x2F;java.lang.ClassLoader.loadClass(ClassLoader.java:496)</span><br><span class="line">    ... 5 more</span><br></pre></td></tr></table></figure>

<h2 id="Quick-fix"><a href="#Quick-fix" class="headerlink" title="Quick fix"></a>Quick fix</h2><p>In Windows:</p>
<ol>
<li>Go to C:\Users\Alex.Li\AppData\Local\Android\Sdk\tools\bin</li>
<li>Open sdkmanager.bat with editor</li>
<li>Add <span style="color:blue">  -XX:+IgnoreUnrecognizedVMOptions ‚Äìadd-modules java.se.ee</span> after <span style="color:red">set DEFAULT_JVM_OPTS=‚Äù-Dcom.android.sdklib.toolsdir=%~dp0..‚Äù</span>:<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> DEFAULT_JVM_OPTS="-Dcom.android.sdklib.toolsdir=%~dp0\.." -XX:+IgnoreUnrecognizedVMOptions --add-modules java.se.ee</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>In Linux:</p>
<ol>
<li>Go to <strong><android_sdk_path>/tools/bin</android_sdk_path></strong>, <strong><android_sdk_path></android_sdk_path></strong> is the path where you unzip your Android SDK.</li>
<li>Open sdkmanger with editor</li>
<li>Add <span style="color:blue">  -XX:+IgnoreUnrecognizedVMOptions ‚Äìadd-modules java.se.ee</span> after <span style="color:red">DEFAULT_JVM_OPTS=‚Äô‚Äù-Dcom.android.sdklib.toolsdir=$APP_HOME‚Äù‚Äò‚Äú</span>:<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">DEFAULT_JVM_OPTS='"-Dcom.android.sdklib.toolsdir=$APP_HOME" -XX:+IgnoreUnrecognizedVMOptions --add-modules java.se.ee'</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>ÈóÆÈ¢òËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>canvas demo page</title>
    <url>/2019-05-27/canvas-demo-page/</url>
    <content><![CDATA[<p><span style="color:red">This is a demo page for cool html5 canvas demos. Try to click them!</span><br><span style="color:blue">Beware of performance issues if you trying to access those pages through mobile devices. :)</span><br><a href="/fireball.html">Fire Ball</a><br><a href="/blackhole.html">Black Hole</a></p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>html5</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto recipe: Git</title>
    <url>/2019-05-27/Yocto-recipe-Git/</url>
    <content><![CDATA[<p>This is a short post give a sample of Yocto recipe which fetches source codes from git server.</p>
<a id="more"></a>


<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMMARY &#x3D; &quot;Example&quot;</span><br><span class="line">DESCRIPTION &#x3D; &quot;Recipes for Example&quot;</span><br><span class="line">LICENSE &#x3D; &quot;GPL-2.0&quot;</span><br><span class="line">AUTHOR &#x3D; &quot;Alex Li(Alex.Li@xxxx.com)&quot;</span><br><span class="line">#Path of your LICENSE file and checksum</span><br><span class="line">LIC_FILES_CHKSUM &#x3D; &quot;file:&#x2F;&#x2F;$&#123;COMMON_LICENSE_DIR&#125;&#x2F;GPL-2.0;md5&#x3D;801f80980d171dd6425610833a22dbe6&quot;</span><br><span class="line"></span><br><span class="line">#Build dependencies</span><br><span class="line">DEPENDS +&#x3D; &quot;boost ark-base ark-log&quot;</span><br><span class="line">#Run time dependencies</span><br><span class="line">RDEPENDS_$&#123;PN&#125; &#x3D; &quot;ark-base ark-log boost-program-options&quot;</span><br><span class="line"></span><br><span class="line">#Your git repo address, will be usedby $&#123;SRC_URI&#125;</span><br><span class="line">$&#123;PN&#125;_REPO &#x3D; &quot;github.com&#x2F;codingspirit&#x2F;example.git&quot;</span><br><span class="line">#Set to $&#123;AUTOREV&#125; to automatically fetch the newest commit, you can set specific commit id as well</span><br><span class="line">SRCREV_$&#123;PN&#125; &#x3D; &quot;$&#123;AUTOREV&#125;&quot;</span><br><span class="line"></span><br><span class="line">#Files need to be installed into target need to declare in recipe</span><br><span class="line">FILES_$&#123;PN&#125; +&#x3D; &quot;&#x2F;example&#x2F;*&quot;</span><br><span class="line"></span><br><span class="line">#Set git source, name, protocol, branch, git clone destination. You can use &quot;branch&#x3D;branchname&quot; to  specify branch to require bitbake check after fetching</span><br><span class="line">#&quot;nobranch&#x3D;1&quot; will skip branch check</span><br><span class="line">SRC_URI &#x3D; &quot; \</span><br><span class="line">  git:&#x2F;&#x2F;$&#123;$&#123;PN&#125;_REPO&#125;;name&#x3D;$&#123;PN&#125;;protocol&#x3D;https;nobranch&#x3D;1;destsuffix&#x3D;git&#x2F;$&#123;PN&#125; \ </span><br><span class="line">  &quot;</span><br><span class="line"># Path of source code. We set it to &quot;git&#x2F;$&#123;PN&#125;&quot; in SRC_URI</span><br><span class="line">S &#x3D; &quot;$&#123;WORKDIR&#125;&#x2F;git&#x2F;$&#123;PN&#125;&quot;</span><br><span class="line"># Build path, $&#123;BPN&#125; means &quot;The bare name of the recipe&quot;</span><br><span class="line">B &#x3D; &quot;$&#123;WORKDIR&#125;&#x2F;$&#123;BPN&#125;&quot;</span><br><span class="line"></span><br><span class="line">inherit cmake</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX setup TFTP and NFS</title>
    <url>/2019-05-26/i-MX-setup-TFTP-and-NFS/</url>
    <content><![CDATA[<p>Using TFTP(Trivial File Transfer Protocol) and NFS(Network File System) to load kernel and rootfs can help to reduce operations of flash write efficiently, which can make you EVK board live longer‚Ä¶</p>
<p>This summary is based on <a href="https://github.com/Alexey-Abdulov-Tymphany" target="_blank" rel="noopener">Alexey</a>‚Äòs version, with some modifications according to my experiment.</p>
<a id="more"></a>

<h2 id="TFTP"><a href="#TFTP" class="headerlink" title="TFTP"></a>TFTP</h2><h3 id="Install-necessary-tools"><a href="#Install-necessary-tools" class="headerlink" title="Install necessary tools"></a>Install necessary tools</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install xinetd tftpd tftp</span><br></pre></td></tr></table></figure>

<h3 id="Setup-TFTP"><a href="#Setup-TFTP" class="headerlink" title="Setup TFTP"></a>Setup TFTP</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p /etc/xinetd.d/</span><br><span class="line">nano /etc/xinetd.d/tftp</span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">    protocol        = udp</span><br><span class="line">    port            = 69</span><br><span class="line">    socket_type     = dgram</span><br><span class="line">    <span class="built_in">wait</span>            = yes</span><br><span class="line">    user            = nobody</span><br><span class="line">    server          = /usr/sbin/in.tftpd</span><br><span class="line">    server_args     = /srv/tftp</span><br><span class="line">    <span class="built_in">disable</span>         = no</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>create folder to store tftp files:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir /srv/tftp</span><br><span class="line">sudo chmod -R 777 /srv/tftp</span><br><span class="line">sudo chown -R nobody /srv/tftp</span><br></pre></td></tr></table></figure>

<p>restart tftpd by xinetd:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo /etc/init.d/xinetd restart</span><br></pre></td></tr></table></figure>

<p>copy device trees/kernel image to tftp folder:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cp Image /srv/tftp</span><br><span class="line">cp Image-fsl-imx8mq-evk.dtb /srv/tftp/fsl-imx8mq-evk.dtb</span><br></pre></td></tr></table></figure>

<h2 id="NFS"><a href="#NFS" class="headerlink" title="NFS"></a>NFS</h2><h3 id="Install-necessary-tools-1"><a href="#Install-necessary-tools-1" class="headerlink" title="Install necessary tools"></a>Install necessary tools</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nfs-kernel-server nfs-common portmap</span><br></pre></td></tr></table></figure>

<h3 id="Setup-NFS"><a href="#Setup-NFS" class="headerlink" title="Setup NFS"></a>Setup NFS</h3><p>Add below line at end of <em>/etc/exports</em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;home&#x2F; *(rw,insecure,no_root_squash,no_subtree_check)</span><br></pre></td></tr></table></figure>

<p>restart nfs server:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo /etc/init.d/nfs-kernel-server restart</span><br></pre></td></tr></table></figure>
<p>create copy of your rootfs:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mkdir imx8-evk-dummy</span><br><span class="line"><span class="comment"># goto your yocto image build dir, i.e. imx-yocto-bsp/imx8mmevk_build/tmp/work/imx8mmevk-poky-linux/fsl-image-validation-imx/1.0-r0</span></span><br><span class="line"><span class="built_in">cd</span> &lt;your_yocto_image_build_folder&gt;</span><br><span class="line">cp -r rootfs ~/imx8-evk-dummy</span><br></pre></td></tr></table></figure>

<p><span style="color:red">Notice:</span> Seems long path of rootfs will cause rootfs mounting error, suggest copy your rootfs to a short path</p>
<h2 id="Target"><a href="#Target" class="headerlink" title="Target"></a>Target</h2><p>Interrupt board booting up then type into u-boot terminal:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">setenv nfsroot &lt;path-to-your-rootfs&gt;</span><br><span class="line">setenv image &lt;kernel-image-name-in-tftp-folder&gt;</span><br><span class="line">setenv fdt_file &lt;devid-tree-file-name-in-tftp-folder&gt;</span><br><span class="line">setenv serverip &lt;pc-ip-address&gt;</span><br><span class="line">setenv bootcmd &#39;run netboot&#39;</span><br><span class="line">sav</span><br><span class="line">reset</span><br></pre></td></tr></table></figure>

<p>i.e.:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">setenv nfsroot &#x2F;home&#x2F;alex&#x2F;imx8-evk-dummy&#x2F;rootfs</span><br><span class="line">setenv image Image</span><br><span class="line">setenv fdt_file fsl-imx8mm-evk.dtb</span><br><span class="line">setenv serverip 10.0.1.17</span><br><span class="line">setenv bootcmd &#39;run netboot&#39;</span><br><span class="line">sav</span><br><span class="line">reset</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto QA Issue: Files/directories were installed but not shipped in any package</title>
    <url>/2019-05-02/Yocto-QA-Issue-Files-directories-were-installed-but-not-shipped-in-any-package/</url>
    <content><![CDATA[<p>Yocto has much more strict rules than buildroot, one more QA Issue I met today is when I trying to install some regular files into rootfs by cmake <strong>install</strong>.</p>
<a id="more"></a>
<h2 id="Root-cause"><a href="#Root-cause" class="headerlink" title="Root cause"></a>Root cause</h2><p>Yocto/bitbake need to record every file you trying to install into rootfs, so it can easily remove those files when you trying to remove a package. Special case is When you trying to install <strong>TARGET</strong> by cmake like this:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">install</span>(TARGETS <span class="variable">$&#123;PROJECT_NAME&#125;</span> DESTINATION bin)</span><br></pre></td></tr></table></figure>
<p>Yocto will automatically record <strong>TARGET</strong> in this case if your <strong>inherit cmake</strong> recipe even you didn‚Äôt declare it in recipe explicitly. However, if we trying to install some regular files(like some setting files,scripts etc.) by <strong>install(FILES</strong> or <strong>install(DIRECTORY</strong>, yocto will require us to declare those files explicitly.</p>
<h2 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h2><p>Declare those files in recipe:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FILES_$&#123;PN&#125; +&#x3D; &quot;&#x2F;test&#x2F;*&quot;</span><br><span class="line"># Change &quot;&#x2F;test&#x2F;*&quot; to where your regular file installed</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ÈóÆÈ¢òËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>Yocto QA Issue: -dev package contains non-symlink .so</title>
    <url>/2019-04-29/Yocto-QA-Issue-dev-package-contains-non-symlink-so/</url>
    <content><![CDATA[<p>Last week I met an issue when I trying to include a shared lib(built by cmake) written by me into Yocto project, which has already been verified in buildroot.<br>The root cause is recipe trying to directly install a *.so lib into target filesystem, which doesn‚Äôt meet Yocto QA request. Lib should be installed with version number(i.e. libabc.so.0.0.3), then use a soft link(i.e. libabc.so) link to it.</p>
<a id="more"></a>

<h2 id="Quick-fix"><a href="#Quick-fix" class="headerlink" title="Quick fix"></a>Quick fix</h2><h3 id="If-your-lib-is-using-cmake"><a href="#If-your-lib-is-using-cmake" class="headerlink" title="If your lib is using cmake"></a>If your lib is using cmake</h3><p>Add below line to add lib version information in cmake:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set_target_properties</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PROPERTIES VERSION <span class="number">0.0</span>.<span class="number">3</span> SOVERSION <span class="number">0.0</span>.<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>A better way:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span>_VERSION <span class="string">"0.0.3"</span>)</span><br><span class="line"><span class="keyword">set_target_properties</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PROPERTIES VERSION <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_VERSION&#125; SOVERSION <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_VERSION&#125;)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">"Version: $&#123;$&#123;PROJECT_NAME&#125;_VERSION&#125;"</span>)</span><br></pre></td></tr></table></figure>

<p>After that, when you build it with bitbake, version number will be added to extension automatically, a soft link we mentioned will be created as well.</p>
<h3 id="Force-Yocto-ignore-this-warning"><a href="#Force-Yocto-ignore-this-warning" class="headerlink" title="Force Yocto ignore this warning"></a>Force Yocto ignore this warning</h3><p>It‚Äôs not recommended but you can add below line into your lib recipe to force Yocto ignore this issue:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSANE_SKIP_$&#123;PN&#125; &#x3D; &quot;dev-so&quot;</span><br></pre></td></tr></table></figure>

<p>As matter of fact, you can use this line to avoid almost all <em>QA Issues</em>, just replace <strong>‚Äúdev-so‚Äù</strong> into your error type.</p>
]]></content>
      <categories>
        <category>ÈóÆÈ¢òËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX 8 getting started: cmake package</title>
    <url>/2019-03-28/i-MX-8-getting-started-cmake-package/</url>
    <content><![CDATA[<p>We already started to use cmake instead of writing Makefile by our own in buildroot. Let‚Äôs see how to have a cmake package in Yocto.</p>
<a id="more"></a>

<h2 id="Add-your-source-file-and-CMakeLists"><a href="#Add-your-source-file-and-CMakeLists" class="headerlink" title="Add your source file and CMakeLists"></a>Add your source file and CMakeLists</h2><p>Here we use a simple cpp source file to test c++11 and pthread.</p>
<p><strong>alexcmaketest.cpp</strong> :</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> thread1 = <span class="built_in">std</span>::make_unique&lt;<span class="built_in">std</span>::thread&gt;([]() &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello world from thread1"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">auto</span> thread2 = <span class="built_in">std</span>::make_unique&lt;<span class="built_in">std</span>::thread&gt;([]() &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello world from thread2"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (thread1-&gt;joinable())</span><br><span class="line">        thread1-&gt;join();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (thread2-&gt;joinable())</span><br><span class="line">        thread2-&gt;join();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then prepare your CMakeLists.txt:</p>
<p><strong>CMakeLists.txt</strong>:</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span> FATAL_ERROR)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(alexcmaketest)</span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_FILES <span class="string">"*.cpp"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;SRC_FILES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> pthread)</span><br><span class="line"></span><br><span class="line"><span class="keyword">install</span>(TARGETS <span class="variable">$&#123;PROJECT_NAME&#125;</span> DESTINATION bin)</span><br></pre></td></tr></table></figure>

<p>Notice : <strong>install</strong> should be added into your <strong>CMakeLists.txt</strong> if you want your binary to be installed into rootfs.</p>
<h2 id="Write-your-recipe"><a href="#Write-your-recipe" class="headerlink" title="Write your recipe"></a>Write your recipe</h2><p><strong>cmakeexample_0.1.bb</strong> :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMMARY &#x3D; &quot;cmake example&quot;</span><br><span class="line">DESCRIPTION &#x3D; &quot;Recipe for cmake test&quot;</span><br><span class="line">LICENSE &#x3D; &quot;GPL-2.0&quot;</span><br><span class="line">LIC_FILES_CHKSUM &#x3D; &quot;file:&#x2F;&#x2F;$&#123;COMMON_LICENSE_DIR&#125;&#x2F;GPL-2.0;md5&#x3D;801f80980d171dd6425610833a22dbe6&quot;</span><br><span class="line"></span><br><span class="line">SRC_URI &#x3D; &quot;file:&#x2F;&#x2F;alexcmaketest.cpp \</span><br><span class="line">            file:&#x2F;&#x2F;CMakeLists.txt&quot;</span><br><span class="line"></span><br><span class="line">S &#x3D; &quot;$&#123;WORKDIR&#125;&quot;</span><br><span class="line"></span><br><span class="line">inherit cmake</span><br></pre></td></tr></table></figure>

<p>There is no need to override <strong>do_install</strong> nor <strong>do_config</strong> in this scenario. <strong>cmake.bbclass</strong> has already defined those tasks and we can just inherit from it.<br>If <strong>pkgconfig</strong> is required by your cmake, use <strong>inherit pkgconfig cmake</strong> instead.</p>
<p>Then add your packages into your layer, don‚Äôt forget config your package as <span style="color:red">IMAGE_INSTALL_append</span> in <span style="color:red">layer.conf</span>. After that, you should have a folder tree like this:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">‚îú‚îÄ‚îÄ bitbake-cookerdaemon.log</span><br><span class="line">‚îú‚îÄ‚îÄ conf</span><br><span class="line">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ layer.conf</span><br><span class="line">‚îú‚îÄ‚îÄ COPYING.MIT</span><br><span class="line">‚îú‚îÄ‚îÄ README</span><br><span class="line">‚îú‚îÄ‚îÄ recipes-cmakeexample</span><br><span class="line">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ cmakeexample</span><br><span class="line">‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ cmakeexample-0.1</span><br><span class="line">‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ alexcmaketest.cpp</span><br><span class="line">‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ CMakeLists.txt</span><br><span class="line">‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ cmakeexample_0.1.bb</span><br></pre></td></tr></table></figure>

<h2 id="Build-your-package"><a href="#Build-your-package" class="headerlink" title="Build your package!"></a>Build your package!</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bitbake cmakeexample</span><br></pre></td></tr></table></figure>
<h2 id="Build-your-image"><a href="#Build-your-image" class="headerlink" title="Build your image"></a>Build your image</h2><p>Of course don‚Äôt forget to re-build your image.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bitbake fsl-image-qt5-validation-imx</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX 8 getting started: create your kernel module</title>
    <url>/2019-03-26/i-MX-8-getting-started-create-your-kernel-module/</url>
    <content><![CDATA[<p>The normal way that using yocto to do kernel development is really painful‚Ä¶ Maybe try out-of-tree build is a better choice.</p>
<a id="more"></a>

<h2 id="Create-and-add-your-layer"><a href="#Create-and-add-your-layer" class="headerlink" title="Create and add your layer"></a>Create and add your layer</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bitbake-layers create-layer --example-recipe-name alexkernel meta-alexkernel</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bitbake-layers add-layer ../sources/meta-alexkernel/</span><br></pre></td></tr></table></figure>
<p>Or you can use exist layer instead, just create recipe files under your layer.</p>
<h2 id="Add-your-source-code-and-Makefile"><a href="#Add-your-source-code-and-Makefile" class="headerlink" title="Add your source code and Makefile"></a>Add your source code and Makefile</h2><p><strong>alex_module.c</strong>:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/printk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/init.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> __<span class="function">init <span class="title">alex_module_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    printk(KERN_INFO <span class="string">"Hello from alex module!\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __<span class="function"><span class="built_in">exit</span> <span class="title">alex_module_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    printk(KERN_INFO <span class="string">"Bye from alex module!\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(alex_module_init);</span><br><span class="line"></span><br><span class="line">module_exit(alex_module_exit);</span><br><span class="line"></span><br><span class="line">MODULE_AUTHOR(<span class="string">"Coding Spirit &lt;coding@spirit.com&gt;"</span>);</span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL v2"</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Makefile</strong>:</p>
<figure class="highlight mk"><table><tr><td class="code"><pre><span class="line">obj-m := alex_module.o</span><br><span class="line"></span><br><span class="line">SRC := <span class="variable">$(<span class="built_in">shell</span> pwd)</span></span><br><span class="line"></span><br><span class="line"><span class="section">all:</span></span><br><span class="line">	<span class="variable">$(MAKE)</span> -C <span class="variable">$(KERNEL_SRC)</span> M=<span class="variable">$(SRC)</span></span><br><span class="line"></span><br><span class="line"><span class="section">modules_install:</span></span><br><span class="line">	<span class="variable">$(MAKE)</span> -C <span class="variable">$(KERNEL_SRC)</span> M=<span class="variable">$(SRC)</span> modules_install</span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -f *.o *~ core .depend .*.cmd *.ko *.mod.c</span><br><span class="line">	rm -f Module.markers Module.symvers modules.order</span><br><span class="line">	rm -rf .tmp_versions Modules.symvers</span><br></pre></td></tr></table></figure>

<h2 id="Modify-recipe-files-and-conf-file"><a href="#Modify-recipe-files-and-conf-file" class="headerlink" title="Modify recipe files and conf file"></a>Modify recipe files and conf file</h2><p><strong>alexkernel_0.1.bb</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMMARY &#x3D; &quot;kernel module example&quot;</span><br><span class="line">DESCRIPTION &#x3D; &quot;Recipe created by bitbake-layers&quot;</span><br><span class="line">LICENSE &#x3D; &quot;GPL-2.0&quot;</span><br><span class="line">LIC_FILES_CHKSUM &#x3D; &quot;file:&#x2F;&#x2F;$&#123;COMMON_LICENSE_DIR&#125;&#x2F;GPL-2.0;md5&#x3D;801f80980d171dd6425610833a22dbe6&quot;</span><br><span class="line"></span><br><span class="line">inherit module</span><br><span class="line"></span><br><span class="line">SRC_URI &#x3D; &quot;file:&#x2F;&#x2F;Makefile \</span><br><span class="line">            file:&#x2F;&#x2F;alex_module.c&quot;</span><br><span class="line"></span><br><span class="line">S &#x3D; &quot;$&#123;WORKDIR&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>Notice: bitbake support inheritance. Inherit from a exist bbclass will be much easier than rewrite one all by yourself. Take a look at <a href="https://github.com/openembedded/openembedded-core/tree/master/meta/classes" target="_blank" rel="noopener">openembedded github</a> to check how did they implement a base bbclass. BTW <strong>cmake.bbclass</strong> might be useful if you trying to support cmake. </p>
<p><strong>layer.conf</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># We have a conf and classes directory, add to BBPATH</span><br><span class="line">BBPATH .&#x3D; &quot;:$&#123;LAYERDIR&#125;&quot;</span><br><span class="line"></span><br><span class="line"># We have recipes-* directories, add to BBFILES</span><br><span class="line">BBFILES +&#x3D; &quot;$&#123;LAYERDIR&#125;&#x2F;recipes-*&#x2F;*&#x2F;*.bb \</span><br><span class="line">            $&#123;LAYERDIR&#125;&#x2F;recipes-*&#x2F;*&#x2F;*.bbappend&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">IMAGE_INSTALL_append +&#x3D; &quot;alexkernel&quot;</span><br><span class="line">KERNEL_MODULE_AUTOLOAD +&#x3D; &quot;alex_module&quot;</span><br><span class="line"></span><br><span class="line">BBFILE_COLLECTIONS +&#x3D; &quot;meta-alexkernel&quot;</span><br><span class="line">BBFILE_PATTERN_meta-alexkernel &#x3D; &quot;^$&#123;LAYERDIR&#125;&#x2F;&quot;</span><br><span class="line">BBFILE_PRIORITY_meta-alexkernel &#x3D; &quot;6&quot;</span><br><span class="line">LAYERSERIES_COMPAT_meta-alexkernel &#x3D; &quot;sumo&quot;</span><br></pre></td></tr></table></figure>

<p>Notice: Module will automatically get loaded when system booting up if <strong>KERNEL_MODULE_AUTOLOAD</strong> was set.</p>
<p>We should have a folder tree as below:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">‚îú‚îÄ‚îÄ conf</span><br><span class="line">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ layer.conf</span><br><span class="line">‚îú‚îÄ‚îÄ COPYING.MIT</span><br><span class="line">‚îú‚îÄ‚îÄ README</span><br><span class="line">‚îî‚îÄ‚îÄ recipes-alexkernel</span><br><span class="line">    ‚îî‚îÄ‚îÄ alexkernel</span><br><span class="line">        ‚îú‚îÄ‚îÄ alexkernel-0.1</span><br><span class="line">        ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ alex_module.c</span><br><span class="line">        ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Makefile</span><br><span class="line">        ‚îî‚îÄ‚îÄ alexkernel_0.1.bb</span><br></pre></td></tr></table></figure>

<h2 id="rebuild-your-rootfs-and-image"><a href="#rebuild-your-rootfs-and-image" class="headerlink" title="rebuild your rootfs and image"></a>rebuild your rootfs and image</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake fsl-image-qt5-validation-imx</span><br></pre></td></tr></table></figure>

<h2 id="Check-your-environment-variables-by-bitbake-e"><a href="#Check-your-environment-variables-by-bitbake-e" class="headerlink" title="Check your environment variables by bitbake -e"></a>Check your environment variables by <strong>bitbake -e</strong></h2><p><strong>bitbake -e</strong> is a very useful command when you trying to debug build problem.</p>
<p>i.e. Check the rootfs folder of your image:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake -e &lt;image&gt; | grep ^IMAGE_ROOTFS=</span><br></pre></td></tr></table></figure>
<p>Check the ${WORKDIR} of your recipe:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bitbake -e &lt;recipe&gt; | grep ^WORKDIR=</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX 8 getting started: create your general layer</title>
    <url>/2019-03-22/i-MX-8-getting-started-create-your-general-layer/</url>
    <content><![CDATA[<p>This post will tell you how to create your own general layer with a ‚Äúhello world‚Äù app to be built into your EVK.</p>
<a id="more"></a>
<p>Before start, you should run <strong>setup-environment</strong> first.</p>
<h2 id="Create-your-layer"><a href="#Create-your-layer" class="headerlink" title="Create your layer"></a>Create your layer</h2><h3 id="Create-layer-example-by-bitbake-layers"><a href="#Create-layer-example-by-bitbake-layers" class="headerlink" title="Create layer example by bitbake-layers"></a>Create layer example by bitbake-layers</h3><p>Use <strong>bitbake-layers create-layer &lt;layer name&gt;</strong> to create a general layer example.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> imx-yocto-bsp/<span class="built_in">source</span> <span class="comment"># you also can create your layer in other path</span></span><br><span class="line">$ bitbake-layers create-layer meta-alexlayer</span><br></pre></td></tr></table></figure>

<p>Notice: <strong>yocto-layer</strong> has been deprecated after Yocto 2.5. See <a href="https://www.yoctoproject.org/docs/current/ref-manual/ref-manual.html#detailed-supported-distros" target="_blank" rel="noopener">yocto ref manual</a> for more details.</p>
<blockquote>
<p>The yocto-bsp, yocto-kernel, and yocto-layer scripts previously shipped with poky but not in OpenEmbedded-Core have been removed. These scripts are not maintained and are outdated. In many cases, they are also limited in scope. The bitbake-layers create-layer command is a direct replacement for yocto-layer</p>
</blockquote>
<p>It will help you to create a layer with priority of 6. To change to other priority, add option ‚Äú‚Äê‚Äêpriority‚Äù or edit <strong>BBFILE_PRIORITY</strong> after creation.</p>
<h3 id="Modification"><a href="#Modification" class="headerlink" title="Modification"></a>Modification</h3><p>Go to your layer path, add some stuff into your <em>conf/layer.conf</em>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">IMAGE_INSTALL_append +&#x3D; &quot;example&quot;</span><br><span class="line">LAYERSERIES_COMPAT_meta-alexlayer &#x3D; &quot;sumo&quot;</span><br></pre></td></tr></table></figure>

<p>IMAGE_INSTALL_append will tell bitbake to install your app into image.<br>Notice: It‚Äôs required by Yocto Project Compatible version 2 standard to set <strong>LAYERSERIES_COMPAT</strong>. There will be a warning if you didn‚Äôt do so. see <a href="https://www.yoctoproject.org/docs/latest/ref-manual/ref-manual.html" target="_blank" rel="noopener">yocto ref manual</a> for more details.</p>
<blockquote>
<p>Note</p>
<p>Setting LAYERSERIES_COMPAT is required by the Yocto Project Compatible version 2 standard. The OpenEmbedded build system produces a warning if the variable is not set for any given layer.</p>
</blockquote>
<p>Then add your source code:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> meta-alexlayer/recipes-example/example</span><br><span class="line">$ mkdir example-0.1</span><br><span class="line">$ <span class="built_in">cd</span> example-0.1</span><br><span class="line">$ touch alexhello.cpp</span><br></pre></td></tr></table></figure>
<p>my example here :</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// alexhello.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hello world from alexlayer"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then modify your recipe file <strong>example_0.1.bb</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMMARY &#x3D; &quot;bitbake-layers recipe&quot;</span><br><span class="line">DESCRIPTION &#x3D; &quot;Recipe created by bitbake-layers&quot;</span><br><span class="line">LICENSE &#x3D; &quot;MIT&quot;</span><br><span class="line">LIC_FILES_CHKSUM &#x3D; &quot;file:&#x2F;&#x2F;$&#123;COMMON_LICENSE_DIR&#125;&#x2F;MIT;md5&#x3D;0835ade698e0bcf8506ecda2f7b4f302&quot;</span><br><span class="line"></span><br><span class="line">TARGET_CC_ARCH +&#x3D; &quot;$&#123;LDFLAGS&#125;&quot;</span><br><span class="line"></span><br><span class="line">SRC_URI &#x3D; &quot;file:&#x2F;&#x2F;alexhello.cpp&quot;</span><br><span class="line"></span><br><span class="line">S &#x3D; &quot;$&#123;WORKDIR&#125;&quot;</span><br><span class="line"></span><br><span class="line">do_compile() &#123;</span><br><span class="line">    $&#123;CXX&#125; alexhello.cpp -o alexhello</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">do_install() &#123;</span><br><span class="line">    install -d $&#123;D&#125;$&#123;bindir&#125;</span><br><span class="line">    install -m 0755 alexhello $&#123;D&#125;$&#123;bindir&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">python do_build() &#123;</span><br><span class="line">    bb.plain(&quot;***********************************************&quot;);</span><br><span class="line">    bb.plain(&quot;*                                             *&quot;);</span><br><span class="line">    bb.plain(&quot;*  Example recipe created by bitbake-layers   *&quot;);</span><br><span class="line">    bb.plain(&quot;*                                             *&quot;);</span><br><span class="line">    bb.plain(&quot;***********************************************&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Notice: Here we use <span style="color:red"><strong>TARGET_CC_ARCH += ‚Äú${LDFLAGS}‚Äù</strong></span> to avoid <strong>‚ÄúNo GNU_HASH in the elf binary‚Äù</strong> error when QA check, see <a href="https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html" target="_blank" rel="noopener">mega-manual</a> for more details.</p>
<blockquote>
<p>25.10.8. Default Linker Hash Style Changed</p>
<p>The default linker hash style for gcc-cross is now ‚Äúsysv‚Äù in order to catch recipes that are building software without using the OpenEmbedded LDFLAGS. This change could result in seeing some ‚ÄúNo GNU_HASH in the elf binary‚Äù QA issues when building such recipes. You need to fix these recipes so that they use the expected LDFLAGS. Depending on how the software is built, the build system used by the software (e.g. a Makefile) might need to be patched. However, sometimes making this fix is as simple as adding the following to the recipe:</p>
<pre><code>TARGET_CC_ARCH += &quot;${LDFLAGS}&quot;</code></pre></blockquote>
<p>After those steps, you should have a folder like this:<br><img src="/2019-03-22/i-MX-8-getting-started-create-your-general-layer/folder_tree.png" alt></p>
<h2 id="Add-your-layer-and-build"><a href="#Add-your-layer-and-build" class="headerlink" title="Add your layer and build"></a>Add your layer and build</h2><p>There are two ways to add your layer into build:</p>
<h3 id="Use-bitbake-layers-add-layer"><a href="#Use-bitbake-layers-add-layer" class="headerlink" title="Use bitbake-layers add-layer"></a>Use <strong>bitbake-layers add-layer</strong></h3><p>Use <strong>bitbake-layers add-layer &lt;layer name&gt;</strong> to add a layer and build it. Before this, you should source <strong>setup-environment</strong>.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bitbake-layers add-layer meta-alexlayer</span><br><span class="line">$ bitbake example</span><br></pre></td></tr></table></figure>

<h3 id="Modify-script-provided-by-nxp"><a href="#Modify-script-provided-by-nxp" class="headerlink" title="Modify script provided by nxp"></a>Modify script provided by nxp</h3><p>Modify <strong>fsl-setup-release.sh</strong>, add your layer path to ‚ÄúBBLAYERS‚Äù:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"BBLAYERS += \" \$&#123;BSPDIR&#125;/sources/meta-qt5 \""</span> &gt;&gt; <span class="variable">$BUILD_DIR</span>/conf/bblayers.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"BBLAYERS += \" \$&#123;BSPDIR&#125;/sources/meta-alexlayer \""</span> &gt;&gt; <span class="variable">$BUILD_DIR</span>/conf/bblayers.conf <span class="comment"># new layer</span></span><br></pre></td></tr></table></figure>
<p>Then source it and <strong>bitbake</strong> your new layer:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ DISTRO=fsl-imx-xwayland MACHINE=imx8mmevk <span class="built_in">source</span> fsl-setup-release.sh -b build-xwayland</span><br><span class="line">$ bitbake example</span><br></pre></td></tr></table></figure>

<h2 id="Rebuild-your-image-file"><a href="#Rebuild-your-image-file" class="headerlink" title="Rebuild your image file"></a>Rebuild your image file</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bitbake fsl-image-qt5-validation-imx</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>i.MX 8 getting started: setup environment</title>
    <url>/2019-03-21/i-MX-8-getting-started-setup-environment/</url>
    <content><![CDATA[<p>This post will show you how to setup environment(Linux) for NXP i.MX 8 and build a image fot i.MX8 Mini EVK. If you trying to build a Android image, close this post.</p>
<a id="more"></a>

<h2 id="Before-start"><a href="#Before-start" class="headerlink" title="Before start"></a>Before start</h2><p>Check your host environment:</p>
<ul>
<li>Fedora, openSUSE, CentOS, Debian, or Ubuntu(newer then 14.04, I test with 18.04)</li>
<li>120G disk space if graphical support is need</li>
<li>Git is already setup on your machine</li>
</ul>
<h2 id="Install-tools"><a href="#Install-tools" class="headerlink" title="Install tools"></a>Install tools</h2><p>There are some packages you might haven‚Äôt installed but required by Yocto:</p>
<ul>
<li>chrpath</li>
<li>gawk</li>
<li>u-boot-tools</li>
</ul>
<p>use <strong>apt install</strong> install all of them.</p>
<p>Also for <strong>repo</strong>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl https://storage.googleapis.com/git-repo-downloads/repo  &gt; /usr/<span class="built_in">local</span>/bin/repo</span><br><span class="line">$ chmod a+x /usr/<span class="built_in">local</span>/bin/repo</span><br></pre></td></tr></table></figure>
<p>You can choose your own repo install path, but make sure this path was added into <strong>PATH</strong>.</p>
<h2 id="Yocto-project-setup"><a href="#Yocto-project-setup" class="headerlink" title="Yocto project setup"></a>Yocto project setup</h2><p>We will use i.MX official repo to init.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir imx-yocto-bsp </span><br><span class="line">$ <span class="built_in">cd</span> imx-yocto-bsp </span><br><span class="line">$ repo init -u https://source.codeaurora.org/external/imx/imx-manifest  -b imx-linux-sumo -m imx-4.14.78-1.0.0_ga.xml </span><br><span class="line">$ repo sync</span><br></pre></td></tr></table></figure>
<p>Use <strong>-b &lt;branch-name&gt;</strong> to switch to use other branch if you want. Check on <a href="https://source.codeaurora.org/external/imx/imx-manifest" target="_blank" rel="noopener">https://source.codeaurora.org/external/imx/imx-manifest</a> to find all available branches.</p>
<h2 id="Start-build"><a href="#Start-build" class="headerlink" title="Start build"></a>Start build</h2><h3 id="Choose-one-graphical-backend-for-your-image"><a href="#Choose-one-graphical-backend-for-your-image" class="headerlink" title="Choose one graphical backend for your image"></a>Choose one graphical backend for your image</h3><ul>
<li>fsl-imx-x11 </li>
<li>fsl-imx-wayland</li>
<li>fsl-imx-xwayland</li>
<li>fsl-imx-fb<br>For i.MX8, only fsl-imx-wayland and fsl-imx-xwayland are supported.<br>Then run:<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ DISTRO=fsl-imx-xwayland MACHINE=imx8mmevk <span class="built_in">source</span> fsl-setup-release.sh -b build-xwayland </span><br><span class="line">$ bitbake fsl-image-qt5-validation-imx</span><br></pre></td></tr></table></figure>
Set <strong>MACHINE</strong> to other variable if you are not using i.MX8 Mini EVK. Use <strong>-b</strong> in <strong>fsl-setup-release</strong> to specify build dir.</li>
</ul>
<p>Summaries of my build details:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Build Configuration:</span><br><span class="line">BB_VERSION           = <span class="string">"1.38.0"</span></span><br><span class="line">BUILD_SYS            = <span class="string">"x86_64-linux"</span></span><br><span class="line">NATIVELSBSTRING      = <span class="string">"ubuntu-18.04"</span></span><br><span class="line">TARGET_SYS           = <span class="string">"aarch64-poky-linux"</span></span><br><span class="line">MACHINE              = <span class="string">"imx8mmevk"</span></span><br><span class="line">DISTRO               = <span class="string">"fsl-imx-xwayland"</span></span><br><span class="line">DISTRO_VERSION       = <span class="string">"4.14-sumo"</span></span><br><span class="line">TUNE_FEATURES        = <span class="string">"aarch64"</span></span><br><span class="line">TARGET_FPU           = <span class="string">""</span></span><br><span class="line">meta                 </span><br><span class="line">meta-poky            = <span class="string">"HEAD:64a257fa22126c4a40ff7e03424a404e360ebe1e"</span></span><br><span class="line">meta-oe              </span><br><span class="line">meta-multimedia      = <span class="string">"HEAD:2bb21ef27c4b0c9d52d30b3b2c5a0160fd02b966"</span></span><br><span class="line">meta-freescale       = <span class="string">"HEAD:407c6cf408969445031a492e2d25e0e2749582ea"</span></span><br><span class="line">meta-freescale-3rdparty = <span class="string">"HEAD:88a29631809d1af0df618245430db29f2a7012b5"</span></span><br><span class="line">meta-freescale-distro = <span class="string">"HEAD:f7e2216e93aff14ac32728a13637a48df436b7f4"</span></span><br><span class="line">meta-bsp             </span><br><span class="line">meta-sdk             = <span class="string">"HEAD:9867dae67c158e0820bf226bd18b792623e99b25"</span></span><br><span class="line">meta-browser         = <span class="string">"HEAD:75640e14e325479c076b6272b646be7a239c18aa"</span></span><br><span class="line">meta-gnome           </span><br><span class="line">meta-networking      </span><br><span class="line">meta-python          </span><br><span class="line">meta-filesystems     = <span class="string">"HEAD:2bb21ef27c4b0c9d52d30b3b2c5a0160fd02b966"</span></span><br><span class="line">meta-qt5             = <span class="string">"HEAD:d4e7f73d04e8448d326b6f89908701e304e37d65"</span></span><br></pre></td></tr></table></figure>

<h2 id="Restart-a-build-environment"><a href="#Restart-a-build-environment" class="headerlink" title="Restart a build environment"></a>Restart a build environment</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">source</span> setup-environment &lt;build-dir&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Flash"><a href="#Flash" class="headerlink" title="Flash"></a>Flash</h2><p>Using <a href="https://github.com/NXPmicro/mfgtools" target="_blank" rel="noopener">mfgtools</a> provided by nxp to flash.</p>
<p>Flash to emmc:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo uuu -b emmc_all imx-boot-imx8mmevk-sd.bin-flash_evk fsl-image-validation-imx-imx8mmevk.sdcard.bz2/*</span><br></pre></td></tr></table></figure>

<p>In develop stage, suggest to use TFTP and NFS for a longer flash life span. See <a href="https://lzqblog.top/2019-05-26/i-MX-setup-TFTP-and-NFS/">i.MX setup TFTP and NFS</a> for more details.</p>
]]></content>
      <categories>
        <category>Á≥ªÁªüÊûÑÂª∫</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Yocto</tag>
      </tags>
  </entry>
  <entry>
    <title>C/C++ mixed programming error: undefined reference</title>
    <url>/2019-03-18/C-C-mixed-programming-error-undefined-reference/</url>
    <content><![CDATA[<p>The solution for this issue is very sample, add <span style="color:red">#ifdef __cplusplus extern ‚ÄúC‚Äù</span> in your C header files. I have seen a lots of C header files with this code, I also know that those codes will help C code compatible with C++ code, but I had never try to dig in to find out why those codes works until few weeks ago I was trying to call a lib written by C but lib headers didn‚Äôt surround with <span style="color:red">#ifdef __cplusplus extern ‚ÄúC‚Äù</span>.(Shame on me) This post will tell you why.</p>
<a id="more"></a>

<h2 id="Why-‚Äúundefined-reference‚Äù"><a href="#Why-‚Äúundefined-reference‚Äù" class="headerlink" title="Why ‚Äúundefined reference‚Äù?"></a>Why ‚Äúundefined reference‚Äù?</h2><p>Normally, You can see this ‚Äúundefined reference‚Äù error when compiler can‚Äôt find your functions‚Äô definition. But if you click into this post, I‚Äôm pretty sure that you have checked your code more than once. The reason why you meet this error while mixing programming is C and C++ compilers have different name mangling rules while compiling. In C, one function only can have one definition, but in C++ polymorphism was added so method can have same name but different version definitions with different parameter lists.<br>i.e. you have a function named foo in C:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;&#125;;</span><br></pre></td></tr></table></figure>
<p>Meanwhile you have 2 method in C++:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">char</span> a)</span></span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>C compiler might rename it as <strong>__foo</strong> in assembly. But C++ have to do some changes to make sure method name is unique in assembly, normally in C++ compiler it might be renamed with parameter list like <strong>__Z1_foo_int</strong> and <strong>__Z1_foo_char</strong>. There will be linking error like ‚Äúundefined reference‚Äù when your trying to link a C lib which was compiled by C compiler and your C header files didn‚Äôt add <span style="color:red">#ifdef <strong>cplusplus extern ‚ÄúC‚Äù</strong></span>, because C++ compiler trying to find a symbol named **Z1_foo_int** but it can‚Äôt because it was renamed as <strong>__foo</strong> by C compiler.</p>
<h2 id="Why-extern-‚ÄúC‚Äù-can-solve-this"><a href="#Why-extern-‚ÄúC‚Äù-can-solve-this" class="headerlink" title="Why extern ‚ÄúC‚Äù can solve this?"></a>Why extern ‚ÄúC‚Äù can solve this?</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**** your declarations *****/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>C compiler will ignore those codes because of marco <strong>#ifdef __cplusplus</strong>, it‚Äôs easy to understand. But if you are using a C++ compiler, this <strong>extern ‚ÄúC‚Äù</strong> will be active and tell C++ compiler ‚Äúyou should link those functions with C name mangling rules‚Äù. In this case, C++ can find function definitions correctly in your C lib.</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>cmake notes</title>
    <url>/2019-03-04/cmake-notes/</url>
    <content><![CDATA[<p>Take notes!</p>
<a id="more"></a>

<h2 id="Use-pkg-config-in-cmake"><a href="#Use-pkg-config-in-cmake" class="headerlink" title="Use pkg-config in cmake"></a>Use pkg-config in cmake</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">#require gstreamer and check version, $&#123;GST&#125; is an user defined prefix for _LIBRARIES/_INCLUDE_DIRS/_CFLAGS_OTHER</span></span><br><span class="line">pkg_check_modules(GST REQUIRED gstreamer-<span class="number">1.0</span>&gt;=<span class="number">1.10</span></span><br><span class="line">                  gstreamer-app-<span class="number">1.0</span>&gt;=<span class="number">1.10</span>)</span><br><span class="line"><span class="comment">#Then we can get hidden variables $&#123;GST_LIBRARIES&#125; $&#123;GST_INCLUDE_DIRS&#125; $&#123;GST_CFLAGS_OTHER&#125;</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> boost_log pthread</span><br><span class="line">                  <span class="variable">$&#123;GST_LIBRARIES&#125;</span>)</span><br><span class="line"><span class="keyword">target_include_directories</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PUBLIC <span class="variable">$&#123;GST_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"><span class="keyword">target_compile_options</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PUBLIC <span class="variable">$&#123;GST_CFLAGS_OTHER&#125;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Add-all-files-under-a-folder-i-e-add-all-source-files"><a href="#Add-all-files-under-a-folder-i-e-add-all-source-files" class="headerlink" title="Add all files under a folder(i.e. add all source files)"></a>Add all files under a folder(i.e. add all source files)</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment">#option 1: use file(), store files into variable SRC_FILES</span></span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_FILES <span class="string">"*.cpp"</span>)</span><br><span class="line"><span class="comment">#if there are sub-dirs should be searched, use recursive</span></span><br><span class="line"><span class="keyword">file</span>(GLOB_RECURSE SRC_FILES <span class="string">"*.cpp"</span>)</span><br><span class="line"><span class="comment">#option 2: use aux_source_directory(), store source files into variable SRC_FILES</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. SRC_FILES)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>cmake</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ standard exceptions</title>
    <url>/2019-02-28/C-standard-exceptions/</url>
    <content><![CDATA[<p>‚Ä¶</p>
<a id="more"></a>

<ul>
<li>logic_error(It reports errors that are a consequence of faulty logic within the program such as violating logical preconditions or class invariants and may be preventable.)<ul>
<li>invalid_argument</li>
<li>domain_error</li>
<li>length_error</li>
<li>out_of_range</li>
<li>future_error(C++11)</li>
</ul>
</li>
<li>bad_optional_access(C++17)</li>
<li>runtime_error(It reports errors that are due to events beyond the scope of the program and can not be easily predicted.)<ul>
<li>range_error</li>
<li>overflow_error</li>
<li>underflow_error</li>
<li>regex_error(C++11)</li>
<li>nonexistent_local_time(C++20)</li>
<li>ambiguous_local_time(C++20)</li>
<li>tx_exception(TM TS)</li>
<li>system_error(C++11)</li>
<li>ios_base::failure(C++11)</li>
<li>filesystem::filesystem_error(C++17)</li>
</ul>
</li>
<li>bad_typeid</li>
<li>bad_cast<ul>
<li>bad_any_cast(C++17)</li>
</ul>
</li>
<li>bad_weak_ptr(C++11)</li>
<li>bad_function_call(C++11)</li>
<li>bad_alloc(report failure to allocate storage)<ul>
<li>bad_array_new_length(C++11)</li>
</ul>
</li>
<li>bad_exception</li>
<li>ios_base::failure(until C++11)</li>
<li>bad_variant_access(C++17)</li>
</ul>
<p>For more details, refer to <a href="https://en.cppreference.com/w/cpp/error/exception" target="_blank" rel="noopener">cppreference</a></p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux C/C++ debugging: using adb and gdb</title>
    <url>/2019-02-16/Linux-C-C-debugging-using-adb-and-gdb/</url>
    <content><![CDATA[<p>Âú®Â§ßÂ≠¶ÁöÑÊó∂ÂÄôÂ∞±‰∏ÄÁõ¥Áî®gdb + gdbserver Êù•ËøúÁ®ãË∞ÉËØïC++Ôºå ÂâçÂπ¥ÂºÄÂßãÁî®VS CodeÂêéÂú®Êùø‰∏äÈÉ®ÁΩ≤Á®ãÂ∫èÂêéÈÖçÂêàVS CodeË∞ÉËØïÊõ¥ÊòØÁàΩÂà∞‰∏çË°åÔºàÊ†πÊú¨ÂÅú‰∏ç‰∏ãÊù•ÔºâÔºåÊúâÁßçÊú¨Âú∞ÂºÄÂèëÁöÑÊÑüËßâÔºå ÂÜç‰πü‰∏çÁî®Âú®ËõãÁñºÁöÑGDBÈáåÈù¢Êï≤‚Äòb‚Äô ‚Äòr‚Äô ‚Äòc‚ÄôÔºå ÂìàÂìà„ÄÇ<br>ÊúÄËøëÁöÑÈ°πÁõÆÂØπadbÁöÑÊîØÊåÅÈùûÂ∏∏‰∏çÈîôÔºåusb‰∏ä‰º†‰∏ãËΩΩÈÄüÂ∫¶ÊØîssh‰∏çÁü•ÈÅìÈ´òÂà∞Âì™ÈáåÂéª‰∫Ü„ÄÇ‰ªäÂ§©Á™ÅÁÑ∂ÊÉ≥Âà∞‰πãÂâçÂÜôAndroid appÁöÑÊó∂ÂÄôÈÉΩËÉΩÈÄöËøáusbÂíåadbËøõË°åË∞ÉËØïÔºå Áé∞Âú®Âú®Linux‰∏ãË∞ÉC++Â∫îËØ•‰πüÂèØ‰ª•ÈÄöËøáusb+adbÂÆûÁé∞Ôºå ‰∏∫‰ªÄ‰πà‰∏çËØï‰∏Ä‰∏ãÂë¢Ôºü</p>
<a id="more"></a>

<h2 id="gdb-gdbserver"><a href="#gdb-gdbserver" class="headerlink" title="gdb + gdbserver"></a>gdb + gdbserver</h2><p>Êó¢ÁÑ∂Ë¶ÅË∞ÉC/C++Ôºå Ëøô‰∏§ÂÖÑÂºüÂü∫Êú¨‰∏äÊòØÂøÖÂ§á‰∫Ü(VC++Á®ãÂ∫èÂëòË°®Á§∫Âπ∂‰∏çÈúÄË¶Å)„ÄÇ Âú®target device‰∏äÈÉ®ÁΩ≤ÂæÖË∞ÉËØïÁ®ãÂ∫èÂπ∂ÂêØÂä®gdbserverÔºåÁÑ∂ÂêéÂÜçÂú®host‰∏ä‰ΩøÁî®gdb target remoteËøûÊé•Ôºå Ë∑®Âπ≥Âè∞Ë∞ÉËØïÂèòÂæóÈùûÂ∏∏ÂÆπÊòìÔºå ÈÖçÂêàVS Code‰ΩøÁî®ÁöÑ‰æãÂ≠êÂèØ‰ª•ÂèÇËÄÉ<a href="https://github.com/codingspirit/VoiceSpirit/tree/develop/.vscode" target="_blank" rel="noopener">ËøôÈáå</a></p>
<h2 id="adb-forward"><a href="#adb-forward" class="headerlink" title="adb forward"></a>adb forward</h2><p>gdbÂíågdbserverÂèØ‰ª•Êèê‰æõË∞ÉËØïÁöÑserverÂíåclientÔºå Âè™Ë¶ÅclientËÉΩÂ§üËÆøÈóÆÂà∞serverÁöÑÊåáÂÆöÁ´ØÂè£ÔºåË∞ÉËØïÂ∞±ËÉΩÂ§üËøõË°å„ÄÇÈÄöÂ∏∏Êàë‰ª¨‰ΩøÁî®gdb+gdbserverÔºå target deviceÂíåhostÂú®‰∏Ä‰∏™Â±ÄÂüüÁΩëÂÜÖÔºå ÈÄöËøásocketËÉΩÂæàËΩªÊùæÂú∞ÂÆûÁé∞ËøûÊé•„ÄÇ Â¶ÇÊûúÊàë‰ª¨Ë¶ÅÈÄöËøáusbÂÆûÁé∞Ëøô‰∏™ËøûÊé•Ôºå ÂèØ‰ª•ÈÄöËøáadb forwardÂÆûÁé∞„ÄÇ Â¶ÇÊûú‰Ω†Âú®Android‰∏äÂÜôËøáÈÄöËøásocketÈÄö‰ø°ÁöÑappÔºà‰∏çÁ¶ÅÊÉ≥Ëµ∑‰∫ÜÂÅöÊØïËÆæÁöÑÊó∂ÂÄôÔºâÔºå Âü∫Êú¨‰∏äÈÉΩ‰ºöÁî®Âà∞Ëøô‰∏™cmdÔºå Âè™ÈúÄ‰∏ÄË°åÂëΩ‰ª§ <strong>adb forward tcp:1234 tcp:5678</strong>, ÊâÄÊúâÂú®hostÁ´Ø1234Á´ØÂè£ÁöÑÈÄö‰ø°ÈÉΩ‰ºöË¢´ÈáçÂÆöÂêëÂà∞targetÁ´ØÁöÑ5678Á´ØÂè£ÔºåË∞ÉËØïsocketÊó∂ËΩªÊùæÊÑâÂø´ÔºÅ Êúâ‰∫ÜÂÆÉÁöÑÂ∏ÆÂä©Ôºå Â∞±ËÉΩÈÄöËøáusbÁ∫øÂÆûÁé∞socketËøûÊé•‰∫Ü</p>
<h2 id="Step-By-Step"><a href="#Step-By-Step" class="headerlink" title="Step By Step"></a>Step By Step</h2><p>Let‚Äôs have a quick step by step instruction:</p>
<p>First of all, build your C/C++ app and upload your app binary to target device.</p>
<p>Then we start <strong>gdbserver</strong> on target device:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#target device</span></span><br><span class="line">gdbserver :<span class="variable">$&#123;TARGET_PORT&#125;</span> <span class="variable">$&#123;EXEC_FILE&#125;</span></span><br></pre></td></tr></table></figure>
<p>i.e. :  <strong>gdbserver :1234 /usr/bin/test_app</strong>. gdbserver will listening at port 1234 and waiting for client to connect.</p>
<p>After that we can use <strong>adb forward</strong> on host PC(make sure usb connection is good and adb shell works well):</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#host</span></span><br><span class="line">adb forward tcp:<span class="variable">$&#123;HOST_PORT&#125;</span> tcp:<span class="variable">$&#123;TARGET_PORT&#125;</span></span><br></pre></td></tr></table></figure>
<p>All the communication data on specific host port will be redirected to target server port.<br>i.e. : <strong>adb forward tcp:4567 tcp:1234</strong>. Then all the data send to <strong>localhost:4567</strong> on host PC will be redirected to target device <strong>1234</strong> port.</p>
<p>Last step, start gdb on host PC then connect to target gdbserver:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#host</span></span><br><span class="line">$ gdb</span><br><span class="line"><span class="comment">#make sure your gdb and your gdbserver are from one set of toolchain</span></span><br><span class="line">GNU gdb (Debian 7.12-6) 7.12.0.20161007-git</span><br><span class="line">Copyright (C) 2016 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.  Type <span class="string">"show copying"</span></span><br><span class="line">and <span class="string">"show warranty"</span> <span class="keyword">for</span> details.</span><br><span class="line">This GDB was configured as <span class="string">"x86_64-linux-gnu"</span>.</span><br><span class="line">Type <span class="string">"show configuration"</span> <span class="keyword">for</span> configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line">For <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">"help"</span>.</span><br><span class="line">Type <span class="string">"apropos word"</span> to search <span class="keyword">for</span> commands related to <span class="string">"word"</span>.</span><br><span class="line">(gdb) target remote :<span class="variable">$&#123;HOST_PORT&#125;</span></span><br></pre></td></tr></table></figure>
<p>i.e. : <strong>(gdb) target remote :4567</strong></p>
<p>Now we can start hunting bug!</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux kernel module(3)</title>
    <url>/2018-12-23/Linux-kernel-module-3/</url>
    <content><![CDATA[<p>This post will give a simple introduction to Linux kernel module(Part III.).</p>
<p>Linux kernel moduleÁÆÄ‰ªã(‰∏â)</p>
<a id="more"></a>
<p>In this post we will discuss how to call kernel driver in user space.</p>
<h2 id="Access-IIO-devices-from-user-space"><a href="#Access-IIO-devices-from-user-space" class="headerlink" title="Access IIO devices from user space"></a>Access IIO devices from user space</h2><p>In last two posts we use a IIO(Linux Industrial I/O Subsystem) device st_uvis25 as a example to show how to write a kernel module. There are a lot of devices fall into this subsystem:</p>
<ul>
<li>ADCs</li>
<li>Accelerometers</li>
<li>Gyros</li>
<li>IMUs</li>
<li>Capacitance to Digital Converters (CDCs)</li>
<li>Pressure Sensors</li>
<li>Color, Light and Proximity Sensors</li>
<li>Temperature Sensors</li>
<li>Magnetometers</li>
<li>DACs</li>
<li>DDS (Direct Digital Synthesis)</li>
<li>PLLs (Phase Locked Loops)</li>
<li>Variable/Programmable Gain Amplifiers (VGA, PGA)</li>
</ul>
<p>In st_uvis25_core.c, a <strong>iio_info</strong> has been defined and assigned to a <strong>iio_dev</strong> in probe function:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// st_uvis25_core.c, Line 267</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">iio_info</span> <span class="title">st_uvis25_info</span> = &#123;</span></span><br><span class="line">	.read_raw = st_uvis25_read_raw,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/* code */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">st_uvis25_probe</span><span class="params">(struct device *dev, <span class="keyword">int</span> irq, struct regmap *regmap)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">st_uvis25_hw</span> *<span class="title">hw</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">iio_dev</span> *<span class="title">iio_dev</span>;</span></span><br><span class="line">	<span class="keyword">int</span> err;</span><br><span class="line"></span><br><span class="line">	iio_dev = devm_iio_device_alloc(dev, <span class="keyword">sizeof</span>(*hw));</span><br><span class="line">	<span class="keyword">if</span> (!iio_dev)</span><br><span class="line">		<span class="keyword">return</span> -ENOMEM;</span><br><span class="line"></span><br><span class="line">	dev_set_drvdata(dev, (<span class="keyword">void</span> *)iio_dev);</span><br><span class="line"></span><br><span class="line">	hw = iio_priv(iio_dev);</span><br><span class="line">	hw-&gt;irq = irq;</span><br><span class="line">	hw-&gt;regmap = regmap;</span><br><span class="line"></span><br><span class="line">	err = st_uvis25_check_whoami(hw);</span><br><span class="line">	<span class="keyword">if</span> (err &lt; <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> err;</span><br><span class="line"></span><br><span class="line">	iio_dev-&gt;modes = INDIO_DIRECT_MODE;</span><br><span class="line">	iio_dev-&gt;dev.parent = dev;</span><br><span class="line">	iio_dev-&gt;channels = st_uvis25_channels;</span><br><span class="line">	iio_dev-&gt;num_channels = ARRAY_SIZE(st_uvis25_channels);</span><br><span class="line">	iio_dev-&gt;name = ST_UVIS25_DEV_NAME;</span><br><span class="line">	iio_dev-&gt;info = &amp;st_uvis25_info;</span><br><span class="line"></span><br><span class="line">	err = st_uvis25_init_sensor(hw);</span><br><span class="line">	<span class="keyword">if</span> (err &lt; <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> err;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (hw-&gt;irq &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		err = st_uvis25_allocate_buffer(iio_dev);</span><br><span class="line">		<span class="keyword">if</span> (err &lt; <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">return</span> err;</span><br><span class="line"></span><br><span class="line">		err = st_uvis25_allocate_trigger(iio_dev);</span><br><span class="line">		<span class="keyword">if</span> (err)</span><br><span class="line">			<span class="keyword">return</span> err;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> devm_iio_device_register(dev, iio_dev);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If <strong>devm_iio_device_register</strong> success and iio_info.read_raw has been registered, a file will be created at :<br>/sys/bus/iio/devices/iio:device0/xxx_raw<br>In terminal, you can read it by <strong>cat</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /sys/bus/iio/devices/iio:device0/xxx_raw</span><br></pre></td></tr></table></figure>
<p>In C/C++ applications, you can use <strong>fopen</strong> because it‚Äôs a file.</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Comments system has been added</title>
    <url>/2018-12-22/Comments-system-has-been-added/</url>
    <content><![CDATA[<p>Áé∞Âú®blogÊîØÊåÅ‰ΩøÁî®GithubÂ∏êÂè∑ËØÑËÆ∫Âï¶ÔºÅ<br>You can use your github account to add comments now!<br><img src="/2018-12-22/Comments-system-has-been-added/Screenshot&#32;from&#32;2018-12-22&#32;09-46-07.png" alt></p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux kernel module(2)</title>
    <url>/2018-12-16/Linux-kernel-module-2/</url>
    <content><![CDATA[<p>This post will give a simple introduction to Linux kernel module(Part II.).</p>
<p>Linux kernel moduleÁÆÄ‰ªã(‰∫å)</p>
<a id="more"></a>
<p>Let‚Äôs continue the unfinished parts we left in <a href="https://lzqblog.top/2018-12-08/Linux-kernel-module-1/">Part I.</a>.</p>
<h2 id="A-I2C-module"><a href="#A-I2C-module" class="headerlink" title="A I2C module"></a>A I2C module</h2><h3 id="What-is-regmap"><a href="#What-is-regmap" class="headerlink" title="What is regmap"></a>What is regmap</h3><p><strong>regmap</strong> is a new API added in kernel 3.1. It helps to provide a abstraction for I2C/SPI/IRQ etc. operations. If chips provide both I2C and SPI interfaces, using regmap also can help to reuse part of code. In this example(st_uvis25, a UVI sensor), it provides another SPI driver(st_uvis25_spi.c), and a interfaces-nonrelevant file(st_uvis25_core.c) as well. st_uvis25_core.c will not care which kind of interfaces you are using, every I2C/SPI read/write will be done through regmap. If you put your device on I2C bus in dts file, regmap will call I2C operate functions when you use <strong>regmap_write</strong>, if it‚Äôs on SPI bus, regmap will call SPI operate functions instead.</p>
<p>Tos use regmap API, a <strong>regmap_config</strong> should be defined. <strong>reg_bits</strong> and <strong>val_bits</strong> defined the register address length and data length inside this device. write_flag_mask and read_flag_mask will do OR operation with the data you trying to send/read(they are optional):</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// linux-4.9/drivers/base/regmap/regmap.c, Line 2002</span></span><br><span class="line">	u8 = buf;</span><br><span class="line">	*u8 |= <span class="built_in">map</span>-&gt;write_flag_mask;</span><br></pre></td></tr></table></figure>
<p>Then use <strong>devm_regmap_init_i2c</strong> or <strong>devm_regmap_init_spi</strong> to initialize your regmap. It will help you to allocate memory for your regmap and release it when module remove.</p>
<h3 id="How-to-use-regmap-to-control-device"><a href="#How-to-use-regmap-to-control-device" class="headerlink" title="How to use regmap to control device"></a>How to use regmap to control device</h3><p>Let‚Äôs take a look at <strong>st_uvis25.h</strong> and <strong>st_uvis25_core.c</strong>:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// st_uvis25.h, Line 26</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">st_uvis25_hw</span> &#123;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">regmap</span> *<span class="title">regmap</span>;</span></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">iio_trigger</span> *<span class="title">trig</span>;</span></span><br><span class="line">	<span class="keyword">bool</span> enabled;</span><br><span class="line">	<span class="keyword">int</span> irq;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// st_uvis25_core.c Line 55</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">st_uvis25_check_whoami</span><span class="params">(struct st_uvis25_hw *hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> err, data;</span><br><span class="line"></span><br><span class="line">	err = regmap_read(hw-&gt;regmap, ST_UVIS25_REG_WHOAMI_ADDR, &amp;data);</span><br><span class="line">	<span class="keyword">if</span> (err &lt; <span class="number">0</span>) &#123;</span><br><span class="line">		dev_err(regmap_get_device(hw-&gt;regmap),</span><br><span class="line">			<span class="string">"failed to read whoami register\n"</span>);</span><br><span class="line">		<span class="keyword">return</span> err;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (data != ST_UVIS25_REG_WHOAMI_VAL) &#123;</span><br><span class="line">		dev_err(regmap_get_device(hw-&gt;regmap),</span><br><span class="line">			<span class="string">"wrong whoami &#123;%02x vs %02x&#125;\n"</span>,</span><br><span class="line">			data, ST_UVIS25_REG_WHOAMI_VAL);</span><br><span class="line">		<span class="keyword">return</span> -ENODEV;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This <strong>st_uvis25_check_whoami</strong> uses regmap_read to read value from register <strong>ST_UVIS25_REG_WHOAMI_ADDR</strong> and compares it to <strong>ST_UVIS25_REG_WHOAMI_VAL</strong>.</p>
<h3 id="i2c-probe-and-probe"><a href="#i2c-probe-and-probe" class="headerlink" title="i2c_probe and probe"></a>i2c_probe and probe</h3><p>In last post we already know that <strong>module_i2c_driver</strong> actually are encapsulations of module_init/exit, so it‚Äôs easy to understand that st_uvis25_i2c_probe will be called when install mod. But how about <strong>st_uvis25_probe</strong>, where does it come from?</p>
<h3 id="EXPORT-SYMBOL"><a href="#EXPORT-SYMBOL" class="headerlink" title="EXPORT_SYMBOL"></a>EXPORT_SYMBOL</h3><p>As I mentioned in last section, there are two more files, this <strong>st_uvis25_probe</strong> is export from one of them(st_uvis25_core.c):</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">st_uvis25_probe</span><span class="params">(struct device *dev, <span class="keyword">int</span> irq, struct regmap *regmap)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/* code */</span></span><br><span class="line">&#125;</span><br><span class="line">EXPORT_SYMBOL(st_uvis25_probe);</span><br></pre></td></tr></table></figure>
<p><strong>EXPORT_SYMBOL</strong> is a marco defined in linux-4.9/include/linux/export.h</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// linux-4.9/include/linux/export.h, Line 56</span></span><br><span class="line"><span class="comment">/* For every exported symbol, place a struct in the __ksymtab section */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ___EXPORT_SYMBOL(sym, sec)					\</span></span><br><span class="line">	<span class="function"><span class="keyword">extern</span> <span class="title">typeof</span><span class="params">(sym)</span> sym</span>;						\</span><br><span class="line">	__CRC_SYMBOL(sym, sec)						\</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> __kstrtab_#<span class="meta">#sym[]				\</span></span><br><span class="line">	__attribute__((section(<span class="string">"__ksymtab_strings"</span>), aligned(<span class="number">1</span>)))	\</span><br><span class="line">	= VMLINUX_SYMBOL_STR(sym);					\</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">kernel_symbol</span> __<span class="title">ksymtab_</span>##<span class="title">sym</span>		\</span></span><br><span class="line"><span class="class">	__<span class="title">used</span>								\</span></span><br><span class="line"><span class="class">	__<span class="title">attribute__</span>((<span class="title">section</span>("___<span class="title">ksymtab</span>" <span class="title">sec</span> "+" #<span class="title">sym</span>), <span class="title">used</span>))	\</span></span><br><span class="line"><span class="class">	= &#123;</span> (<span class="keyword">unsigned</span> <span class="keyword">long</span>)&amp;sym, __kstrtab_#<span class="meta">#sym &#125;</span></span><br></pre></td></tr></table></figure>

<p>In newer kernel 4.19.9, this marco has been simplified to:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* For every exported symbol, place a struct in the __ksymtab section */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ___EXPORT_SYMBOL(sym, sec)					\</span></span><br><span class="line">	<span class="function"><span class="keyword">extern</span> <span class="title">typeof</span><span class="params">(sym)</span> sym</span>;						\</span><br><span class="line">	__CRC_SYMBOL(sym, sec)						\</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> __kstrtab_#<span class="meta">#sym[]				\</span></span><br><span class="line">	__attribute__((section(<span class="string">"__ksymtab_strings"</span>), used, aligned(<span class="number">1</span>)))	\</span><br><span class="line">	= #sym;								\</span><br><span class="line">	__KSYMTAB_ENTRY(sym, sec)</span><br></pre></td></tr></table></figure>

<p>When you use it as <strong>EXPORT_SYMBOL(my_export, GPL)</strong>,it will be expanded like this:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="title">typeof</span><span class="params">(my_export)</span> my_export</span>;						\</span><br><span class="line">__CRC_SYMBOL(my_export, GPL)						\</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> __kstrtab_my_export[]				\</span><br><span class="line">__attribute__((section(<span class="string">"__ksymtab_strings"</span>), aligned(<span class="number">1</span>)))	\</span><br><span class="line">= VMLINUX_SYMBOL_STR(my_export);					\</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">kernel_symbol</span> __<span class="title">ksymtab_my_export</span>		\</span></span><br><span class="line"><span class="class">__<span class="title">used</span>								\</span></span><br><span class="line"><span class="class">__<span class="title">attribute__</span>((<span class="title">section</span>("___<span class="title">ksymtab</span>" <span class="title">GPL</span> "+" <span class="title">my_export</span>), <span class="title">used</span>))	\</span></span><br><span class="line"><span class="class">= &#123;</span> (<span class="keyword">unsigned</span> <span class="keyword">long</span>)&amp;my_export, __kstrtab_my_export &#125;</span><br></pre></td></tr></table></figure>
<p>It will be simpler if ignore <strong>attribute</strong> and __used(there are gcc attributes) and expand again:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> __kstrtab_my_export[] =‚Äù my_export‚Äù;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">kernel_symbol__ksymtab_my_export</span>=&#123;</span>(<span class="keyword">unsigned</span> <span class="keyword">long</span>)&amp;my_export,_kstrab_my_export&#125;</span><br></pre></td></tr></table></figure>
<p>This part of code declared a static const char array to store symbol name and a static const struct to store address and name of this symbol.</p>
<p>If we add <strong>attribute</strong> back again, this char array will be put into section <strong>__ksymtab_strings</strong> and struct will be put into section <strong>__ksymatab_gpl</strong>.</p>
<p>How to call drivers in user space will be discussed in Part III.<br>To be continued‚Ä¶</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux kernel module(1)</title>
    <url>/2018-12-09/Linux-kernel-module-1/</url>
    <content><![CDATA[<p>This post will give a simple introduction to Linux kernel module(Part I.).</p>
<p>Linux kernel moduleÁÆÄ‰ªã(‰∏Ä)</p>
<a id="more"></a>
<p>When your system has a new external chip connected(I2C,SPI,GPIO etc.), you might need to write a driver for it by yourself. Normally this driver will be implemented as a kernel module. </p>
<p>Kernel module development is a complex task and it‚Äôs hard to make it clear in one simple post. If you want to learn more, a good choice is taking a look at Linux kernel source code.</p>
<h2 id="The-simplest-example-of-kernel-module"><a href="#The-simplest-example-of-kernel-module" class="headerlink" title="The simplest example of kernel module"></a>The simplest example of kernel module</h2><h3 id="Source-code"><a href="#Source-code" class="headerlink" title="Source code"></a>Source code</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// file:simple_module.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/init.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/printk.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> __<span class="function">init <span class="title">sample_module_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	printk(KERN_INFO <span class="string">"Hello world!\n"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __<span class="function"><span class="built_in">exit</span> <span class="title">sample_module_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	printk(KERN_INFO <span class="string">"Bye!\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(sample_module_init);</span><br><span class="line"></span><br><span class="line">module_exit(sample_module_exit);</span><br><span class="line"></span><br><span class="line">MODULE_AUTHOR(<span class="string">"Coding Spirit &lt;coding@spirit.com&gt;"</span>);</span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL v2"</span>);</span><br></pre></td></tr></table></figure>

<p>This simple example shows basic structure of kernel module. A <strong>init</strong> function and a <strong>exit</strong> function must be declared, to avoid warnings, <strong>MODULE_AUTHOR</strong> and <strong>MODULE_LICENSE</strong> is needed as well.</p>
<h3 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h3><p>To compile it to kernel module(.ko) file, we need to write a Makefile for it.</p>
<figure class="highlight mk"><table><tr><td class="code"><pre><span class="line">simple-module-objs := simple_module.o</span><br><span class="line"></span><br><span class="line">obj-m := simple-module.o</span><br></pre></td></tr></table></figure>
<p>In this Makefile <strong>$(<executable>-objs)</executable></strong> lists all objects used to link the final executable, <strong>obj-m</strong> means loadable module goals, it will generate a standalone .ko file, then we can use <strong>insmod</strong> to install it. If change it to <strong>obj-y</strong>, it will be compiled into kernel.</p>
<h3 id="Test-this-module"><a href="#Test-this-module" class="headerlink" title="Test this module"></a>Test this module</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># clear debug message first</span></span><br><span class="line">dmesg -c</span><br><span class="line"><span class="comment"># see modules already installed</span></span><br><span class="line">lsmod</span><br><span class="line"><span class="comment"># install simple module</span></span><br><span class="line">insmod simple-module.ko</span><br><span class="line"><span class="comment"># check debug message</span></span><br><span class="line">dmesg</span><br><span class="line"><span class="comment"># remove simple module</span></span><br><span class="line">rmmod simple-module.ko</span><br><span class="line">dmesg</span><br></pre></td></tr></table></figure>

<h3 id="What-are-module-init-exit-and-init-exit"><a href="#What-are-module-init-exit-and-init-exit" class="headerlink" title="What are module_init/exit and __init/exit"></a>What are module_init/exit and __init/exit</h3><p>module_init and module_exit are macros to help register module init and exit functions. Use your F12, go to definition:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __define_initcall(fn, id) \</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">initcall_t</span> __initcall_#<span class="meta">#fn##id __used \</span></span><br><span class="line">	__attribute__((__section__(<span class="string">".initcall"</span> #id <span class="string">".init"</span>))) = fn;</span><br></pre></td></tr></table></figure>

<p><em>fn</em> is your function name, <em>id</em> stand for priority, for module_init, this level will be set as 6.</p>
<p>After using this marco, your init function will be called when <strong>do_initcalls</strong> was called(<em>init/main.c</em>)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __<span class="function">init <span class="title">do_initcalls</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> level;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (level = <span class="number">0</span>; level &lt; ARRAY_SIZE(initcall_levels) - <span class="number">1</span>; level++)</span><br><span class="line">		do_initcall_level(level);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>as for marco <strong>__init</strong> , It tells the compiler to put this function in a special section, which is declared in vmlinux.lds. <strong>__init</strong> puts the function in the ‚Äú.init.text‚Äù section.</p>
<p>Take a look at where it defined(/linux-4.9/include/linux/init.h):</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* These macros are used to mark some functions or</span></span><br><span class="line"><span class="comment"> * initialized data (doesn't apply to uninitialized data)</span></span><br><span class="line"><span class="comment"> * as `initialization' functions. The kernel can take this</span></span><br><span class="line"><span class="comment"> * as hint that the function is used only during the initialization</span></span><br><span class="line"><span class="comment"> * phase and free up used memory resources after*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/* These are for everybody (although not all archs will actually</span></span><br><span class="line"><span class="comment">   discard it in modules) */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __init		__section(.init.text)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __initdata	__section(.init.data)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __exitdata	__section(.exit.data)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __exit_call	__used __section(.exitcall.exit)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MODULE</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __exit		__section(.exit.text)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __exit		__used __section(.exit.text)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>As we can see in comment, if you use <strong>__init</strong> to mark it, memory will be released after initialization.</p>
<h2 id="A-I2C-module"><a href="#A-I2C-module" class="headerlink" title="A I2C module"></a>A I2C module</h2><p>This simple module is useless, let‚Äôs take a look at a more useful one: <a href="https://github.com/torvalds/linux/blob/6f0d349d922ba44e4348a17a78ea51b7135965b1/drivers/iio/light/st_uvis25_i2c.c" target="_blank" rel="noopener"><em>linux/drivers/iio/light/st_uvis25_i2c.c</em></a></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * STMicroelectronics uvis25 i2c driver</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright 2017 STMicroelectronics Inc.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Lorenzo Bianconi &lt;lorenzo.bianconi83@gmail.com&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the GPL-2.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/acpi.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/i2c.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/slab.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/regmap.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"st_uvis25.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> UVIS25_I2C_AUTO_INCREMENT	BIT(7)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">regmap_config</span> <span class="title">st_uvis25_i2c_regmap_config</span> = &#123;</span></span><br><span class="line">	.reg_bits = <span class="number">8</span>,</span><br><span class="line">	.val_bits = <span class="number">8</span>,</span><br><span class="line">	.write_flag_mask = UVIS25_I2C_AUTO_INCREMENT,</span><br><span class="line">	.read_flag_mask = UVIS25_I2C_AUTO_INCREMENT,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">st_uvis25_i2c_probe</span><span class="params">(struct i2c_client *client,</span></span></span><br><span class="line"><span class="function"><span class="params">			       <span class="keyword">const</span> struct i2c_device_id *id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">regmap</span> *<span class="title">regmap</span>;</span></span><br><span class="line"></span><br><span class="line">	regmap = devm_regmap_init_i2c(client, &amp;st_uvis25_i2c_regmap_config);</span><br><span class="line">	<span class="keyword">if</span> (IS_ERR(regmap)) &#123;</span><br><span class="line">		dev_err(&amp;client-&gt;dev, <span class="string">"Failed to register i2c regmap %d\n"</span>,</span><br><span class="line">			(<span class="keyword">int</span>)PTR_ERR(regmap));</span><br><span class="line">		<span class="keyword">return</span> PTR_ERR(regmap);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> st_uvis25_probe(&amp;client-&gt;dev, client-&gt;irq, regmap);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">of_device_id</span> <span class="title">st_uvis25_i2c_of_match</span>[] = &#123;</span></span><br><span class="line">	&#123; .compatible = <span class="string">"st,uvis25"</span>, &#125;,</span><br><span class="line">	&#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">MODULE_DEVICE_TABLE(of, st_uvis25_i2c_of_match);</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">i2c_device_id</span> <span class="title">st_uvis25_i2c_id_table</span>[] = &#123;</span></span><br><span class="line">	&#123; ST_UVIS25_DEV_NAME &#125;,</span><br><span class="line">	&#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">MODULE_DEVICE_TABLE(i2c, st_uvis25_i2c_id_table);</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">i2c_driver</span> <span class="title">st_uvis25_driver</span> = &#123;</span></span><br><span class="line">	.driver = &#123;</span><br><span class="line">		.name = <span class="string">"st_uvis25_i2c"</span>,</span><br><span class="line">		.pm = &amp;st_uvis25_pm_ops,</span><br><span class="line">		.of_match_table = of_match_ptr(st_uvis25_i2c_of_match),</span><br><span class="line">	&#125;,</span><br><span class="line">	.probe = st_uvis25_i2c_probe,</span><br><span class="line">	.id_table = st_uvis25_i2c_id_table,</span><br><span class="line">&#125;;</span><br><span class="line">module_i2c_driver(st_uvis25_driver);</span><br><span class="line"></span><br><span class="line">MODULE_AUTHOR(<span class="string">"Lorenzo Bianconi &lt;lorenzo.bianconi83@gmail.com&gt;"</span>);</span><br><span class="line">MODULE_DESCRIPTION(<span class="string">"STMicroelectronics uvis25 i2c driver"</span>);</span><br><span class="line">MODULE_LICENSE(<span class="string">"GPL v2"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="What-are-module-i2c-driver-and-MODULE-DEVICE-TABLE"><a href="#What-are-module-i2c-driver-and-MODULE-DEVICE-TABLE" class="headerlink" title="What are module_i2c_driver and MODULE_DEVICE_TABLE"></a>What are module_i2c_driver and MODULE_DEVICE_TABLE</h3><p>Like module_init we mentioned, they are marcos as well. Use your holy F12:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * module_i2c_driver() - Helper macro for registering a modular I2C driver</span></span><br><span class="line"><span class="comment"> * @__i2c_driver: i2c_driver struct</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Helper macro for I2C drivers which do not do anything special in module</span></span><br><span class="line"><span class="comment"> * init/exit. This eliminates a lot of boilerplate. Each module may only</span></span><br><span class="line"><span class="comment"> * use this macro once, and calling it replaces module_init() and module_exit()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> module_i2c_driver(__i2c_driver) \</span></span><br><span class="line">	module_driver(__i2c_driver, i2c_add_driver, \</span><br><span class="line">			i2c_del_driver)</span><br></pre></td></tr></table></figure>
<p>As for <strong>module_driver</strong>, marco AGAIN:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * module_driver() - Helper macro for drivers that don't do anything</span></span><br><span class="line"><span class="comment"> * special in module init/exit. This eliminates a lot of boilerplate.</span></span><br><span class="line"><span class="comment"> * Each module may only use this macro once, and calling it replaces</span></span><br><span class="line"><span class="comment"> * module_init() and module_exit().</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @__driver: driver name</span></span><br><span class="line"><span class="comment"> * @__register: register function for this driver type</span></span><br><span class="line"><span class="comment"> * @__unregister: unregister function for this driver type</span></span><br><span class="line"><span class="comment"> * @...: Additional arguments to be passed to __register and __unregister.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Use this macro to construct bus specific macros for registering</span></span><br><span class="line"><span class="comment"> * drivers, and do not use it on its own.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> module_driver(__driver, __register, __unregister, ...) \</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> __init __driver##_init(<span class="keyword">void</span>) \</span><br><span class="line">&#123; \</span><br><span class="line">	<span class="keyword">return</span> __register(&amp;(__driver) , ##__VA_ARGS__); \</span><br><span class="line">&#125; \</span><br><span class="line">module_init(__driver##_init); \</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __exit __driver##_exit(<span class="keyword">void</span>) \</span><br><span class="line">&#123; \</span><br><span class="line">	__unregister(&amp;(__driver) , ##__VA_ARGS__); \</span><br><span class="line">&#125; \</span><br><span class="line">module_exit(__driver##_exit);</span><br></pre></td></tr></table></figure>

<p>As you can see, those marcos actually are encapsulations of module_init/exit.</p>
<p>And for <strong>MODULE_DEVICE_TABLE</strong>, it‚Äôs just help to create an alias, if there is any nodes in <strong>dts</strong> has the same <strong>compatible</strong> with your drivers, <strong>probe</strong> function will be called.<br>As a driver writer, you have no idea how will user enumerate it(By of or i2c), so provide both of them is necessary.</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> MODULE</span></span><br><span class="line"><span class="comment">/* Creates an alias so file2alias.c can find device table. */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MODULE_DEVICE_TABLE(type, name)					\</span></span><br><span class="line">extern typeof(name) __mod_##type##__##name##_device_table		\</span><br><span class="line">  __attribute__ ((unused, alias(__stringify(name))))</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span>  <span class="comment">/* !MODULE */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MODULE_DEVICE_TABLE(type, name)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p><strong>regmap</strong> etc. will be discussed in Part II. </p>
<p>To be continued‚Ä¶</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown frequently used syntax</title>
    <url>/2018-11-24/Markdown-frequently-used-syntax/</url>
    <content><![CDATA[<p>Markdown Â∏∏Áî®ËØ≠Ê≥ïÂ∞èÁªì</p>
<p>ÂÜô‰∫ÜËøô‰πà‰πÖÁöÑmd, ÂÅ∂Â∞îËøòÊòØ‰ºöÂøòËÆ∞‰∏Ä‰∫õÁªÜËäÇÔºåÂπ≤ËÑÜÂÜôÁØáÊó•ÂøóÊÄªÁªì‰∏Ä‰∏ãÔºå‰ª•Â§á‰∏çÊó∂‰πãÈúÄ</p>
<a id="more"></a>

<h2 id="Highlight-Á™ÅÂá∫ÊòæÁ§∫"><a href="#Highlight-Á™ÅÂá∫ÊòæÁ§∫" class="headerlink" title="Highlight(Á™ÅÂá∫ÊòæÁ§∫)"></a>Highlight(Á™ÅÂá∫ÊòæÁ§∫)</h2><table>
<thead>
<tr>
<th align="center">Item</th>
<th align="center">How to use</th>
<th align="center">Preview</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Bold(Âä†Á≤ó)</td>
<td align="center">**Bold Text**</td>
<td align="center"><strong>Bold Text</strong></td>
</tr>
<tr>
<td align="center">Italic(Êñú‰Ωì)</td>
<td align="center">*Italic Text*</td>
<td align="center"><em>Italic Text</em></td>
</tr>
<tr>
<td align="center">Strike Through(Âà†Èô§Á∫ø)</td>
<td align="center">~~Strike Through Text~~</td>
<td align="center"><del>Strike Through Text</del></td>
</tr>
<tr>
<td align="center">Font Color(Â≠ó‰ΩìÈ¢úËâ≤)</td>
<td align="center">&lt;span style=&quot;color:red&quot;&gt;Red Text&lt;/span&gt;</td>
<td align="center"><span style="color:red">Red Text</span></td>
</tr>
</tbody></table>
<p>MarkdownÊú¨Ë∫´‰∏çÊîØÊåÅÊõ¥ÊîπÂ≠ó‰ΩìÈ¢úËâ≤Ôºå‰ΩÜÊòØÊîØÊåÅÊèíÂÖ•HTML, ‰∏äÈù¢ÁöÑ&lt;span&gt;ÂÖ∂ÂÆûÊòØHTMLÁöÑÊ†áÁ≠æ„ÄÇ Â¶ÇÊûúËøòÊúâÂÖ∂‰ªñÂ•áÂ•áÊÄ™ÊÄ™ÁöÑË¶ÅÊ±Ç(Â¶ÇÊõ¥ÊîπÂ≠ó‰ΩìÔºåÊõ¥ÊîπÂ§ßÂ∞èÔºåËÆæÁΩÆÊåáÈíàÊ†∑Âºè)Ôºå‰πüÂèØ‰ª•‰ΩøÁî®&lt;span&gt;ÂÆûÁé∞:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color:blue;font-family:Impact;font-style:italic;cursor:crosshair;font-size:30px"</span>&gt;</span>Impact font blue italic 30px with crosshair pointer<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ÊïàÊûúÂ¶Ç‰∏ãÔºàÈº†Ê†áÁßªÂà∞‰∏äÈù¢ËØïËØïÔºâÔºö</p>
<p><span style="color:blue;font-family:Impact;font-style:italic;cursor:crosshair;font-size:30px">Impact font blue italic 30px with crosshair pointer</span></p>
<h2 id="Table-Ë°®Ê†º"><a href="#Table-Ë°®Ê†º" class="headerlink" title="Table(Ë°®Ê†º)"></a>Table(Ë°®Ê†º)</h2><p>Markdown ÊîØÊåÅÊèíÂÖ•ÁÆÄÂçïÁöÑË°®Ê†º:</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">| Default   | left aligned | right aligned | mid aligned |</span><br><span class="line">| --------- | :----------- | ------------: | :---------: |</span><br><span class="line">| short     | short        | short         | short       |</span><br><span class="line">| long text | long text    | long text     | long text   |</span><br></pre></td></tr></table></figure>
<p>ÊïàÊûúÂ¶Ç‰∏ãÔºö</p>
<table>
<thead>
<tr>
<th>Default</th>
<th align="left">left aligned</th>
<th align="right">right aligned</th>
<th align="center">mid aligned</th>
</tr>
</thead>
<tbody><tr>
<td>short</td>
<td align="left">short</td>
<td align="right">short</td>
<td align="center">short</td>
</tr>
<tr>
<td>long text</td>
<td align="left">long text</td>
<td align="right">long text</td>
<td align="center">long text</td>
</tr>
</tbody></table>
<p>Ë°®Ê†ºÂÜÖÂÆπÁöÑÂØπÈΩêÊñπÂºèÂèØ‰ª•ÈÄöËøáÊõ¥Êîπ‚Äù&minus;&minus;&minus;‚ÄùËøõË°åË∞ÉÊï¥Ôºö</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">-----    //ÈªòËÆ§ÔºåÊ†áÈ¢òÂ±Ö‰∏≠ÔºåÂÜÖÂÆπÂ∑¶ÂØπÈΩê</span><br><span class="line">:----    //Ê†áÈ¢òÂíåÂÜÖÂÆπÈÉΩÂ∑¶ÂØπÈΩê</span><br><span class="line">-----:   //Ê†áÈ¢òÂíåÂÜÖÂÆπÈÉΩÂè≥ÂØπÈΩê</span><br><span class="line">:----:   //Ê†áÈ¢òÂíåÂÜÖÂÆπÈÉΩÂ±Ö‰∏≠ÂØπÈΩê</span><br></pre></td></tr></table></figure>

<h2 id="Insert-image-or-super-link-ÂõæÁâáÂíåË∂ÖÈìæÊé•"><a href="#Insert-image-or-super-link-ÂõæÁâáÂíåË∂ÖÈìæÊé•" class="headerlink" title="Insert image or super link(ÂõæÁâáÂíåË∂ÖÈìæÊé•)"></a>Insert image or super link(ÂõæÁâáÂíåË∂ÖÈìæÊé•)</h2><h3 id="ÂõæÁâá"><a href="#ÂõæÁâá" class="headerlink" title="ÂõæÁâá"></a>ÂõæÁâá</h3><p>  ‰ΩøÁî®<strong>![Background Text](image_path ‚ÄòTitle‚Äô)</strong>ÂèØ‰ª•ÊèíÂÖ•ÂõæÁâá, ÂÖ∂‰∏≠:</p>
<ul>
<li>Background Text: ÊòæÁ§∫Âú®ÂõæÁâá‰∏ãÂ±ÇÁöÑÊñáÂ≠óÔºå‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûúÂõæÁâáÊòæÁ§∫Ê≠£Â∏∏ÁöÑËØù‰∏ÄËà¨‰ºöË¢´Êå°‰ΩèÁúã‰∏çËßÅ</li>
<li>image_path: ÂõæÂÉèÊ∫êÊñá‰ª∂ÁöÑË∑ØÂæÑ„ÄÇÂèØ‰ª•ÊòØÁΩëÁªúÈìæÊé•Ôºå‰πüÂèØ‰ª•ÊòØÊú¨Âú∞Ë∑ØÂæÑ</li>
<li>Title: ÊòæÁ§∫Âú®ÂõæÁâá‰∏ãÊñπÁöÑÊ†áÈ¢ò</li>
</ul>
<p>Â¶ÇÔºö</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">![](Markdown-frequently-used-syntax/IMG<span class="emphasis">_20170621_</span>154100.jpg 'Flying Spirit')</span><br></pre></td></tr></table></figure>

<p><img src="/2018-11-24/Markdown-frequently-used-syntax/IMG_20170621_154100.jpg" alt title="Flying Spirit"></p>
<h3 id="Ë∂ÖÈìæÊé•"><a href="#Ë∂ÖÈìæÊé•" class="headerlink" title="Ë∂ÖÈìæÊé•"></a>Ë∂ÖÈìæÊé•</h3><p>‰ΩøÁî®<strong>[Suerp_Link](url)</strong>ÁöÑÊñπÂºèÊèíÂÖ•Ë∂ÖÈìæÊé•, ÂÖ∂‰∏≠:</p>
<ul>
<li>Suerp_Link: Ë∂ÖÈìæÊé•ÊòæÁ§∫ÁöÑÊñáÊú¨</li>
<li>url: ÊåáÂêëÁöÑÈìæÊé•</li>
</ul>
<p>Â¶Ç:</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[<span class="string">‰∏Ä‰ΩçÁ®ãÂ∫èÂëòÔºåÊØîËæÉÂ∏ÖÁöÑÈÇ£Áßç</span>](<span class="link">https://www.lzqblog.top</span>)</span><br></pre></td></tr></table></figure>

<p><a href="https://www.lzqblog.top" target="_blank" rel="noopener">‰∏Ä‰ΩçÁ®ãÂ∫èÂëòÔºåÊØîËæÉÂ∏ÖÁöÑÈÇ£Áßç</a></p>
<h2 id="Check-box"><a href="#Check-box" class="headerlink" title="Check box"></a>Check box</h2><p>Markdown‰πüÊîØÊåÅÂ∏¶check boxÁöÑÊ†∑ÂºèÔºåÁî®Êà∑ÂèØ‰ª•ÈÄöËøáÂçïÂáªÊù•Ê°ÜÈÄâÔºå‰ΩÜÊòØËøôÁßçÊ†∑ÂºèÂú®ÈùôÊÄÅÈ°µÈù¢‰∏≠Ê≤°‰ªÄ‰πàÁî®</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="bullet">- </span>[x] item1</span><br><span class="line"><span class="bullet">- </span>[ ] item2</span><br><span class="line"><span class="bullet">- </span>[x] item3</span><br></pre></td></tr></table></figure>

<ul>
<li><input checked disabled type="checkbox"> item1</li>
<li><input disabled type="checkbox"> item2</li>
<li><input checked disabled type="checkbox"> item3</li>
</ul>
<h2 id="Flow-ÊµÅÁ®ãÂõæ"><a href="#Flow-ÊµÅÁ®ãÂõæ" class="headerlink" title="Flow(ÊµÅÁ®ãÂõæ)"></a>Flow(ÊµÅÁ®ãÂõæ)</h2><p>Markdown ÁîöËá≥ÊîØÊåÅÁõ¥Êé•ÁîªÊµÅÁ®ãÂõæ</p>
<p><img src="/2018-11-24/Markdown-frequently-used-syntax/006HJgYYgy1fex00ntxymg308c08c74b.png" alt></p>
<p>Ë¶ÅÂàõÂª∫ÊµÅÁ®ãÂõæÂè™ÈúÄ‰∏§Ê≠•Ôºö1.Â£∞ÊòéÂÖÉÁ¥† 2.ËøûÊé•ÂÖÉÁ¥†<br>‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºö</p>
<p>```flow<br>flow<br>st=&gt;start: Main Start:&gt;<a href="http://www.lzqblog.top" target="_blank" rel="noopener">www.lzqblog.top</a><br>input=&gt;inputoutput: input a<br>op=&gt;operation: a‚Äì<br>sb=&gt;subroutine: a = a!<br>cond=&gt;condition: a &gt; 100?<br>output=&gt;inputoutput: print a<br>e=&gt;end<br>st-&gt;input-&gt;op-&gt;cond<br>cond(no,right)-&gt;sb(right)-&gt;output(right)-&gt;op<br>cond(yes,down)-&gt;e<br>```<br>ÊïàÊûúÂ¶Ç‰∏ãÔºö</p>
<div id="flowchart-0" class="flow-chart"></div>

<h3 id="ÊµÅÁ®ãÂõæÁöÑÂü∫Êú¨ËØ≠Ê≥ï"><a href="#ÊµÅÁ®ãÂõæÁöÑÂü∫Êú¨ËØ≠Ê≥ï" class="headerlink" title="ÊµÅÁ®ãÂõæÁöÑÂü∫Êú¨ËØ≠Ê≥ï"></a>ÊµÅÁ®ãÂõæÁöÑÂü∫Êú¨ËØ≠Ê≥ï</h3><p><strong>Â£∞ÊòéÂÖÉÁ¥†</strong>:</p>
<p>tag=&gt;type: content:&gt;url</p>
<p>tag ‰∏∫Ê†áÁ≠æÔºåÂú®ËøûÊé•ÂÖÉÁ¥†ÁöÑÊó∂ÂÄô‰ºöÁî®Âà∞<br>type‰∏∫ÂÖÉÁ¥†Á±ªÂûãÔºåÂ∏∏Áî®ÁöÑÊúâ start condition operation inputoutput subroutine endÂá†Áßç<br>content ‰∏∫ÊòæÁ§∫Âú®ÂÖÉÁ¥†‰∏≠ÁöÑÂÜÖÂÆπ<br>url‰∏∫ÂèØÊ∑ªÂä†ÁöÑË∂ÖÈìæÊé•</p>
<p><strong>ËøûÊé•ÂÖÉÁ¥†</strong>Ôºö<br>ÂØπ‰∫éÈùûÊù°‰ª∂ÂÖÉÁ¥†:<br>tag1-&gt;tag2<br>ÈªòËÆ§ÁöÑÁÆ≠Â§¥ÊñπÂêëÊòØÂêë‰∏ã(down)Ôºå‰πüÂèØ‰ª•ÊåáÂÆöÁÆ≠Â§¥ÊñπÂêëÔºö<br>tag1(right)-&gt;tag2<br>ÂØπ‰∫éÊù°‰ª∂ÂÖÉÁ¥†(condition)ÔºåÂ§ö‰∫Ü‰∏Ä‰∏™yes or noÂèÇÊï∞:<br>condition_tag(no,right)-&gt;tag2<br>condition_tag(yes,down)-&gt;tag2</p>
<p>Ê≥®Ôºö hexoÈªòËÆ§‰∏çÊîØÊåÅMarkdownÊµÅÁ®ãÂõæÔºåË¶ÅÂú®hexo‰∏äÊòæÁ§∫ÊµÅÁ®ãÂõæÈúÄË¶ÅÂÆâË£Öhexo-filter-flowchart</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-filter-flowchart</span><br></pre></td></tr></table></figure>

<p>Â∏∏Áî®ÁöÑÂ∑Æ‰∏çÂ§öÂ∞±Ëøô‰∫õÔºåÊúâÊÉ≥Âà∞ÁöÑ‰ª•ÂêéÂÜçË°•ÂÖÖÂêß</p>
<p><img src="/2018-11-24/Markdown-frequently-used-syntax/75aecbdeb48f8c5448e454b638292df5e1fe7f70.gif" alt></p>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">flow
st=>start: Main Start:>http://www.lzqblog.top
input=>inputoutput: input a
op=>operation: a--
sb=>subroutine: a = a!
cond=>condition: a > 100?
output=>inputoutput: print a
e=>end
st->input->op->cond
cond(no,right)->sb(right)->output(right)->op
cond(yes,down)->e</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script>]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux: ‚Äòadb devices‚Äô can&#39;t find devices</title>
    <url>/2018-11-23/Linux-%E2%80%98adb-devices%E2%80%99-can-t-find-devices/</url>
    <content><![CDATA[<p>A strange issue was found on my Debian PC that <strong>adb devices</strong> can‚Äôt find any device meanwhile <strong>lsusb</strong> can find the device I need.</p>
<a id="more"></a>
<h2 id="Issue"><a href="#Issue" class="headerlink" title="Issue"></a>Issue</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lsusb</span><br><span class="line">Bus 002 Device 006: ID 18d1:4e26 Google Inc. </span><br><span class="line">$ adb devices</span><br><span class="line">List of devices attached</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Copy the first 4 characters of your device ID when you type <strong>lsusb</strong> (mark it as red):</p>
<p>Bus 002 Device 006: ID <span style="color:red">18d1</span>:4e26 Google Inc. </p>
<p>Add it into file <em>~/.android/adb_usb.ini</em> or create it if it doesn‚Äôt exist:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ANDROID 3RD PARTY USB VENDOR ID LIST -- DO NOT EDIT.</span><br><span class="line"># USE &#39;android update adb&#39; TO GENERATE.</span><br><span class="line"># 1 USB VENDOR ID PER LINE.</span><br><span class="line">0x18d1</span><br></pre></td></tr></table></figure>
<p>After that, you need to restart your adb server:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ adb <span class="built_in">kill</span>-server </span><br><span class="line">$ adb start-server</span><br><span class="line">$ adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">0123456789ABCDEF	device</span><br></pre></td></tr></table></figure>
<p>Now it can be detected by <strong>adb devices</strong></p>
]]></content>
      <categories>
        <category>ÈóÆÈ¢òËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Debian: nvidia display card driver install</title>
    <url>/2018-11-20/Debian-nvidia-display-card-driver-install/</url>
    <content><![CDATA[<p>Bumblebee aims to provide support for NVIDIA Optimus laptops for GNU/Linux distributions(<a href="https://www.bumblebee-project.org/" target="_blank" rel="noopener">Bumblebee porject</a>, <a href="https://wiki.debian.org/Bumblebee/" target="_blank" rel="noopener">Debian wiki</a>). It can help to solve the overheat problem caused by dual dispaly card, also provide a easy way to install nvidia close source driver as well.</p>
<a id="more"></a>

<h2 id="Update-your-source-list"><a href="#Update-your-source-list" class="headerlink" title="Update your source.list"></a>Update your source.list</h2><p>To install nvidia close source driver, you need to add contrib non-free at every ‚Äúmain‚Äù item in your source.list:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo sed -i.bak <span class="string">'s/stretch[^ ]* main$/&amp; contrib non-free/g'</span> /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p>This command will help you to do that meanwhile create a .bak file to backup your origin source.list.<br>Don‚Äôt forget to do apt update after that:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<h2 id="Install-Bumblebee"><a href="#Install-Bumblebee" class="headerlink" title="Install Bumblebee"></a>Install Bumblebee</h2><p>If you have installed nvidia driver before, you should remove them to continue:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get remove nvidia*</span><br></pre></td></tr></table></figure>
<p>Then you can start to install bumblebee now:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt install bumblebee-nvidia primus</span><br></pre></td></tr></table></figure>
<p>Don‚Äôt worry about <strong>nouveau</strong> driver, bumblebee will help you to handle it.<br>Then we need to add your user account to bumlebee group:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo adduser <span class="variable">$USER</span> bumlebee</span><br></pre></td></tr></table></figure>
<p>After that you might need to restart your computer. Application will use your intel card by default. If you want some application use your nvidia card, use</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">optirun $(YOURAPP)</span><br></pre></td></tr></table></figure>

<h2 id="Verify-your-driver"><a href="#Verify-your-driver" class="headerlink" title="Verify your driver"></a>Verify your driver</h2><p>A easy way to verify this is to use <strong>glxspheres</strong>. It‚Äôs a part of <a href="https://virtualgl.org/" target="_blank" rel="noopener">virtualgl project</a>. <strong>glxgears</strong> is not recommended because it‚Äôs not a tool for benchmarking.<br>We can use Intel display card to run it first:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vblank_mode=0 /opt/VirtualGL/bin/glxspheres64</span><br></pre></td></tr></table></figure>
<p><strong>vblank_mode=0</strong> will temporarily disable vertical synchronization. If you don‚Äôt add it, you might only can get 60 fps which is same as your monitor refresh rate. The result I got:</p>
<p><img src="/2018-11-20/Debian-nvidia-display-card-driver-install/1.png" alt></p>
<p>Then run it with nvidia card:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vblank_mode=0 optirun /opt/VirtualGL/bin/glxspheres64</span><br></pre></td></tr></table></figure>

<p><img src="/2018-11-20/Debian-nvidia-display-card-driver-install/2.png" alt></p>
<p>It‚Äôs much faster than Intel card.</p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Issue:No such file or directory</title>
    <url>/2018-11-14/Issue-No-such-file-or-directory/</url>
    <content><![CDATA[<h1 id="Clarify-this-issue"><a href="#Clarify-this-issue" class="headerlink" title="Clarify this issue"></a>Clarify this issue</h1><p>If you trying to execute a executable binary, but you see this error ‚ÄúNo such file or directory‚Äù, it‚Äôs normally caused by you trying to run a 32-bits binary on a 64-bits OS.</p>
<a id="more"></a>

<p>First of all you should check your OS:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>
<p>If you see <strong>x86_64</strong>, we can make sure you are using a 64-bits OS.<br>Then we should check file type of executable binary:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">file <span class="variable">$&#123;THE_EXECUTABLE_BIN&#125;</span></span><br></pre></td></tr></table></figure>
<p>If you see <strong>ELF 32-bit LSB executable, Intel 80386</strong>, basically we can make sure you are trying to run a 32-bits binary on a 64-bits OS meanwhile your OS haven‚Äôt add <strong>i386</strong> architecture yet.</p>
<h1 id="How-to-fix-it"><a href="#How-to-fix-it" class="headerlink" title="How to fix it"></a>How to fix it</h1><p>We need to add <strong>i386</strong> architecture support on your 64-bits OS.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo dpkg --add-architecture i386</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install multiarch-support</span><br><span class="line">sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386</span><br></pre></td></tr></table></figure>
<p>After that, try to run it again :)</p>
]]></content>
      <categories>
        <category>ÈóÆÈ¢òËÆ∞ÂΩï</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Cross compile gRPC for ARM</title>
    <url>/2018-11-08/Cross-compile-gRPC-for-ARM/</url>
    <content><![CDATA[<p> This post will tell you how to cross compile gPRC static lib for ARM.<br> ÂâçÊÆµÊó∂Èó¥Â∞ùËØï‰∫§ÂèâÁºñËØëgRPCÈÅáÂà∞‰∫Ü‰∏çÂ∞ëÁöÑÈ∫ªÁÉ¶ÔºåÂÜôÁØápostËÆ∞ÂΩï‰∏Ä‰∏ã„ÄÇ</p>
<a id="more"></a>
<p>gRPC</p>
<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><p>First of all, you should have gRPC source code. git clone it from github. Then update submodules:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> grpc</span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure>
<h2 id="Install-zlib-for-your-arm-compiler-Optional"><a href="#Install-zlib-for-your-arm-compiler-Optional" class="headerlink" title="Install zlib for your arm compiler[Optional]"></a>Install zlib for your arm compiler[Optional]</h2><p>libz is one of gRPC dependencies. If you haven‚Äôt installed it for your arm compiler yet, you may need to install it. You can get zlib at <a href="http://www.zlib.net/" target="_blank" rel="noopener">zlib Home Site</a>. After download and unzip it, set cross compiler and build it:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> CC=arm-linux-gnueabihf-gcc</span><br><span class="line"><span class="built_in">export</span> AR=arm-linux-gnueabihf-ar</span><br><span class="line">./configure</span><br><span class="line">make -j4</span><br></pre></td></tr></table></figure>
<p>then install it if build succeed:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make install prefix=/usr/arm-linux-gnueabihf</span><br></pre></td></tr></table></figure>

<h2 id="Compile-and-install-protobuf-amp-gRPC-for-HOST"><a href="#Compile-and-install-protobuf-amp-gRPC-for-HOST" class="headerlink" title="Compile and install protobuf &amp; gRPC for HOST"></a>Compile and install protobuf &amp; gRPC for HOST</h2><p>protobuf:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> grpc/third_party/protobuf</span><br><span class="line">./autogen.sh &amp;&amp; ./configure &amp;&amp; make -j4</span><br><span class="line">sudo make install -j4</span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
<p>gRPC:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">make -j4 &amp;&amp; sudo make install -j4 &amp;&amp; sudo ldconfig</span><br></pre></td></tr></table></figure>

<h2 id="Cross-compile-static-lib-for-ARM"><a href="#Cross-compile-static-lib-for-ARM" class="headerlink" title="Cross compile static lib for ARM"></a>Cross compile static lib for ARM</h2><p>make plugins first:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make clean</span><br><span class="line">make plugins CC=arm-linux-gnueabihf-gcc -j4</span><br></pre></td></tr></table></figure>
<p>Cross compile gRPC:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> GRPC_CROSS_COMPILE=<span class="literal">true</span></span><br><span class="line"><span class="built_in">export</span> GRPC_CROSS_AROPTS=<span class="string">"cr --target=elf32-little"</span></span><br><span class="line">make -j4 HAS_PKG_CONFIG=<span class="literal">false</span> \</span><br><span class="line">    CC=arm-linux-gnueabihf-gcc \</span><br><span class="line">    CXX=arm-linux-gnueabihf-g++ \</span><br><span class="line">    RANLIB=arm-linux-gnueabihf-ranlib \</span><br><span class="line">    LD=arm-linux-gnueabihf-ld \</span><br><span class="line">    LDXX=arm-linux-gnueabihf-g++ \</span><br><span class="line">    AR=arm-linux-gnueabihf-ar \</span><br><span class="line">    PROTOBUF_CONFIG_OPTS=<span class="string">"--host=arm-linux-gnueabihf --with-protoc=/usr/local/bin/protoc"</span> static</span><br></pre></td></tr></table></figure>
<p><strong>static</strong> is important. I tried to build shared lib but there will be a lot of errors because arm-linux-gnueabihf-ld doesn‚Äôt take ‚Äú-Wl‚Äù as a parameter. If build succeed, you can find your static lib at ‚Äúgrpc/libs/opt‚Äù.</p>
<p>reference: <a href="https://github.com/grpc/grpc/issues/9719" target="_blank" rel="noopener">https://github.com/grpc/grpc/issues/9719</a></p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Linux</tag>
        <tag>gPRC</tag>
      </tags>
  </entry>
  <entry>
    <title>git commandÂ§áÂøòÂΩï</title>
    <url>/2018-10-21/git-command%E5%A4%87%E5%BF%98%E5%BD%95/</url>
    <content><![CDATA[<p>‚Ä¶</p>
<a id="more"></a>

<h2 id="ÂÖ®Â±ÄÈÖçÁΩÆÁî®Êà∑ÂêçÂíåÈÇÆÁÆ±"><a href="#ÂÖ®Â±ÄÈÖçÁΩÆÁî®Êà∑ÂêçÂíåÈÇÆÁÆ±" class="headerlink" title="ÂÖ®Â±ÄÈÖçÁΩÆÁî®Êà∑ÂêçÂíåÈÇÆÁÆ±:"></a>ÂÖ®Â±ÄÈÖçÁΩÆÁî®Êà∑ÂêçÂíåÈÇÆÁÆ±:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">"Alex.Li"</span></span><br><span class="line">git config --global user.email <span class="string">"Alex.Li@xxxx.com"</span></span><br></pre></td></tr></table></figure>

<h2 id="sshÂØÜÈí•ÁîüÊàê"><a href="#sshÂØÜÈí•ÁîüÊàê" class="headerlink" title="sshÂØÜÈí•ÁîüÊàê:"></a>sshÂØÜÈí•ÁîüÊàê:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"Alex.Li@xxxx.com"</span></span><br></pre></td></tr></table></figure>

<h2 id="ÂÇ®Â≠òhttps-httpÊñπÂºèÁî®Êà∑ÂêçÂØÜÁ†Å"><a href="#ÂÇ®Â≠òhttps-httpÊñπÂºèÁî®Êà∑ÂêçÂØÜÁ†Å" class="headerlink" title="ÂÇ®Â≠òhttps/httpÊñπÂºèÁî®Êà∑ÂêçÂØÜÁ†Å:"></a>ÂÇ®Â≠òhttps/httpÊñπÂºèÁî®Êà∑ÂêçÂØÜÁ†Å:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure>

<h2 id="Ê∑ªÂä†tagÂπ∂Êé®ÈÄÅÂà∞ËøúÁ´Ø"><a href="#Ê∑ªÂä†tagÂπ∂Êé®ÈÄÅÂà∞ËøúÁ´Ø" class="headerlink" title="Ê∑ªÂä†tagÂπ∂Êé®ÈÄÅÂà∞ËøúÁ´Ø:"></a>Ê∑ªÂä†tagÂπ∂Êé®ÈÄÅÂà∞ËøúÁ´Ø:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git tag -a 1.0.0 -m <span class="string">'add version 1.0.0'</span></span><br><span class="line">git push origin master --tags</span><br></pre></td></tr></table></figure>

<h2 id="Êõ¥Êîπ‰∏Ä‰∏™https‰ªìÂ∫ì‰∏∫ssh‰ªìÂ∫ìÔºö"><a href="#Êõ¥Êîπ‰∏Ä‰∏™https‰ªìÂ∫ì‰∏∫ssh‰ªìÂ∫ìÔºö" class="headerlink" title="Êõ¥Êîπ‰∏Ä‰∏™https‰ªìÂ∫ì‰∏∫ssh‰ªìÂ∫ìÔºö"></a>Êõ¥Êîπ‰∏Ä‰∏™https‰ªìÂ∫ì‰∏∫ssh‰ªìÂ∫ìÔºö</h2><p><em>.git/config</em>‰∏≠</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">url &#x3D; https:&#x2F;&#x2F;xxxx.com&#x2F;somebody&#x2F;abcdef.git</span><br></pre></td></tr></table></figure>
<p>Êîπ‰∏∫</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">url &#x3D; git@gxxxx.com:somebody&#x2F;abcdef.git</span><br></pre></td></tr></table></figure>
<p>Âèç‰πãÂàôÂèç</p>
<h2 id="Âà†Èô§remotes-origin-branch"><a href="#Âà†Èô§remotes-origin-branch" class="headerlink" title="Âà†Èô§remotes/origin/{branch}"></a>Âà†Èô§remotes/origin/{branch}</h2><p>ËøúÁ´ØÂàÜÊîØÂ∑≤ÁªèÂà†Èô§Ôºå ‰ΩÜÊú¨Âú∞‰ªçÂèØËßÅremotes/origin/{branch}</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote prune origin</span><br></pre></td></tr></table></figure>

<h2 id="repo-Êìç‰Ωú"><a href="#repo-Êìç‰Ωú" class="headerlink" title="repo Êìç‰Ωú"></a>repo Êìç‰Ωú</h2><p>ÂØπÊØè‰∏™Â≠êrepoËøõË°åÊìç‰Ωú</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">repo forall -vc <span class="string">"git cmd"</span></span><br></pre></td></tr></table></figure>
<p>i.e.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">repo forall -vc <span class="string">"git reset --hard"</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ Design Patterns: Singleton</title>
    <url>/2018-09-12/Cpp-Design-Patterns-Singleton/</url>
    <content><![CDATA[<p>Singleton is a widely used design patterns in software engineering. This post will tell you when should we use Singleton and how to design a universal,template based Singleton base class.</p>
<a id="more"></a>

<h2 id="Why-Singleton"><a href="#Why-Singleton" class="headerlink" title="Why Singleton"></a>Why Singleton</h2><p>For some special cases, we want one class only can be instantiated only once to avoid unexpected behavior, for example threadpool and logger. Threadpool and logger normally should be instantiated when we start the program and it should have the same lifetime as program. So we need to make sure those class will not be instantiated more than once and also should not be destroyed until program end.</p>
<h2 id="Differences-Between-Static-Class-And-Singleton"><a href="#Differences-Between-Static-Class-And-Singleton" class="headerlink" title="Differences Between Static Class And Singleton"></a>Differences Between Static Class And Singleton</h2><p>Static class basically is a bunch of static functions, it‚Äôs not an OOP design. Singleton can implement interfaces and it‚Äôs more OOP like.</p>
<h2 id="How-To-Design-A-Singleton-Base-Class"><a href="#How-To-Design-A-Singleton-Base-Class" class="headerlink" title="How To Design A Singleton Base Class"></a>How To Design A Singleton Base Class</h2><p>One of the most important feature of singleton class is non-copyable. To make it non-copyable, delete copy constructor and override operator ‚Äú=‚Äù:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Singleton(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br></pre></td></tr></table></figure>
<p>Another part is singleton‚Äôs constructor and destructor should be private or protected to avoid user call constructor and destructor accidentally. :</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Singleton() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~Singleton() = <span class="keyword">default</span>;</span><br></pre></td></tr></table></figure>
<p>set destructor as virtual because it‚Äôs base class.The only public method is getInstance() which will return static instance of singleton class.</p>
<h2 id="An-example"><a href="#An-example" class="headerlink" title="An example"></a>An example</h2><p>Full source code <a href="https://github.com/codingspirit/VoiceSpirit/blob/develop/include/Singleton.h" target="_blank" rel="noopener"><strong>Singleton.h</strong></a>:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> BaseClass &#123;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Args&gt;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> T&amp; <span class="title">getInstance</span><span class="params">(Args&amp;&amp;... args)</span> <span class="keyword">noexcept</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> T instance&#123;<span class="built_in">std</span>::forward&lt;Args&gt;(args)...&#125;;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">    Singleton() = <span class="keyword">default</span>;</span><br><span class="line">    <span class="keyword">virtual</span> ~Singleton() = <span class="keyword">default</span>;</span><br><span class="line">    Singleton(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;  <span class="comment">// class Singleton</span></span><br><span class="line"></span><br><span class="line">&#125;  <span class="comment">// namespace BaseClass</span></span><br></pre></td></tr></table></figure>

<p>In this design, return value of getInstance() is a reference and use template to make it universal. When inherit this class, need to define subclass like this:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySingleton</span> :</span> <span class="keyword">public</span> BaseClass::Singleton&lt;MySingleton&gt; &#123;</span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span>:</span>:Singleton&lt;MySingleton&gt;;</span><br><span class="line">    <span class="comment">//declare as friend class of Singleton to give authority to base class can access private method</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    MySingleton();</span><br><span class="line">    ~MySingleton();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/codingspirit/VoiceSpirit/blob/develop/include/Singleton.h" target="_blank" rel="noopener"><strong>BasicLogger.h</strong></a>: is also a good example for this.</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>Áé∞Âú®ÊîØÊåÅHTTPSÂï¶</title>
    <url>/2018-06-11/%E7%8E%B0%E5%9C%A8%E6%94%AF%E6%8C%81HTTPS%E5%95%A6/</url>
    <content><![CDATA[<p>‰ªé‰ªäÂ§©ÂºÄÂßãÔºåÊú¨Á´ôÊîØÊåÅHTTPSËÆøÈóÆÂï¶ÔºÅ</p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>makefile summarize</title>
    <url>/2018-06-05/makefile-summarize/</url>
    <content><![CDATA[<p>  ‚Ä¶</p>
<a id="more"></a>

<h2 id="Variable-Assignment-ÂèòÈáèËµãÂÄº"><a href="#Variable-Assignment-ÂèòÈáèËµãÂÄº" class="headerlink" title="Variable Assignment(ÂèòÈáèËµãÂÄº)"></a>Variable Assignment(ÂèòÈáèËµãÂÄº)</h2><h3 id="comparison-of-‚Äú-‚Äú-‚Äú-‚Äú-‚Äú-‚Äú-and-‚Äú-‚Äú"><a href="#comparison-of-‚Äú-‚Äú-‚Äú-‚Äú-‚Äú-‚Äú-and-‚Äú-‚Äú" class="headerlink" title="comparison of ‚Äú=‚Äú, ‚Äú:=‚Äú , ‚Äú?=‚Äú and ‚Äú+=‚Äú"></a>comparison of ‚Äú<strong>=</strong>‚Äú, ‚Äú<strong>:=</strong>‚Äú , ‚Äú<strong>?=</strong>‚Äú and ‚Äú<strong>+=</strong>‚Äú</h3><h4 id="‚Äú-‚Äú"><a href="#‚Äú-‚Äú" class="headerlink" title="‚Äú=‚Äú"></a>‚Äú<strong>=</strong>‚Äú</h4><p>Variables defined with ‚Äò=‚Äô are recursively expanded variables. It means that value of this variable will be the last value gived by ‚Äò=‚Äô in makefile. For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a = foo</span><br><span class="line">b = <span class="variable">$(a)</span> abc</span><br><span class="line">a = oof</span><br></pre></td></tr></table></figure>
<p>In this case, the value of <strong>b</strong> will be <strong>oof abc</strong>.</p>
<h4 id="‚Äú-‚Äú-1"><a href="#‚Äú-‚Äú-1" class="headerlink" title="‚Äú:=‚Äú"></a>‚Äú<strong>:=</strong>‚Äú</h4><p>Variables defined with ‚Äò:=‚Äô are simply expanded variables. Just like ‚Äú<strong>=</strong>‚Äú in other language(C/C++/C#/Java). For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a := foo</span><br><span class="line">b := <span class="variable">$(a)</span> abc</span><br><span class="line">a := oof</span><br></pre></td></tr></table></figure>
<p>In this case, the value of <strong>b</strong> will be <strong>foo abc</strong>.</p>
<h4 id="‚Äú-‚Äú-2"><a href="#‚Äú-‚Äú-2" class="headerlink" title="‚Äú?=‚Äú"></a>‚Äú<strong>?=</strong>‚Äú</h4><p>We can use ‚Äò?=‚Äô to set a value to a variable only if this variable is not set yet. For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a ?= foo</span><br></pre></td></tr></table></figure>
<p>It is similar to:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(<span class="built_in">origin</span> a)</span>, undefined)</span><br><span class="line">a = bar</span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure>

<h4 id="‚Äú-‚Äú-3"><a href="#‚Äú-‚Äú-3" class="headerlink" title="‚Äú+=‚Äú"></a>‚Äú<strong>+=</strong>‚Äú</h4><p>‚Äò+=‚Äô is using for appending text. It will appending a <strong>space</strong> between two text.For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a = first</span><br><span class="line">a += second</span><br></pre></td></tr></table></figure>
<p>In this case, the value of <strong>a</strong> will be <strong>first second</strong>.</p>
<h2 id="Useful-Makefile-Functions"><a href="#Useful-Makefile-Functions" class="headerlink" title="Useful Makefile Functions"></a>Useful Makefile Functions</h2><p>  In makefile, functions should be called like this:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">var = <span class="variable">$(functionname arg1,arg2,arg3...)</span></span><br></pre></td></tr></table></figure>

<h3 id="wildcard"><a href="#wildcard" class="headerlink" title="wildcard"></a>wildcard</h3><p><strong>wildcard</strong> will help you get specific file name list in a dir.For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">SRC_DIR := src</span><br><span class="line">SOURCES := <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SRC_DIR)</span>/*.cpp)</span></span><br></pre></td></tr></table></figure>
<p>In this case, SUORCES will be set like this(if *.cpp exists in SRC_DIR):</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">src/a.cpp src/b.cpp src/c.cpp</span><br></pre></td></tr></table></figure>
<h3 id="addprefix"><a href="#addprefix" class="headerlink" title="addprefix"></a>addprefix</h3><p><strong>addprefix</strong> is using for add one value to the front of another value. For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a = <span class="variable">$(<span class="built_in">addsuffix</span> .o,foo bar)</span></span><br></pre></td></tr></table></figure>
<p><strong>a</strong> will be set as ‚Äò<strong>foo.o bar.o</strong>‚Äò</p>
<h3 id="patsubst"><a href="#patsubst" class="headerlink" title="patsubst"></a>patsubst</h3><p><strong>$(patsubst pattern,replacement,text)</strong>:Finds whitespace-separated words in text that match pattern and replaces them with replacement(<a href="https://www.gnu.org/software/make/manual/html_node/Text-Functions.html#index-_0025_002c-quoting-in-patsubst" target="_blank" rel="noopener">gnu.org</a>)<br>For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a = <span class="variable">$(<span class="built_in">patsubst</span> %.cpp,%.o,a.cpp b.h c.cpp)</span></span><br></pre></td></tr></table></figure>
<p><strong>a</strong> will be set as ‚Äò<strong>a.o b.h c.o</strong>‚Äò</p>
<h3 id="notdir"><a href="#notdir" class="headerlink" title="notdir"></a>notdir</h3><p><strong>$(notdir names‚Ä¶)</strong>:remove dir in names.For example:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">a = <span class="variable">$(<span class="built_in">notdir</span> src/foo.c src/bar.c)</span></span><br></pre></td></tr></table></figure>
<p><strong>a</strong> will be set as ‚Äò<strong>foo.c bar.c</strong>‚Äò</p>
<h3 id="Using-those-functions-to-genreate-o-file-and-exec-files-in-specific-dir"><a href="#Using-those-functions-to-genreate-o-file-and-exec-files-in-specific-dir" class="headerlink" title="Using those functions to genreate *.o file and exec files in specific dir"></a>Using those functions to genreate *.o file and exec files in specific dir</h3><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">SRC_DIR:=src</span><br><span class="line">OBJ_DIR:=obj</span><br><span class="line">OUT_DIR:=out</span><br><span class="line">SOURCES:=<span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SRC_DIR)</span>/*.cpp)</span></span><br><span class="line">OBJECTS:=<span class="variable">$(<span class="built_in">addprefix</span> <span class="variable">$(OBJ_DIR)</span>/,$(<span class="built_in">patsubst</span> %.cpp,%.o,$(<span class="built_in">notdir</span> <span class="variable">$(SOURCES)</span>)</span>))</span><br></pre></td></tr></table></figure>

<h2 id="Phony-Targets-‰º™ÁõÆÊ†á"><a href="#Phony-Targets-‰º™ÁõÆÊ†á" class="headerlink" title="Phony Targets(‰º™ÁõÆÊ†á)"></a>Phony Targets(‰º™ÁõÆÊ†á)</h2><p>If we have a recipe :</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -rf <span class="variable">$(OBJ_DIR)</span> <span class="variable">$(OUT_DIR)</span></span><br></pre></td></tr></table></figure>
<p>It will works well until one day you add one file called <strong>clean</strong>. In this case, you need add .PHONY:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">.PHONY</span>:clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -rf <span class="variable">$(OBJ_DIR)</span> <span class="variable">$(OUT_DIR)</span></span><br></pre></td></tr></table></figure>
<p>If we do this, ‚Äòmake clean‚Äô will run the recipe regardless of whether there is a file named clean.</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>makefile</tag>
      </tags>
  </entry>
  <entry>
    <title>make: warning: Clock skew detected</title>
    <url>/2018-05-24/make-warning-Clock-skew-detected/</url>
    <content><![CDATA[<p>Sometimes <strong>make</strong> will output warning like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">make: warning:  Clock skew detected.  Your build may be incomplete.</span><br></pre></td></tr></table></figure>

<p>It was caused by file time-stamps are ahead of clients‚Äô clock.</p>
<a id="more"></a>

<p>It can be fixed by update time-stamps:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">find . -<span class="built_in">exec</span> touch &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>Then <strong>make clean</strong> and <strong>make</strong> again</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Makefile</tag>
      </tags>
  </entry>
  <entry>
    <title>LinuxÈÖçÁΩÆÈªòËÆ§Â£∞Âç°</title>
    <url>/2018-05-02/Linux%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%A3%B0%E5%8D%A1/</url>
    <content><![CDATA[<p>Ê†ëËéìÊ¥æÂ§öÂ£∞Âç°ÔºåÂ∞ùËØïÈÖçÁΩÆÂ£∞Âç°0‰∏∫ÈªòËÆ§ËæìÂá∫ËÆæÂ§áÔºåÂ£∞Âç°1‰∏∫ÈªòËÆ§ËæìÂÖ•ËÆæÂ§á„ÄÇ</p>
<a id="more"></a>

<h2 id="List-all-play-record-device"><a href="#List-all-play-record-device" class="headerlink" title="List all play/record device"></a>List all play/record device</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi:~ $ aplay -l</span><br><span class="line">**** List of PLAYBACK Hardware Devices ****</span><br><span class="line">card 0: ALSA [bcm2835 ALSA], device 0: bcm2835 ALSA [bcm2835 ALSA]</span><br><span class="line">  Subdevices: 7/7</span><br><span class="line">  Subdevice <span class="comment">#0: subdevice #0</span></span><br><span class="line">  Subdevice <span class="comment">#1: subdevice #1</span></span><br><span class="line">  Subdevice <span class="comment">#2: subdevice #2</span></span><br><span class="line">  Subdevice <span class="comment">#3: subdevice #3</span></span><br><span class="line">  Subdevice <span class="comment">#4: subdevice #4</span></span><br><span class="line">  Subdevice <span class="comment">#5: subdevice #5</span></span><br><span class="line">  Subdevice <span class="comment">#6: subdevice #6</span></span><br><span class="line">card 0: ALSA [bcm2835 ALSA], device 1: bcm2835 ALSA [bcm2835 IEC958/HDMI]</span><br><span class="line">  Subdevices: 1/1</span><br><span class="line">  Subdevice <span class="comment">#0: subdevice #0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pi@raspberrypi:~ $ arecord -l</span><br><span class="line">**** List of CAPTURE Hardware Devices ****</span><br><span class="line">card 1: Device [USB PnP Sound Device], device 0: USB Audio [USB Audio]</span><br><span class="line">  Subdevices: 1/1</span><br><span class="line">  Subdevice <span class="comment">#0: subdevice #0</span></span><br></pre></td></tr></table></figure>
<h2 id="Set-card-0-as-playback-card-1-as-capture"><a href="#Set-card-0-as-playback-card-1-as-capture" class="headerlink" title="Set card 0 as playback, card 1 as capture"></a>Set card 0 as playback, card 1 as capture</h2><p>Open <strong>.asoundrc</strong> file under <strong>$HOME</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$HOME</span></span><br><span class="line">vim .asoundrc</span><br></pre></td></tr></table></figure>
<p>Modify <strong>.asoundrc</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pcm.!default &#123;</span><br><span class="line">    type asym</span><br><span class="line">    playback.pcm &quot;plughw:0,0&quot;</span><br><span class="line">    capture.pcm  &quot;plughw:1,0&quot;</span><br><span class="line">&#125;</span><br><span class="line">ctl.!default &#123;</span><br><span class="line">        type hw</span><br><span class="line">        card 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>*‚Äùplughw:1,0‚Äù* means card 1, device 0</p>
<p>Then <strong>save file</strong> and <strong>reboot</strong></p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Raspberry Pi</tag>
      </tags>
  </entry>
  <entry>
    <title>UbuntuÂàáÊç¢pythonÁâàÊú¨</title>
    <url>/2018-04-02/Ubuntu%E5%88%87%E6%8D%A2python%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<p>  Ubuntu17.10ÈªòËÆ§ÁöÑpython versionÊòØ2.7ÔºåÂ¶ÇÊûúÂÆâË£Ö‰∫Ü3.6ÈªòËÆ§ÁöÑÊâßË°åÁâàÊú¨‰ªçÊòØ2.7„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÂàáÊç¢python versionÔºåÂèØ‰ª•ÈÄöËøáÈÄâÊã©alternativesÁöÑÊñπÂºèÂàáÊç¢ÁâàÊú¨„ÄÇ</p>
<a id="more"></a>

<h2 id="Ê£ÄÊü•ÂΩìÂâçÂÆâË£ÖÁöÑpythonÁâàÊú¨"><a href="#Ê£ÄÊü•ÂΩìÂâçÂÆâË£ÖÁöÑpythonÁâàÊú¨" class="headerlink" title="Ê£ÄÊü•ÂΩìÂâçÂÆâË£ÖÁöÑpythonÁâàÊú¨"></a>Ê£ÄÊü•ÂΩìÂâçÂÆâË£ÖÁöÑpythonÁâàÊú¨</h2><p>  ‰πãÂâçÈÅáÂà∞‰∏Ä‰∏™Â•áÊÄ™ÁöÑÁé∞Ë±°ÔºåUbuntuÁ™ÅÁÑ∂‰∏çËÉΩ‰ΩøÁî®python ‚ÄìversionÊ£ÄÊü•ÁâàÊú¨:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">The program <span class="string">'python'</span> can be found <span class="keyword">in</span> the following packages:</span><br><span class="line"> * python-minimal</span><br><span class="line"> * python3</span><br><span class="line">Try: apt install &lt;selected package&gt;</span><br></pre></td></tr></table></figure>
<p>‰ΩøÁî®sudo apt install python3Âêé‰æùÁÑ∂Âá∫Áé∞‰∏äËø∞ÈóÆÈ¢ò„ÄÇËß£ÂÜ≥ÂäûÊ≥ïÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt install python-minimal</span><br></pre></td></tr></table></figure>
<p>‰πãÂêéÂèØ‰ª•‰ΩøÁî®python ‚ÄìversionÂæóÂà∞ÁõÆÂâçÁ≥ªÁªüÈªòËÆ§ÁöÑÁâàÊú¨‰∏∫2.7.14.</p>
<h2 id="ÂàáÊç¢pythonÁâàÊú¨"><a href="#ÂàáÊç¢pythonÁâàÊú¨" class="headerlink" title="ÂàáÊç¢pythonÁâàÊú¨"></a>ÂàáÊç¢pythonÁâàÊú¨</h2><p>È¶ñÂÖà‰ΩøÁî®‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ê£ÄÊü•ÂΩìÂâçÊòØÂê¶‰∏∫pythonËÆæÁΩÆ‰∫ÜalternativesÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">update-alternatives --list python</span><br></pre></td></tr></table></figure>
<p>Â¶ÇÊûúËæìÂá∫:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">update-alternatives: error: no alternatives <span class="keyword">for</span> python</span><br></pre></td></tr></table></figure>
<p>ÂàôÈúÄË¶ÅÊâãÂä®Ê∑ªÂä†alternatives„ÄÇÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅÂàáÊç¢ÁâàÊú¨Âà∞python3.xÔºåÈ¶ñÂÖàÊàë‰ª¨Ë¶Å‰ΩøÁî®whereisÂæóÂà∞python3ÁöÑÂÆâË£Ö‰ΩçÁΩÆÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">whereis python3</span><br></pre></td></tr></table></figure>
<p>‰ªéËæìÂá∫ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìÂâçÂÆâË£Ö‰∫ÜÂ§ö‰∏™ÁâàÊú¨ÁöÑpython3ÔºåÂÆâË£Ö‰ΩçÁΩÆÈÉΩÂú®/usr/bin/python3.xÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">python3: /usr/bin/python3.6m /usr/bin/python3 /usr/bin/python3.6 /usr/lib/python3.7 /usr/lib/python3 /usr/lib/python3.6 /etc/python3 /etc/python3.6 /usr/<span class="built_in">local</span>/lib/python3.6 /usr/include/python3.6m /usr/share/python3 /usr/share/man/man1/python3.1.gz</span><br></pre></td></tr></table></figure>
<p>Âú®Áü•ÈÅìpythonÂÆâË£Ö‰ΩçÁΩÆÂêéÂ∞±ÂèØ‰ª•Ê∑ªÂä†alternatives,‰ª•python3.6‰∏∫‰æãÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2</span><br><span class="line"><span class="comment">#the last "2" stand for priority level</span></span><br></pre></td></tr></table></figure>
<p>ÂÖ∂‰∏≠ÊúÄÂêéÁöÑ‚Äù2‚ÄùË°®Á§∫‰ºòÂÖàÁ∫ß‰∏∫2„ÄÇÂêåÁêÜÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÊääÂÖ∂‰ªñÁâàÊú¨ÁöÑpythonÂä†ÂÖ•alternatives:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 1</span><br></pre></td></tr></table></figure>
<p>Áé∞Âú®‰ΩøÁî®update-alternatives ‚Äìconfig pythonÂ∞±ÂèØ‰ª•ÁúãÂà∞ÂΩìÂâçpythonÊâÄÊúâÁöÑalternativesÂπ∂ËøõË°åÁâàÊú¨ÂàáÊç¢Ôºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">There are 2 choices <span class="keyword">for</span> the alternative python (providing /usr/bin/python).</span><br><span class="line"></span><br><span class="line">  Selection    Path                Priority   Status</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">  0            /usr/bin/python3.6   2         auto mode</span><br><span class="line">* 1            /usr/bin/python2.7   1         manual mode</span><br><span class="line">  2            /usr/bin/python3.6   2         manual mode</span><br><span class="line"></span><br><span class="line">Press &lt;enter&gt; to keep the current choice[*], or <span class="built_in">type</span> selection number:</span><br></pre></td></tr></table></figure>
<p>ËæìÂÖ•Selection numberÂ∞±ÂèØ‰ª•ÂàáÊç¢ÁâàÊú¨Âï¶ÔºÅ</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Jenkins+Gerrit: Ëá™Âä®commit//code review//submit</title>
    <url>/2018-03-20/Jenkins-Gerrit-%E8%87%AA%E5%8A%A8commit-code-review-submit/</url>
    <content><![CDATA[<p>  Jenkins+GerritÁöÑ‰∏ÄËà¨Â∑•‰ΩúÊ®°ÂºèÔºöuser commit code to Gerrit-&gt;Jenkins test build success-&gt;other user code review +2-&gt;user submit-&gt;Jenkins release build-&gt;release SW. Êàë‰πãÂâçÂÜô‰∫Ü‰∏™release notes generator, Âú®Jenasdkins server‰∏ärelease buildÁöÑÊó∂ÂÄôÔºå ÂèØ‰ª•Ëá™Âä®ÁîüÊàêrelease notesÂπ∂ÊâìÂåÖÂπ∂ÂèëÁªôÂºÄÂèëËÄÖ„ÄÇ‰ΩÜÊòØËøô‰∏™release notesÂú®‰∏ã‰∏ÄÊ¨°buildÁöÑÊó∂ÂÄô‰ºöÂõ†‰∏∫workspaceÁöÑÊ∏ÖÁ©∫ËÄåË¢´Âà†Èô§ÔºåÂõ†Ê≠§Â∏åÊúõJenkinsËÉΩÂ§üÂ∞Ürelease notes commitÂà∞GerritÂπ∂‰øùÁïô‰∏ãÊù•ÔºåÊúÄÂêéÂÜçËá™Âä®‰∏ä‰º†Âà∞sharepoint‰∏ä„ÄÇÂÆûÁé∞‰∏äËø∞ËøáÁ®ãÂêéÔºåËá™Âä®ÂåñÊûÑÂª∫ÁöÑËá™Âä®ÂåñÁ®ãÂ∫¶‰ºöÊõ¥È´ò‰∏ÄÁÇπÔºåÂºÄÂèëËÄÖÂè™ÈúÄÂú®Jenkins‰∏äpress a button, releaseÂ∞±Ëá™Âä®ÂÆåÊàê‰∫Ü„ÄÇ</p>
<a id="more"></a>

<h2 id="Êñ∞Âª∫branch"><a href="#Êñ∞Âª∫branch" class="headerlink" title="Êñ∞Âª∫branch"></a>Êñ∞Âª∫branch</h2><p>  ÈÄöÂ∏∏Gerrit trigger jenkins buildÁöÑÊó∂ÂÄô, jenkins Âè™‰ºöÊäìÂèñÊüê‰∏ÄÊ¨°commitÔºåËøô‰ºöÂØºËá¥ÊäìÂèñÁöÑcode‰∏çÂú®‰ªª‰Ωï‰∏Ä‰∏™branch‰∏ä„ÄÇÊ≠§Êó∂ÈúÄË¶ÅÊñ∞Âª∫‰∏Ä‰∏™‰∏¥Êó∂ÁöÑbranchÔºåÊâçËÉΩÂú®ÂêéÈù¢ËøõË°åpush:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git branch <span class="string">"jenkins_temp"</span></span><br><span class="line">git checkout jenkins_temp</span><br></pre></td></tr></table></figure>
<h2 id="JenkinsÊ£ÄÊµãÊîπÂä®Âπ∂Êèê‰∫§"><a href="#JenkinsÊ£ÄÊµãÊîπÂä®Âπ∂Êèê‰∫§" class="headerlink" title="JenkinsÊ£ÄÊµãÊîπÂä®Âπ∂Êèê‰∫§"></a>JenkinsÊ£ÄÊµãÊîπÂä®Âπ∂Êèê‰∫§</h2><p>  È¶ñÂÖàÈúÄË¶ÅÊ£ÄÊµãÊñá‰ª∂ÊîπÂä®,‰ª•‰∏Ä‰∏™Âêç‰∏∫test.txtÁöÑÊñá‰ª∂‰∏∫‰æãÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$(git diff test.txt)</span>"</span> != <span class="string">""</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="comment">#if file has been modfied, do something</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Release_Notes.xlsx has been modfied"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Release_Notes.xlsx hasn't been modfied"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>  Staged changesÂπ∂commit:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git add test.txt</span><br><span class="line"><span class="comment">#if have two files: git add test1.txt text2.txt</span></span><br><span class="line">git commit -m <span class="string">"jenkins update test.txt</span></span><br></pre></td></tr></table></figure>
<p>Âè¶ÔºöÂ¶ÇÊûúÊèê‰∫§Êó∂Ê≤°ÊúâÁîüÊàêcommit id, ÂèØ‰ª•ÈÄöËøágit hooksÂÆûÁé∞Ëá™Âä®Ê∑ªÂä†commit id„ÄÇ</p>
<h2 id="Push-changes"><a href="#Push-changes" class="headerlink" title="Push changes"></a>Push changes</h2><p>  ÁÑ∂ÂêéÈúÄË¶ÅÊääÊîπÂä®PushÂà∞gitËøúÁ´Ø„ÄÇ‰πãÂâçÂú®Jenkins server‰∏äÈÖçÁΩÆËøágit ssh keyÔºåÂõ†Ê≠§ÊàëÂèØ‰ª•Âú®server‰∏äÁõ¥Êé•push changesËÄå‰∏ç‰ºöÊä•Èîô„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÂú®Jenkins execute shell‰∏≠ÊâßË°åËÑöÊú¨‰ºöÈÅáÂà∞Permission deniedÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫execute shellÁöÑËøêË°åÁéØÂ¢ÉÊòØÁã¨Á´ãÁöÑÔºåÂπ∂Ê≤°ÊúâÈÖçÁΩÆËøássh key„ÄÇËøôÊó∂ÂèØ‰ª•ÈÄöËøá‰∏¥Êó∂Ê∑ªÂä†keyÁöÑÊñπÂºèËøõË°åpushÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh-agent sh -c <span class="string">'ssh-add C:/Users/jenkins1/.ssh/id_rsa; git push origin</span></span><br><span class="line"><span class="string">jenkins_temp:refs/for/master'</span></span><br></pre></td></tr></table></figure>
<h2 id="verified-code-review-submit"><a href="#verified-code-review-submit" class="headerlink" title="verified,code review,submit"></a>verified,code review,submit</h2><p>  ÈÄöÂ∏∏Êù•ËÆ≤ÔºåPushÂà∞git remoteÁöÑcommitÈÉΩÈúÄË¶ÅÈÄöËøátest build,Â¶ÇÊûúÊàêÂäüÔºåÂ∞Ü‰ºöÁî±jenkins verified +1„ÄÇÂè™ÂêéÂÜçÈÄöËøáÂÖ∂‰ªñ‰∫∫code review, Âú®code review +2ÂêéÊâçËÉΩsubmitÔºå‰πüÂ∞±ÊòØÁúüÊ≠£ÂêàÂπ∂Âà∞remote branch‰∏ä„ÄÇÁî±‰∫éjenkinsÂè™Êõ¥Êîπ‰∫Ürelase notesËøôÁßçÈùû‰ª£Á†ÅÊñá‰ª∂ÔºåÊàë‰ª¨Â∏åÊúõjenkinsËÉΩÂ§üËá™Âä®Â∞ÜchangesÂêàÂπ∂Âà∞remote branch‰∏ä„ÄÇËøôÈáåÂ∞±ÈúÄË¶ÅÈÄöËøáshellÊìç‰ΩúGerrit„ÄÇ‰ªé<a href="https://gerrit-documentation.storage.googleapis.com/Documentation/2.5.1/cmd-review.html" target="_blank" rel="noopener">GerritÂÆòÊñπÊñáÊ°£</a>‰∏äÔºåÊàë‰ª¨ÂèØ‰ª•ÊâæÂà∞‰∏Ä‰∫õÂèØ‰ª•ÈÄöËøásshËøûÊé•ÂÆåÊàêÁöÑÊìç‰ΩúÔºåÂåÖÊã¨verified,code review,submitÁ≠âÁ≠â„ÄÇÊ≥®ÊÑèÔºåËøôÈáåÂêåÊ†∑ÈúÄË¶ÅÊåáÂÆössh keyÔºåÂê¶ÂàôPermission denied„ÄÇ</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh -i C:/Users/jenkins1/.ssh/id_rsa -p 29418 jenkins1@sw.domian.com gerrit review --verified +1 <span class="string">"<span class="variable">$(git rev-parse --short HEAD)</span>"</span></span><br><span class="line">ssh -i C:/Users/jenkins1/.ssh/id_rsa -p 29418 jenkins1@sw.domian.com gerrit review --code-review +2 <span class="string">"<span class="variable">$(git rev-parse --short HEAD)</span>"</span></span><br><span class="line">ssh -i C:/Users/jenkins1/.ssh/id_rsa -p 29418 jenkins1@sw.domian.com gerrit review -s <span class="string">"<span class="variable">$(git rev-parse --short HEAD)</span>"</span></span><br></pre></td></tr></table></figure>
<p>Ëá≥Ê≠§ÔºåjenkinsÂÆåÊàê‰∫ÜËá™Âä®ÊûÑÂª∫„ÄÇ<br>ÂÖ∂‰ªñÂèØËÉΩÊúâÁî®ÁöÑgit command:<br>git Ëé∑ÂèñÂΩìÂâçbranch name</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git symbolic-ref --short -q HEAD</span><br></pre></td></tr></table></figure>
<p>git Ëé∑Âèñ‰∏ä‰∏ÄÊ¨°Êèê‰∫§ÁöÑcommit id</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment">#short</span></span><br><span class="line">git rev-parse --short HEAD</span><br><span class="line"><span class="comment">#long</span></span><br><span class="line">git rev-parse HEAD</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CI</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>Continuous integration</tag>
      </tags>
  </entry>
  <entry>
    <title>ËΩ¨ËΩΩÔºöÂ∏∏Áî®ÁöÑÊ≠£ÂàôË°®ËææÂºè</title>
    <url>/2018-03-12/%E8%BD%AC%E8%BD%BD%EF%BC%9A%E5%B8%B8%E7%94%A8%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<p><a href="http://www.jb51.net/article/72867.htm" target="_blank" rel="noopener">ÂéüÊñáÂú∞ÂùÄ</a></p>
<a id="more"></a>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line">‰∏Ä„ÄÅÊ†°È™åÊï∞Â≠óÁöÑË°®ËææÂºè</span><br><span class="line"> <span class="number">1</span> Êï∞Â≠óÔºö^[<span class="number">0</span><span class="number">-9</span>]*$</span><br><span class="line"> <span class="number">2</span> n‰ΩçÁöÑÊï∞Â≠óÔºö^\d&#123;n&#125;$</span><br><span class="line"> <span class="number">3</span> Ëá≥Â∞ën‰ΩçÁöÑÊï∞Â≠óÔºö^\d&#123;n,&#125;$</span><br><span class="line"> <span class="number">4</span> m-n‰ΩçÁöÑÊï∞Â≠óÔºö^\d&#123;m,n&#125;$</span><br><span class="line"> <span class="number">5</span> Èõ∂ÂíåÈùûÈõ∂ÂºÄÂ§¥ÁöÑÊï∞Â≠óÔºö^(<span class="number">0</span>|[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)$</span><br><span class="line"> <span class="number">6</span> ÈùûÈõ∂ÂºÄÂ§¥ÁöÑÊúÄÂ§öÂ∏¶‰∏§‰ΩçÂ∞èÊï∞ÁöÑÊï∞Â≠óÔºö^([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$</span><br><span class="line"> <span class="number">7</span> Â∏¶<span class="number">1</span><span class="number">-2</span>‰ΩçÂ∞èÊï∞ÁöÑÊ≠£Êï∞ÊàñË¥üÊï∞Ôºö^(\-)?\d+(\.\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$</span><br><span class="line"> <span class="number">8</span> Ê≠£Êï∞„ÄÅË¥üÊï∞„ÄÅÂíåÂ∞èÊï∞Ôºö^(\-|\+)?\d+(\.\d+)?$</span><br><span class="line"> <span class="number">9</span> Êúâ‰∏§‰ΩçÂ∞èÊï∞ÁöÑÊ≠£ÂÆûÊï∞Ôºö^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">2</span>&#125;)?$</span><br><span class="line"><span class="number">10</span> Êúâ<span class="number">1</span>~<span class="number">3</span>‰ΩçÂ∞èÊï∞ÁöÑÊ≠£ÂÆûÊï∞Ôºö^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">3</span>&#125;)?$</span><br><span class="line"><span class="number">11</span> ÈùûÈõ∂ÁöÑÊ≠£Êï¥Êï∞Ôºö^[<span class="number">1</span><span class="number">-9</span>]\d*$ Êàñ ^([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;$ Êàñ ^\+?[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*$</span><br><span class="line"><span class="number">12</span> ÈùûÈõ∂ÁöÑË¥üÊï¥Êï∞Ôºö^\-[<span class="number">1</span><span class="number">-9</span>][]<span class="number">0</span><span class="number">-9</span><span class="string">"*$ Êàñ ^-[1-9]\d*$</span></span><br><span class="line"><span class="string">13 ÈùûË¥üÊï¥Êï∞Ôºö^\d+$ Êàñ ^[1-9]\d*|0$</span></span><br><span class="line"><span class="string">14 ÈùûÊ≠£Êï¥Êï∞Ôºö^-[1-9]\d*|0$ Êàñ ^((-\d+)|(0+))$</span></span><br><span class="line"><span class="string">15 ÈùûË¥üÊµÆÁÇπÊï∞Ôºö^\d+(\.\d+)?$ Êàñ ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</span></span><br><span class="line"><span class="string">16 ÈùûÊ≠£ÊµÆÁÇπÊï∞Ôºö^((-\d+(\.\d+)?)|(0+(\.0+)?))$ Êàñ ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</span></span><br><span class="line"><span class="string">17 Ê≠£ÊµÆÁÇπÊï∞Ôºö^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ Êàñ ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</span></span><br><span class="line"><span class="string">18 Ë¥üÊµÆÁÇπÊï∞Ôºö^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ Êàñ ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</span></span><br><span class="line"><span class="string">19 ÊµÆÁÇπÊï∞Ôºö^(-?\d+)(\.\d+)?$ Êàñ ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span></span><br><span class="line"><span class="string">‰∫å„ÄÅÊ†°È™åÂ≠óÁ¨¶ÁöÑË°®ËææÂºè</span></span><br><span class="line"><span class="string"> 1 Ê±âÂ≠óÔºö^[\u4e00-\u9fa5]&#123;0,&#125;$</span></span><br><span class="line"><span class="string"> 2 Ëã±ÊñáÂíåÊï∞Â≠óÔºö^[A-Za-z0-9]+$ Êàñ ^[A-Za-z0-9]&#123;4,40&#125;$</span></span><br><span class="line"><span class="string"> 3 ÈïøÂ∫¶‰∏∫3-20ÁöÑÊâÄÊúâÂ≠óÁ¨¶Ôºö^.&#123;3,20&#125;$</span></span><br><span class="line"><span class="string"> 4 Áî±26‰∏™Ëã±ÊñáÂ≠óÊØçÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ôºö^[A-Za-z]+$</span></span><br><span class="line"><span class="string"> 5 Áî±26‰∏™Â§ßÂÜôËã±ÊñáÂ≠óÊØçÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ôºö^[A-Z]+$</span></span><br><span class="line"><span class="string"> 6 Áî±26‰∏™Â∞èÂÜôËã±ÊñáÂ≠óÊØçÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ôºö^[a-z]+$</span></span><br><span class="line"><span class="string"> 7 Áî±Êï∞Â≠óÂíå26‰∏™Ëã±ÊñáÂ≠óÊØçÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ôºö^[A-Za-z0-9]+$</span></span><br><span class="line"><span class="string"> 8 Áî±Êï∞Â≠ó„ÄÅ26‰∏™Ëã±ÊñáÂ≠óÊØçÊàñËÄÖ‰∏ãÂàíÁ∫øÁªÑÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ôºö^\w+$ Êàñ ^\w&#123;3,20&#125;$</span></span><br><span class="line"><span class="string"> 9 ‰∏≠Êñá„ÄÅËã±Êñá„ÄÅÊï∞Â≠óÂåÖÊã¨‰∏ãÂàíÁ∫øÔºö^[\u4E00-\u9FA5A-Za-z0-9_]+$</span></span><br><span class="line"><span class="string">10 ‰∏≠Êñá„ÄÅËã±Êñá„ÄÅÊï∞Â≠ó‰ΩÜ‰∏çÂåÖÊã¨‰∏ãÂàíÁ∫øÁ≠âÁ¨¶Âè∑Ôºö^[\u4E00-\u9FA5A-Za-z0-9]+$ Êàñ ^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$</span></span><br><span class="line"><span class="string">11 ÂèØ‰ª•ËæìÂÖ•Âê´Êúâ^%&amp;',;=?$\"Á≠âÂ≠óÁ¨¶Ôºö[^%&amp;',;=?$\x22]+</span></span><br><span class="line"><span class="string">12 Á¶ÅÊ≠¢ËæìÂÖ•Âê´Êúâ~ÁöÑÂ≠óÁ¨¶Ôºö[^~\x22]+</span></span><br><span class="line"><span class="string">‰∏â„ÄÅÁâπÊÆäÈúÄÊ±ÇË°®ËææÂºè</span></span><br><span class="line"><span class="string"> 1 EmailÂú∞ÂùÄÔºö^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span></span><br><span class="line"><span class="string"> 2 ÂüüÂêçÔºö[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</span></span><br><span class="line"><span class="string"> 3 InternetURLÔºö[a-zA-z]+://[^\s]* Êàñ ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</span></span><br><span class="line"><span class="string"> 4 ÊâãÊú∫Âè∑Á†ÅÔºö^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</span></span><br><span class="line"><span class="string"> 5 ÁîµËØùÂè∑Á†Å("</span>XXX-XXXXXXX<span class="string">"„ÄÅ"</span>XXXX-XXXXXXXX<span class="string">"„ÄÅ"</span>XXX-XXXXXXX<span class="string">"„ÄÅ"</span>XXX-XXXXXXXX<span class="string">"„ÄÅ"</span>XXXXXXX<span class="string">"Âíå"</span>XXXXXXXX)Ôºö^(\(\d&#123;<span class="number">3</span>,<span class="number">4</span>&#125;-)|\d&#123;<span class="number">3.4</span>&#125;-)?\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;$ </span><br><span class="line"> <span class="number">6</span> ÂõΩÂÜÖÁîµËØùÂè∑Á†Å(<span class="number">0511</span><span class="number">-4405222</span>„ÄÅ<span class="number">021</span><span class="number">-87888822</span>)Ôºö\d&#123;<span class="number">3</span>&#125;-\d&#123;<span class="number">8</span>&#125;|\d&#123;<span class="number">4</span>&#125;-\d&#123;<span class="number">7</span>&#125;</span><br><span class="line"> <span class="number">7</span> Ë∫´‰ªΩËØÅÂè∑(<span class="number">15</span>‰Ωç„ÄÅ<span class="number">18</span>‰ΩçÊï∞Â≠ó)Ôºö^\d&#123;<span class="number">15</span>&#125;|\d&#123;<span class="number">18</span>&#125;$</span><br><span class="line"> <span class="number">8</span> Áü≠Ë∫´‰ªΩËØÅÂè∑Á†Å(Êï∞Â≠ó„ÄÅÂ≠óÊØçxÁªìÂ∞æ)Ôºö^([<span class="number">0</span><span class="number">-9</span>])&#123;<span class="number">7</span>,<span class="number">18</span>&#125;(x|X)?$ Êàñ ^\d&#123;<span class="number">8</span>,<span class="number">18</span>&#125;|[<span class="number">0</span><span class="number">-9</span>x]&#123;<span class="number">8</span>,<span class="number">18</span>&#125;|[<span class="number">0</span><span class="number">-9</span>X]&#123;<span class="number">8</span>,<span class="number">18</span>&#125;?$</span><br><span class="line"> <span class="number">9</span> Â∏êÂè∑ÊòØÂê¶ÂêàÊ≥ï(Â≠óÊØçÂºÄÂ§¥ÔºåÂÖÅËÆ∏<span class="number">5</span><span class="number">-16</span>Â≠óËäÇÔºåÂÖÅËÆ∏Â≠óÊØçÊï∞Â≠ó‰∏ãÂàíÁ∫ø)Ôºö^[a-zA-Z][a-zA-Z0<span class="number">-9</span>_]&#123;<span class="number">4</span>,<span class="number">15</span>&#125;$</span><br><span class="line"><span class="number">10</span> ÂØÜÁ†Å(‰ª•Â≠óÊØçÂºÄÂ§¥ÔºåÈïøÂ∫¶Âú®<span class="number">6</span>~<span class="number">18</span>‰πãÈó¥ÔºåÂè™ËÉΩÂåÖÂê´Â≠óÊØç„ÄÅÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø)Ôºö^[a-zA-Z]\w&#123;<span class="number">5</span>,<span class="number">17</span>&#125;$</span><br><span class="line"><span class="number">11</span> Âº∫ÂØÜÁ†Å(ÂøÖÈ°ªÂåÖÂê´Â§ßÂ∞èÂÜôÂ≠óÊØçÂíåÊï∞Â≠óÁöÑÁªÑÂêàÔºå‰∏çËÉΩ‰ΩøÁî®ÁâπÊÆäÂ≠óÁ¨¶ÔºåÈïøÂ∫¶Âú®<span class="number">8</span><span class="number">-10</span>‰πãÈó¥)Ôºö^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;<span class="number">8</span>,<span class="number">10</span>&#125;$  </span><br><span class="line"><span class="number">12</span> Êó•ÊúüÊ†ºÂºèÔºö^\d&#123;<span class="number">4</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line"><span class="number">13</span> ‰∏ÄÂπ¥ÁöÑ<span class="number">12</span>‰∏™Êúà(<span class="number">01</span>ÔΩû<span class="number">09</span>Âíå<span class="number">1</span>ÔΩû<span class="number">12</span>)Ôºö^(<span class="number">0</span>?[<span class="number">1</span><span class="number">-9</span>]|<span class="number">1</span>[<span class="number">0</span><span class="number">-2</span>])$</span><br><span class="line"><span class="number">14</span> ‰∏Ä‰∏™ÊúàÁöÑ<span class="number">31</span>Â§©(<span class="number">01</span>ÔΩû<span class="number">09</span>Âíå<span class="number">1</span>ÔΩû<span class="number">31</span>)Ôºö^((<span class="number">0</span>?[<span class="number">1</span><span class="number">-9</span>])|((<span class="number">1</span>|<span class="number">2</span>)[<span class="number">0</span><span class="number">-9</span>])|<span class="number">30</span>|<span class="number">31</span>)$ </span><br><span class="line"><span class="number">15</span> Èí±ÁöÑËæìÂÖ•Ê†ºÂºèÔºö</span><br><span class="line"><span class="number">16</span>    <span class="number">1.</span>ÊúâÂõõÁßçÈí±ÁöÑË°®Á§∫ÂΩ¢ÂºèÊàë‰ª¨ÂèØ‰ª•Êé•Âèó:<span class="string">"10000.00"</span> Âíå <span class="string">"10,000.00"</span>, ÂíåÊ≤°Êúâ <span class="string">"ÂàÜ"</span> ÁöÑ <span class="string">"10000"</span> Âíå <span class="string">"10,000"</span>Ôºö^[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*$ </span><br><span class="line"><span class="number">17</span>    <span class="number">2.</span>ËøôË°®Á§∫‰ªªÊÑè‰∏Ä‰∏™‰∏ç‰ª•<span class="number">0</span>ÂºÄÂ§¥ÁöÑÊï∞Â≠ó,‰ΩÜÊòØ,Ëøô‰πüÊÑèÂë≥ÁùÄ‰∏Ä‰∏™Â≠óÁ¨¶<span class="string">"0"</span>‰∏çÈÄöËøá,ÊâÄ‰ª•Êàë‰ª¨ÈááÁî®‰∏ãÈù¢ÁöÑÂΩ¢ÂºèÔºö^(<span class="number">0</span>|[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)$ </span><br><span class="line"><span class="number">18</span>    <span class="number">3.</span>‰∏Ä‰∏™<span class="number">0</span>ÊàñËÄÖ‰∏Ä‰∏™‰∏ç‰ª•<span class="number">0</span>ÂºÄÂ§¥ÁöÑÊï∞Â≠ó.Êàë‰ª¨ËøòÂèØ‰ª•ÂÖÅËÆ∏ÂºÄÂ§¥Êúâ‰∏Ä‰∏™Ë¥üÂè∑Ôºö^(<span class="number">0</span>|-?[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)$ </span><br><span class="line"><span class="number">19</span>    <span class="number">4.</span>ËøôË°®Á§∫‰∏Ä‰∏™<span class="number">0</span>ÊàñËÄÖ‰∏Ä‰∏™ÂèØËÉΩ‰∏∫Ë¥üÁöÑÂºÄÂ§¥‰∏ç‰∏∫<span class="number">0</span>ÁöÑÊï∞Â≠ó.ËÆ©Áî®Êà∑‰ª•<span class="number">0</span>ÂºÄÂ§¥Â•Ω‰∫Ü.ÊääË¥üÂè∑ÁöÑ‰πüÂéªÊéâ,Âõ†‰∏∫Èí±ÊÄª‰∏çËÉΩÊòØË¥üÁöÑÂêß.‰∏ãÈù¢Êàë‰ª¨Ë¶ÅÂä†ÁöÑÊòØËØ¥ÊòéÂèØËÉΩÁöÑÂ∞èÊï∞ÈÉ®ÂàÜÔºö^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]+)?$ </span><br><span class="line"><span class="number">20</span>    <span class="number">5.</span>ÂøÖÈ°ªËØ¥ÊòéÁöÑÊòØ,Â∞èÊï∞ÁÇπÂêéÈù¢Ëá≥Â∞ëÂ∫îËØ•Êúâ<span class="number">1</span>‰ΩçÊï∞,ÊâÄ‰ª•<span class="string">"10."</span>ÊòØ‰∏çÈÄöËøáÁöÑ,‰ΩÜÊòØ <span class="string">"10"</span> Âíå <span class="string">"10.2"</span> ÊòØÈÄöËøáÁöÑÔºö^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">2</span>&#125;)?$ </span><br><span class="line"><span class="number">21</span>    <span class="number">6.</span>ËøôÊ†∑Êàë‰ª¨ËßÑÂÆöÂ∞èÊï∞ÁÇπÂêéÈù¢ÂøÖÈ°ªÊúâ‰∏§‰Ωç,Â¶ÇÊûú‰Ω†ËÆ§‰∏∫Â§™ËãõÂàª‰∫Ü,ÂèØ‰ª•ËøôÊ†∑Ôºö^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$ </span><br><span class="line"><span class="number">22</span>    <span class="number">7.</span>ËøôÊ†∑Â∞±ÂÖÅËÆ∏Áî®Êà∑Âè™ÂÜô‰∏Ä‰ΩçÂ∞èÊï∞.‰∏ãÈù¢Êàë‰ª¨ËØ•ËÄÉËôëÊï∞Â≠ó‰∏≠ÁöÑÈÄóÂè∑‰∫Ü,Êàë‰ª¨ÂèØ‰ª•ËøôÊ†∑Ôºö^[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">3</span>&#125;(,[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">3</span>&#125;)*(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$ </span><br><span class="line"><span class="number">23</span>    <span class="number">8.1</span>Âà∞<span class="number">3</span>‰∏™Êï∞Â≠ó,ÂêéÈù¢Ë∑üÁùÄ‰ªªÊÑè‰∏™ ÈÄóÂè∑+<span class="number">3</span>‰∏™Êï∞Â≠ó,ÈÄóÂè∑Êàê‰∏∫ÂèØÈÄâ,ËÄå‰∏çÊòØÂøÖÈ°ªÔºö^([<span class="number">0</span><span class="number">-9</span>]+|[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">3</span>&#125;(,[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">3</span>&#125;)*)(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$ </span><br><span class="line"><span class="number">24</span>    Â§áÊ≥®ÔºöËøôÂ∞±ÊòØÊúÄÁªàÁªìÊûú‰∫Ü,Âà´Âøò‰∫Ü<span class="string">"+"</span>ÂèØ‰ª•Áî®<span class="string">"*"</span>Êõø‰ª£Â¶ÇÊûú‰Ω†ËßâÂæóÁ©∫Â≠óÁ¨¶‰∏≤‰πüÂèØ‰ª•Êé•ÂèóÁöÑËØù(Â•áÊÄ™,‰∏∫‰ªÄ‰πà?)ÊúÄÂêé,Âà´Âøò‰∫ÜÂú®Áî®ÂáΩÊï∞Êó∂ÂéªÊéâÂéªÊéâÈÇ£‰∏™ÂèçÊñúÊù†,‰∏ÄËà¨ÁöÑÈîôËØØÈÉΩÂú®ËøôÈáå</span><br><span class="line"><span class="number">25</span> xmlÊñá‰ª∂Ôºö^([a-zA-Z]+-?)+[a-zA-Z0<span class="number">-9</span>]+\\.[x|X][m|M][l|L]$</span><br><span class="line"><span class="number">26</span> ‰∏≠ÊñáÂ≠óÁ¨¶ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºö[\u4e00-\u9fa5]</span><br><span class="line"><span class="number">27</span> ÂèåÂ≠óËäÇÂ≠óÁ¨¶Ôºö[^\x00-\xff]    (ÂåÖÊã¨Ê±âÂ≠óÂú®ÂÜÖÔºåÂèØ‰ª•Áî®Êù•ËÆ°ÁÆóÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶(‰∏Ä‰∏™ÂèåÂ≠óËäÇÂ≠óÁ¨¶ÈïøÂ∫¶ËÆ°<span class="number">2</span>ÔºåASCIIÂ≠óÁ¨¶ËÆ°<span class="number">1</span>))</span><br><span class="line"><span class="number">28</span> Á©∫ÁôΩË°åÁöÑÊ≠£ÂàôË°®ËææÂºèÔºö\n\s*\r    (ÂèØ‰ª•Áî®Êù•Âà†Èô§Á©∫ÁôΩË°å)</span><br><span class="line"><span class="number">29</span> HTMLÊ†áËÆ∞ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºö&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\<span class="number">1</span>&gt;|&lt;.*? /&gt;    (ÁΩë‰∏äÊµÅ‰º†ÁöÑÁâàÊú¨Â§™Á≥üÁ≥ïÔºå‰∏äÈù¢Ëøô‰∏™‰πü‰ªÖ‰ªÖËÉΩÈÉ®ÂàÜÔºåÂØπ‰∫éÂ§çÊùÇÁöÑÂµåÂ•óÊ†áËÆ∞‰æùÊóßÊó†ËÉΩ‰∏∫Âäõ)</span><br><span class="line"><span class="number">30</span> È¶ñÂ∞æÁ©∫ÁôΩÂ≠óÁ¨¶ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºö^\s*|\s*$Êàñ(^\s*)|(\s*$)    (ÂèØ‰ª•Áî®Êù•Âà†Èô§Ë°åÈ¶ñË°åÂ∞æÁöÑÁ©∫ÁôΩÂ≠óÁ¨¶(ÂåÖÊã¨Á©∫Ê†º„ÄÅÂà∂Ë°®Á¨¶„ÄÅÊç¢È°µÁ¨¶Á≠âÁ≠â)ÔºåÈùûÂ∏∏ÊúâÁî®ÁöÑË°®ËææÂºè)</span><br><span class="line"><span class="number">31</span> ËÖæËÆØQQÂè∑Ôºö[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">4</span>,&#125;    (ËÖæËÆØQQÂè∑‰ªé<span class="number">10000</span>ÂºÄÂßã)</span><br><span class="line"><span class="number">32</span> ‰∏≠ÂõΩÈÇÆÊîøÁºñÁ†ÅÔºö[<span class="number">1</span><span class="number">-9</span>]\d&#123;<span class="number">5</span>&#125;(?!\d)    (‰∏≠ÂõΩÈÇÆÊîøÁºñÁ†Å‰∏∫<span class="number">6</span>‰ΩçÊï∞Â≠ó)</span><br><span class="line"><span class="number">33</span> IPÂú∞ÂùÄÔºö\d+\.\d+\.\d+\.\d+    (ÊèêÂèñIPÂú∞ÂùÄÊó∂ÊúâÁî®)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>ËΩ¨ËΩΩ</tag>
        <tag>C Sharp</tag>
      </tags>
  </entry>
  <entry>
    <title>Â∏∏Áî®ÂëΩ‰ª§Ë°åÂ≠óÁ¨¶‰∏≤Êìç‰ΩúÊåá‰ª§</title>
    <url>/2018-02-09/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<p>‰∏çÂÆöÊúüÊõ¥Êñ∞„ÄÇ„ÄÇ</p>
<a id="more"></a>

<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p>Âú®ÊåáÂÆöÊñá‰ª∂‰∏≠Êü•ÊâæÂ≠óÁ¨¶‰∏≤Ôºö</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">findstr</span> "#define BUILD_VERSION" main.c</span><br></pre></td></tr></table></figure>
<p>Â∞ÜÊüêÊù°Êåá‰ª§ËøîÂõûÂÄºÁöÑÁ¨¨‰∏ÄË°åÂ≠òÂú®‰∏Ä‰∏™Âêç‰∏∫tempÁöÑÂèòÈáè‰∏≠Ôºö</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%1</span> <span class="keyword">in</span> ('<span class="built_in">findstr</span> "#define BUILD_VERSION" main.c')<span class="keyword">do</span> <span class="built_in">set</span> temp=<span class="variable">%%1</span></span><br></pre></td></tr></table></figure>
<p>Â∞Ütemp‰∏≠‚ÄùBUILD_VERSION ‚ÄúÂ∑¶‰æßÂ≠óÁ¨¶ÊõøÊç¢‰∏∫Á©∫Â≠óÁ¨¶‰∏≤ÔºåÁÑ∂Âêé‰øùÁïôÂà∞version‰∏≠Ôºö</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> "version=%temp:*BUILD_VERSION =%"</span><br></pre></td></tr></table></figure>

<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>Âú®ÊåáÂÆöÊñá‰ª∂‰∏≠Êü•ÊâæÂ≠óÁ¨¶‰∏≤Ôºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">grep <span class="string">"#define BUILD_VERSION"</span> main.c</span><br></pre></td></tr></table></figure>
<p>Â∞ÜÊüêÊù°Êåá‰ª§ËøîÂõûÂÄºÁöÑÁ¨¨‰∏ÄË°åÂ≠òÂú®‰∏Ä‰∏™Âêç‰∏∫tempÁöÑÂèòÈáè‰∏≠Ôºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">temp=$(grep <span class="string">"#define BUILD_VERSION"</span> main.c)</span><br></pre></td></tr></table></figure>
<p>Â∞Ütemp‰∏≠‚ÄùBUILD_VERSION ‚ÄúÂ∑¶‰æßÂ≠óÁ¨¶ÊõøÊç¢‰∏∫Á©∫Â≠óÁ¨¶‰∏≤ÔºåÁÑ∂Âêé‰øùÁïôÂà∞version‰∏≠(‰ªéÂ∑¶Âà∞Âè≥ÈùûË¥™Â©™ÂåπÈÖç‰ΩøÁî®#,‰ªéÂè≥Âà∞Â∑¶ÈùûË¥™Â©™ÂåπÈÖç‰ΩøÁî®%)Ôºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">version=<span class="variable">$&#123;temp#*BUILD_VERSION &#125;</span></span><br></pre></td></tr></table></figure>
<p>3/19/2018Êõ¥Êñ∞Ôºö<br>Âà§Êñ≠Â≠óÁ¨¶‰∏≤ÂèòÈáèsw_versionÁöÑÈïøÂ∫¶Ôºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;#sw_version&#125;</span>"</span> = <span class="string">"5"</span> ]; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>ËØªÂèñÊñá‰ª∂Êüê‰∏ÄË°åÔºö</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cat url.txt|sed -n <span class="string">'1p'</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>Âú®Windows‰∏ãÂÆâË£ÖgpuÁâàÁöÑTensorFlow</title>
    <url>/2018-01-23/%E5%9C%A8Windows%E4%B8%8B%E5%AE%89%E8%A3%85gpu%E7%89%88%E7%9A%84TensorFlow/</url>
    <content><![CDATA[<p>  ‰ΩøÁî®ÈùûgpuÁâàÊú¨ÁöÑTensorFlowËøõË°åËÆ≠ÁªÉÂÆûÂú®ÊòØÂ§™ÊÖ¢‰∫ÜÔºå‰∫éÊòØÂ∞ùËØïÂú®Windows‰∏ãÂÆâË£ÖgpuÁâàÊú¨ÁöÑTensorFlowÔºåÂÜôÁØáÊó•ÂøóËÆ∞ÂΩï‰∏Ä‰∏ã„ÄÇ</p>
<a id="more"></a>
<h2 id="Â∑•‰ΩúÁéØÂ¢É"><a href="#Â∑•‰ΩúÁéØÂ¢É" class="headerlink" title="Â∑•‰ΩúÁéØÂ¢É"></a>Â∑•‰ΩúÁéØÂ¢É</h2><p>  OSÔºöWin10<br>  Python:3.5(ÁõÆÂâçTensorFlow‰ªç‰∏çÊîØÊåÅ3.6)</p>
<h2 id="ÂÆâË£ÖCUDA"><a href="#ÂÆâË£ÖCUDA" class="headerlink" title="ÂÆâË£ÖCUDA"></a>ÂÆâË£ÖCUDA</h2><p>  È¶ñÂÖàÁ°ÆÂÆöÊÉ≥Ë¶ÅÂÆâË£ÖÁöÑTensorFlowÁâàÊú¨ÈúÄË¶ÅÂì™‰∏™ÁâàÊú¨ÁöÑCUDAÊîØÊåÅ„ÄÇÊàëËøôÈáåÂÆâË£ÖÁöÑTFÁâàÊú¨ÊòØ1.5.0ÔºåÈúÄË¶ÅCUDA 9.0ÁöÑÊîØÊåÅ„ÄÇ</p>
<h3 id="‰∏ãËΩΩÂπ∂ÂÆâË£ÖCUDA"><a href="#‰∏ãËΩΩÂπ∂ÂÆâË£ÖCUDA" class="headerlink" title="‰∏ãËΩΩÂπ∂ÂÆâË£ÖCUDA"></a>‰∏ãËΩΩÂπ∂ÂÆâË£ÖCUDA</h3><p>  ÂâçÂæÄ<a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener">developer.nvidia.com</a>‰∏ãËΩΩCUDA 9.0„ÄÇ‰∏ÄÁõ¥‰∏ã‰∏ÄÊ≠•Â∞±Ë°å„ÄÇ<br>  ÂÆåÊàê‰πãÂêéÈ™åËØÅ‰∏Ä‰∏ãÊòØÂê¶Â∑≤ÁªèÊ≠£Á°ÆÂÆâË£ÖÔºåËøêË°åcmdÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvcc  -V</span><br></pre></td></tr></table></figure>
<p>Â¶ÇÊûúÊ≠£Á°ÆÂÆâË£ÖÔºåÂ∞Ü‰ºöÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Windows\system32&gt;nvcc  -V</span><br><span class="line">nvcc: NVIDIA (R) Cuda compiler driver</span><br><span class="line">Copyright (c) 2005-2017 NVIDIA Corporation</span><br><span class="line">Built on Fri_Sep__1_21:08:32_Central_Daylight_Time_2017</span><br><span class="line">Cuda compilation tools, release 9.0, V9.0.176</span><br></pre></td></tr></table></figure>
<h2 id="ÂÆâË£ÖCUDNN"><a href="#ÂÆâË£ÖCUDNN" class="headerlink" title="ÂÆâË£ÖCUDNN"></a>ÂÆâË£ÖCUDNN</h2><p>  ÂêåÊ†∑ÈúÄË¶ÅÁ°ÆËÆ§ÈúÄË¶ÅÂì™‰∏™ÁâàÊú¨ÁöÑCUDNN„ÄÇÊàëËøôÈáåÈúÄË¶ÅCUDNN 9.0„ÄÇÂâçÂæÄ<a href="https://developer.nvidia.com/cuda-toolkit-archive" target="_blank" rel="noopener">developer.nvidia.com</a>‰∏ãËΩΩÊåáÂÆöÁâàÊú¨Ôºå‰∏ãËΩΩÂÆåÊàêÊòØ‰∏Ä‰∏™ÂéãÁº©ÂåÖÔºåËß£ÂéãÂà∞C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v9.0</p>
<h2 id="ÂÆâË£ÖTensorFlow"><a href="#ÂÆâË£ÖTensorFlow" class="headerlink" title="ÂÆâË£ÖTensorFlow"></a>ÂÆâË£ÖTensorFlow</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install tensorflow-gpu==1.5.0</span><br></pre></td></tr></table></figure>
<p>Ê≠§Â§Ñ‰ΩøÁî®==ÊåáÂÆöÁâàÊú¨„ÄÇÂè¶Â§ñÂèØ‰ª•Âú®<a href="https://pypi.python.org/pypi" target="_blank" rel="noopener">pypi.python.org</a>Êü•ËØ¢Âà∞Êüê‰∏™ÂåÖÁöÑÁâàÊú¨‰ø°ÊÅØ„ÄÇ</p>
<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">tf.__version__</span><br><span class="line">sess = tf.Session()</span><br><span class="line">a = tf.constant(<span class="number">20</span>)</span><br><span class="line">b = tf.constant(<span class="number">99</span>)</span><br><span class="line">print(sess.run(a + b))</span><br></pre></td></tr></table></figure>
<p>ËøêË°åÁªìÊûúÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Windows\system32&gt;python</span><br><span class="line">Python 3.5.4 (v3.5.4:3f56838, Aug  8 2017, 02:17:05) [MSC v.1900 64 bit (AMD64)] on win32</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import tensorflow as tf</span><br><span class="line">&gt;&gt;&gt; tf.__version__</span><br><span class="line"><span class="string">'1.5.0'</span></span><br><span class="line">&gt;&gt;&gt; sess = tf.Session()</span><br><span class="line">2018-02-05 10:21:19.674014: I C:\tf_jenkins\workspace\rel-win\M\windows-gpu\PY\35\tensorflow\core\platform\cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX AVX2</span><br><span class="line">2018-02-05 10:21:20.177086: I C:\tf_jenkins\workspace\rel-win\M\windows-gpu\PY\35\tensorflow\core\common_runtime\gpu\gpu_device.cc:1105] Found device 0 with properties:</span><br><span class="line">name: GeForce 940MX major: 5 minor: 0 memoryClockRate(GHz): 1.2415</span><br><span class="line">pciBusID: 0000:02:00.0</span><br><span class="line">totalMemory: 2.00GiB freeMemory: 1.66GiB</span><br><span class="line">2018-02-05 10:21:20.177537: I C:\tf_jenkins\workspace\rel-win\M\windows-gpu\PY\35\tensorflow\core\common_runtime\gpu\gpu_device.cc:1195] Creating TensorFlow device (/device:GPU:0) -&gt; (device: 0, name: GeForce 940MX, pci bus id: 0000:02:00.0, compute capability: 5.0)</span><br><span class="line">&gt;&gt;&gt; a = tf.constant(20)</span><br><span class="line">&gt;&gt;&gt; b = tf.constant(99)</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(sess.run(a + b))</span><br><span class="line">119</span><br></pre></td></tr></table></figure>
<h2 id="Â¶Ç‰ΩïÊõ¥Êñ∞"><a href="#Â¶Ç‰ΩïÊõ¥Êñ∞" class="headerlink" title="Â¶Ç‰ΩïÊõ¥Êñ∞"></a>Â¶Ç‰ΩïÊõ¥Êñ∞</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install --upgrade tensorflow-gpu</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Êú∫Âô®Â≠¶‰π†</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>TensorFlow</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ΩøÁî®TensorFlowËÆ≠ÁªÉËá™Â∑±ÁöÑËØ≠Èü≥ËØÜÂà´AI</title>
    <url>/2018-01-11/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%ABAI/</url>
    <content><![CDATA[<p>  ËøôÊ¨°Êù•ËÆ≠ÁªÉ‰∏Ä‰∏™Âü∫‰∫éCNNÁöÑËØ≠Èü≥ËØÜÂà´Ê®°Âûã„ÄÇËÆ≠ÁªÉÂÆåÊàêÂêéÔºåÊàë‰ª¨Â∞ÜÂ∞ùËØïÂ∞ÜÊ≠§Ê®°ÂûãÁî®‰∫éHotword detection„ÄÇ</p>
<a id="more"></a>
<p>  ‰∫∫Á±ªÊòØÊÄéÊ†∑Âê¨ÊáÇ‰∏ÄÂè•ËØùÁöÑÂë¢Ôºü‰ª•Ê±âËØ≠‰∏∫‰æãÔºåÂΩìÂê¨Âà∞‚Äúwo shi‚ÄùÁöÑÂΩïÈü≥Êó∂ÔºåÊàë‰ª¨‰ºöÊÉ≥ÔºåÊúâÂì™‰∏§‰∏™Â≠óÊòØËØª‰Ωú‚Äúwo shi‚ÄùÁöÑÔºåÊúâ‰∫∫ÊÉ≥Âà∞ÁöÑÊòØ‚ÄúÊàëÊòØ‚ÄùÔºå‰πüÊúâ‰∫∫ËßâÂæóÊòØ‚ÄúÊàëÂ∏Ç‚Äù„ÄÇ<br>Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá‚Äùwo shi‚ÄùÁöÑÈ¢ëÁéáÁöÑÁâπÂæÅÔºåÂåπÈÖçÂà∞‰∏Ä‰∫õÁªìÊûúÔºåÊàë‰ª¨ËøôÊ¨°Ë¶ÅËÆ≠ÁªÉÁöÑÊ®°ÂûãÔºå‰πüÊòØÂü∫‰∫éÈ¢ëÁéáÁâπÂæÅÁöÑCNNÊ®°Âûã„ÄÇÂçïÁ∫ØÁöÑÂü∫‰∫éÈ¢ëÁéáÁâπÂæÅÁöÑËØÜÂà´ÊúâÂæàÂ§ßÁöÑÂ±ÄÈôêÊÄßÔºåÊØîÂ¶ÇÂâçÈù¢ÊèêÂà∞ÁöÑ‰æãÂ≠êÔºåÂÖâÊòØÂê¨Âà∞‚Äúwo shi‚ÄùÂèØËÉΩ‰ºöÂØºËá¥‰∫ßÁîüÊ≠ß‰πâÔºå‰ΩÜÊòØÂ¶ÇÊûúËÉΩÊúâ‰∏ä‰∏ãÊñáÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Â§ßÂ§ßÊèêÈ´ò‚ÄúËØÜÂà´‚ÄùÁöÑÊàêÂäüÁéá„ÄÇÂõ†Ê≠§ÔºåÁ±ª‰ººGoogle AssistantÈÇ£Ê†∑ÁöÑËØÜÂà´Ôºå‰∏çÂÖâÊòØËÄÉËôëÂà∞Â≠óËØçÁöÑÂèëÈü≥ÔºåËøòËÅîÁ≥ª‰∫ÜËØ≠‰πâÔºåÂ∞±ÁÆóÊúâ‰∏Ä‰∏§‰∏™Â≠óÂèëÈü≥‰∏çÊ∏ÖÔºåÊàë‰ª¨ËøòÊòØËÉΩÂæóÂà∞Ê≠£Á°ÆÁöÑ‰ø°ÊÅØ„ÄÇ<br>‰ΩÜÊòØÂü∫‰∫éÈ¢ëÁéáÁâπÂæÅÁöÑÊ®°ÂûãÁî®‰ΩúHotword detectionËøòÊòØÊØîËæÉÂêàÈÄÇÁöÑÔºåÂõ†‰∏∫HorwordÈÄöÂ∏∏ÊòØ‰∏Ä‰∏§‰∏™ÁâπÂÆöÁöÑËØçÔºå‰∏çÈúÄË¶ÅËÅîÁ≥ªËØ≠Â¢ÉËøõË°åËØ≠‰πâÂàÜÊûê„ÄÇ</p>
<h2 id="ÂáÜÂ§áËÆ≠ÁªÉÊï∞ÊçÆÈõÜ"><a href="#ÂáÜÂ§áËÆ≠ÁªÉÊï∞ÊçÆÈõÜ" class="headerlink" title="ÂáÜÂ§áËÆ≠ÁªÉÊï∞ÊçÆÈõÜ"></a>ÂáÜÂ§áËÆ≠ÁªÉÊï∞ÊçÆÈõÜ</h2><p>  ÂºÄÊ∫êÁöÑËØ≠Ë®ÄÊï∞ÊçÆÈõÜÊØîËæÉÂ∞ëÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®TensorFlowÂíåAIYÂõ¢ÈòüÊé®Âá∫ÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÈõÜÔºåÂåÖÂê´30‰∏™Âü∫Êú¨ÁöÑËã±ÊñáÂçïËØçÁöÑÂ§ßÈáèÂΩïÈü≥Ôºö<br><a href="https://download.tensorflow.org/data/speech_commands_v0.01.tar.gz" target="_blank" rel="noopener">‰∏ãËΩΩÂú∞ÂùÄ</a><br>Ëøô‰∏™Êï∞ÊçÆÈõÜÂè™Êúâ1GÂ§öÔºåÈùûÂ∏∏Â∞èÁöÑËØ≠Èü≥Êï∞ÊçÆÈõÜÔºå‰∏çËøáÁî®Êù•ÂÆûÈ™åÊòØÂÆåÂÖ®Â§üÁöÑ„ÄÇ</p>
<h2 id="ËøêË°ådockerÂπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï"><a href="#ËøêË°ådockerÂπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï" class="headerlink" title="ËøêË°ådockerÂπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï"></a>ËøêË°ådockerÂπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï</h2><p>Êñ∞Âª∫‰∏Ä‰∏™speech_trainÊñá‰ª∂Â§πÔºåÂπ∂Âú®ÂÖ∂‰∏≠ÂàõÂª∫Â≠êÊñá‰ª∂Â§πdataset,logs,train,ÂÆÉ‰ª¨Â∞ÜÁî®‰∫éÂ≠òÊîæÊï∞ÊçÆÈõÜÔºålogÂíåËÆ≠ÁªÉÊñá‰ª∂„ÄÇËß£ÂéãÊï∞ÊçÆÈõÜÂà∞datasetÔºåÁÑ∂ÂêéËøêË°ådockerÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it -v $(<span class="built_in">pwd</span>)/speech_train:/speech_train \</span><br><span class="line">  gcr.io/tensorflow/tensorflow:latest-devel</span><br></pre></td></tr></table></figure>
<h2 id="‰ΩøÁî®ÈªòËÆ§ÁöÑconvÊ®°ÂûãÂºÄÂßãËÆ≠ÁªÉ"><a href="#‰ΩøÁî®ÈªòËÆ§ÁöÑconvÊ®°ÂûãÂºÄÂßãËÆ≠ÁªÉ" class="headerlink" title="‰ΩøÁî®ÈªòËÆ§ÁöÑconvÊ®°ÂûãÂºÄÂßãËÆ≠ÁªÉ"></a>‰ΩøÁî®ÈªòËÆ§ÁöÑconvÊ®°ÂûãÂºÄÂßãËÆ≠ÁªÉ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tensorflow/</span><br><span class="line">python tensorflow/examples/speech_commands/train.py \</span><br><span class="line">--data_dir=/speech_train/dataset/ \</span><br><span class="line">--summaries_dir=/speech_train/logs/ \</span><br><span class="line">--train_dir=/speech_train/train/ \</span><br><span class="line">--wanted_words=one,two,three,four,five,marvin</span><br></pre></td></tr></table></figure>
<p>Âú®ËøôÈáåÊàë‰ª¨ÊåáÂÆöÂ∏åÊúõËØÜÂà´ÁöÑlabel: one,two,three,four,five,marvin„ÄÇÊï∞ÊçÆÈõÜÁöÑÂÖ∂‰ªñÈÉ®ÂàÜÂ∞ÜË¢´ÂΩí‰∏∫<em>unknown</em></p>
<h2 id="‰ΩøÁî®TensorBoard‰ΩøËÆ≠ÁªÉÂèØËßÜÂåñ"><a href="#‰ΩøÁî®TensorBoard‰ΩøËÆ≠ÁªÉÂèØËßÜÂåñ" class="headerlink" title="‰ΩøÁî®TensorBoard‰ΩøËÆ≠ÁªÉÂèØËßÜÂåñ"></a>‰ΩøÁî®TensorBoard‰ΩøËÆ≠ÁªÉÂèØËßÜÂåñ</h2><p>Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂàÜÊûêÁîüÊàêÁöÑlog‰ΩøËÆ≠ÁªÉËøáÁ®ãÂèØËßÜÂåñÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tensorboard --logdir /speech_train/logs</span><br></pre></td></tr></table></figure>
<p>ËøêË°åÊåá‰ª§ÂêéÔºåÂèØ‰ª•ÈÄöËøáÊµèËßàÂô®ËÆøÈóÆÊú¨Âú∞ÁöÑ6006Á´ØÂè£ËøõÂÖ•TensorBoard„ÄÇ‰∏ãÂõæÊòØ‰ΩøÁî®convÊ®°ÂûãÂÆåÊàê18000 steps ËÆ≠ÁªÉÁöÑËøáÁ®ãÂõæÔºö<br><img src="/2018-01-11/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%ABAI/2018-01-16-08-48-12.png" alt><br>ËÆ≠ÁªÉËä±‰∫ÜÂ∑Æ‰∏çÂ§ö15‰∏™Â∞èÊó∂„ÄÇ</p>
<h2 id="ÁîüÊàêpbÊñá‰ª∂"><a href="#ÁîüÊàêpbÊñá‰ª∂" class="headerlink" title="ÁîüÊàêpbÊñá‰ª∂"></a>ÁîüÊàêpbÊñá‰ª∂</h2><p>ËÆ≠ÁªÉÂÆåÊàêÂêéÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂÖ∂ËΩ¨Âåñ‰∏∫pbÊñá‰ª∂Ôºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python tensorflow/examples/speech_commands/freeze.py \</span><br><span class="line">--start_checkpoint=/speech_train/train/conv.ckpt-18000 \</span><br><span class="line">--output_file=/speech_train/conv.pb \</span><br><span class="line">--wanted_words=one,two,three,four,five,marvin</span><br></pre></td></tr></table></figure>
<p>ÂÆåÊàêÂêéÔºåÊàë‰ª¨Â∞ÜÂæóÂà∞‰∏Ä‰∏™Âêç‰∏∫conv.pbÁöÑÊñá‰ª∂ÔºåÈÖçÂêàÂåÖÂê´ÂèØËØÜÂà´labelÁöÑtxtÊñá‰ª∂Â∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®‰∫Ü„ÄÇ</p>
<h2 id="ÊµãËØï"><a href="#ÊµãËØï" class="headerlink" title="ÊµãËØï"></a>ÊµãËØï</h2><p>‰ΩøÁî®ÊµãËØïËÑöÊú¨ËøõË°åÊµãËØïÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python tensorflow/examples/speech_commands/label_wav.py \</span><br><span class="line">--graph=/speech_train/conv.pb \</span><br><span class="line">--labels=/speech_train/conv_labels.txt \</span><br><span class="line">--wav=/speech_train/dataset/marvin/0b40aa8e_nohash_0.wav</span><br></pre></td></tr></table></figure>
<p>ËÆ≠ÁªÉÁöÑÊ®°ÂûãÂ∫îËÉΩÊ≠£Á°ÆËØÜÂà´Âá∫marvin„ÄÇ</p>
<h2 id="‰ΩøÁî®ÂáÜÁ°ÆÂ∫¶ËæÉ‰Ωé‰ΩÜÊòØÈ¢ÑÊµãÊõ¥Âø´ÁöÑlow-latency-convÊ®°Âûã"><a href="#‰ΩøÁî®ÂáÜÁ°ÆÂ∫¶ËæÉ‰Ωé‰ΩÜÊòØÈ¢ÑÊµãÊõ¥Âø´ÁöÑlow-latency-convÊ®°Âûã" class="headerlink" title="‰ΩøÁî®ÂáÜÁ°ÆÂ∫¶ËæÉ‰Ωé‰ΩÜÊòØÈ¢ÑÊµãÊõ¥Âø´ÁöÑlow_latency_convÊ®°Âûã"></a>‰ΩøÁî®ÂáÜÁ°ÆÂ∫¶ËæÉ‰Ωé‰ΩÜÊòØÈ¢ÑÊµãÊõ¥Âø´ÁöÑlow_latency_convÊ®°Âûã</h2><p>  Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®Âè¶Â§ñ‰∏ÄÁßçÂáÜÁ°ÆÂ∫¶ËæÉ‰Ωé‰ΩÜÊòØÈ¢ÑÊµãÊõ¥Âø´ÁöÑlow_latency_convÊ®°ÂûãËøõË°åËÆ≠ÁªÉÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python tensorflow/examples/speech_commands/train.py \</span><br><span class="line">--data_dir=/speech_train/dataset/ \</span><br><span class="line">--summaries_dir=/speech_train/logs/ \</span><br><span class="line">--train_dir=/speech_train/train/ \</span><br><span class="line">--model_architecture=low_latency_conv \</span><br><span class="line">--how_many_training_steps=20000,6000 \</span><br><span class="line">--learning_rate=0.01,0.001 \</span><br><span class="line">--wanted_words=one,two,three,four,marvin,wow</span><br></pre></td></tr></table></figure>
<p>ÂΩì‰ΩøÁî®ËØ•Ê®°ÂûãÊó∂ÔºåÂèØ‰ª•ÈÄÇÂΩìÂ¢ûÂä†training stepsÂíålearning rate„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËÆ≠ÁªÉÁöÑÊó∂Èó¥Â§ßÂ§ßÁº©Áü≠‰∫ÜÔºö<br><img src="/2018-01-11/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%ABAI/2018-01-12-08-57-07.png" alt><br>Âè™Ëä±‰∫Ü‰∏çÂà∞3Â∞èÊó∂.</p>
<h2 id="ÂÖ∂‰ªñ"><a href="#ÂÖ∂‰ªñ" class="headerlink" title="ÂÖ∂‰ªñ"></a>ÂÖ∂‰ªñ</h2><p>‰πüÂèØ‰ª•‰ΩøÁî®gpuÁâàÊú¨ÁöÑtensorflowËøõË°åËÆ≠ÁªÉÔºåÈÄüÂ∫¶ÂèØ‰ª•ÊèêÂçá‰∏çÂ∞ëÂì¶„ÄÇ</p>
]]></content>
      <categories>
        <category>Êú∫Âô®Â≠¶‰π†</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>TensorFlow</tag>
      </tags>
  </entry>
  <entry>
    <title>DockerÂ∏∏Áî®ÂëΩ‰ª§</title>
    <url>/2018-01-09/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>DockerÂ∏∏Áî®ÂëΩ‰ª§Â∞èÁªì<br>Update: Translate to EN</p>
<a id="more"></a>

<h2 id="Gather-info"><a href="#Gather-info" class="headerlink" title="Gather info"></a>Gather info</h2><p>List all containers <br> ÂàóÂá∫ÊâÄÊúâÂÆπÂô®Ôºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<p>Get container IP <br> Ëé∑ÂèñÂÆπÂô®IPÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker inspect 2d0142bd65a7 | grep IPAddress</span><br></pre></td></tr></table></figure>
<p><em>2d0142bd65a7</em> is a container id. <br> ÂÖ∂‰∏≠ <em>2d0142bd65a7</em> ‰∏∫ÂÆπÂô®ID„ÄÇ </p>
<p>List all loadable images <br> ÂàóÂá∫ÂèØ‰ª•Ë£ÖËΩΩÁöÑÈïúÂÉèÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h2 id="Save-Load-Tag-and-cp"><a href="#Save-Load-Tag-and-cp" class="headerlink" title="Save,Load,Tag and cp"></a>Save,Load,Tag and cp</h2><p>Save image to local file <br> ÂØºÂá∫ÈïúÂÉèÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker save 1865b6805867 &gt; image.tar</span><br></pre></td></tr></table></figure>
<p><em>1865b6805867</em> is a image id. <br> ÂÖ∂‰∏≠ <em>1865b6805867</em> ‰∏∫ÈïúÂÉèID„ÄÇ </p>
<p>Create docker image based on a container <br> Âü∫‰∫éÂÆπÂô®ÂàõÂª∫ÈïúÂÉè</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker commit <span class="variable">$&#123;container_id&#125;</span> <span class="variable">$&#123;image_name&#125;</span>:<span class="variable">$&#123;image_tag&#125;</span></span><br></pre></td></tr></table></figure>

<p>Load image from local file <br> ÂØºÂÖ•ÈïúÂÉèÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker load &lt; image.tar</span><br></pre></td></tr></table></figure>

<p>Tag a image which id is <em>1865b6805867</em>(Only first 4 digits of ID is acceptable) <br><br>‰∏∫ID‰∏∫<em>1865b6805867</em>ÁöÑÈïúÂÉèÊâì‰∏äTAG(Ê≤°ÈîôÔºåÂè™ÈúÄË¶ÅIDÂâçÂá†‰ΩçÂ∞±ÂèØ‰ª•)Ôºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker tag 1865 gcr.io/tensorflow/tensorflow:latest-devel</span><br></pre></td></tr></table></figure>

<p>Copy a file or folder from container to local host:<br><br>‰ªéÂÆπÂô®Â§çÂà∂Êñá‰ª∂Âà∞‰∏ªÊú∫(Â¶ÇÊûú‰Ω†Âøò‰∫Ü‰ªé‰∏ªÊú∫ÊåÇËΩΩÊñá‰ª∂Â§π):</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker cp <span class="variable">$&#123;containerID&#125;</span>:<span class="variable">$&#123;file_path_in_container&#125;</span> <span class="variable">$&#123;host_path&#125;</span></span><br></pre></td></tr></table></figure>
<p>It‚Äôs basically same when you trying to copy a file from host to container, just swap two parameters.</p>
<h2 id="Clean"><a href="#Clean" class="headerlink" title="Clean"></a>Clean</h2><p>Stop all containers <br> ÂÅúÊ≠¢ÊâÄÊúâÂÆπÂô® </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> $(docker ps -aq)</span><br></pre></td></tr></table></figure>

<p>Delete all containers <br> Âà†Èô§ÊâÄÊúâÂÆπÂô®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker rm $(docker ps -aq)</span><br></pre></td></tr></table></figure>
<p>Change <em>$(docker ps -aq)</em> to container id to stop or delete the specific container.</p>
<p>Delete all images <br> Âà†Èô§ÊâÄÊúâÈïúÂÉè</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure>
<p>Change <em>$(docker images -q)</em> to image id to delete the specific image.</p>
<p>Remove unused data to free disk space <br> Âà†Èô§Êú™‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰ª•ÈáäÊîæÁ£ÅÁõòÁ©∫Èó¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker system prune</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ΩøÁî®TensorFlowËÆ≠ÁªÉËá™Â∑±ÁöÑÂõæÂÉèËØÜÂà´AI</title>
    <url>/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/</url>
    <content><![CDATA[<p>  Êë∏Á¥¢‰∫ÜÂá†Â§©ÔºåÁªà‰∫éÁî®TensorFlowÊàêÂäüËÆ≠ÁªÉ‰∫Ü‰∏Ä‰∏™ËÉΩÂ§üËØÜÂà´‰∏âÁßçÂä®Êº´‰∫∫Áâ©ÁöÑAI„ÄÇÂÜôÁØápostËÆ∞ÂΩï‰∏Ä‰∏ã„ÄÇÁî±‰∫éËÆ≠ÁªÉÊòØÂú®ËôöÊãüÊú∫‰∏äË∑ëÁöÑÔºåÊ≤°ÊúâÂäûÊ≥ï‰ΩøÁî®ÊòæÂç°ÔºåÊâÄ‰ª•ËøôÊ¨°ÁöÑËÆ≠ÁªÉÂè™Áî®Âà∞‰∫ÜCPU„ÄÇGPUÁâàÊú¨ÁöÑËÆ≠ÁªÉ‰∏ãÊ¨°ÂÜçÂÜô„ÄÇ</p>
<a id="more"></a>
<p>ËÆ≠ÁªÉÁéØÂ¢ÉÔºö<br>  OS: Ubuntu 17.10(VMWare)<br>  CPU:i5-6300HQ(ÂºÄ‰∫Ü‰∏§‰∏™Ê†∏ÁªôËôöÊãüÊú∫)<br>  RAM:4G(16GÂè™ÂºÄ‰∫Ü4GÁªôËôöÊãüÊú∫)</p>
<h2 id="ÈÖçÁΩÆÂºÄÂèëÁéØÂ¢É"><a href="#ÈÖçÁΩÆÂºÄÂèëÁéØÂ¢É" class="headerlink" title="ÈÖçÁΩÆÂºÄÂèëÁéØÂ¢É"></a>ÈÖçÁΩÆÂºÄÂèëÁéØÂ¢É</h2><p>  ÂÆâË£ÖTensorFlowÊòØ‰∏Ä‰ª∂ÂçÅÂàÜÈ∫ªÁÉ¶ÁöÑ‰∫ãÊÉÖ„ÄÇ‰Ω†ÈúÄË¶Åpython(Êé®Ëçêpython3‰ª•‰∏ä)ÂèäÂêÑÁßçÊâ©Â±ïÊ®°ÂùóÔºåbazelÁ≠âÁ≠âÔºåËøô‰∫õÂÆâË£ÖÊìç‰Ωú‰ºöÈ¢ëÁπÅÂú∞Êõ¥ÊîπÁéØÂ¢ÉÂèòÈáèÔºåÁ®çÊúâ‰∏çÊÖéÂ∞±ÂèØËÉΩÂØºËá¥Â¥©Ê∫ÉÔºåËøòÊûÅÈöæÊÅ¢Â§ç„ÄÇÂõ†Ê≠§Êé®Ëçê‰ΩøÁî®DockerÊù•ËøõË°åÁéØÂ¢ÉÊê≠Âª∫„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØDocker"><a href="#‰ªÄ‰πàÊòØDocker" class="headerlink" title="‰ªÄ‰πàÊòØDocker"></a>‰ªÄ‰πàÊòØDocker</h3><p>  Docker ÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÂ∫îÁî®ÂÆπÂô®ÂºïÊìéÔºåËÆ©ÂºÄÂèëËÄÖÂèØ‰ª•ÊâìÂåÖ‰ªñ‰ª¨ÁöÑÂ∫îÁî®‰ª•Âèä‰æùËµñÂåÖÂà∞‰∏Ä‰∏™ÂèØÁßªÊ§çÁöÑÂÆπÂô®‰∏≠ÔºåÁÑ∂ÂêéÂèëÂ∏ÉÂà∞‰ªª‰ΩïÊµÅË°åÁöÑ Linux Êú∫Âô®‰∏äÔºå‰πüÂèØ‰ª•ÂÆûÁé∞ËôöÊãüÂåñ„ÄÇ‰Ω†ÂèØ‰ª•ÊääÂÆπÂô®ÁúãÊàê‰∏Ä‰∏™Ê≤ôÁÆ±„ÄÇDockerÊèê‰æõ‰∫Ü‰∏Ä‰∫õÂ∑≤ÁªèË£ÖÂÆåTensorFlowÂºÄÂèëÊâÄÈúÄÁöÑÂêÑÁßç‰æùËµñÂåÖÁöÑimage„ÄÇÊàë‰ª¨Âè™ÈúÄË¶Å‰ΩøÁî®Docker‰∏ãËΩΩËøô‰∫õimageÔºåÂ∞±ÂèØ‰ª•Âú®DockerÁöÑÂÆπÂô®‰∏≠ËøõË°åÂºÄÂèëÔºåËÄå‰∏çÁî®ÊãÖÂøÉÂÆâË£ÖÂêÑÁßçÊâ©Â±ïÂåÖÂØºËá¥Á≥ªÁªüÂ¥©Ê∫É„ÄÇÊõ¥ÈáçË¶ÅÁöÑÊòØÔºå‰Ω†ÂèØ‰ª•Âü∫‰∫é‰∏Ä‰∏™imageÂàõÂª∫Â§ö‰∏™‰∫í‰∏çÂπ≤Êâ∞ÁöÑÂÆπÂô®ÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÂÆπÂô®ÈáåËøõË°åÂêÑÁßçÂèòÊÄÅÁöÑÂÆûÈ™åËÄå‰∏çÈúÄË¶ÅÂèçÂ§ç‰∏ãËΩΩimage„ÄÇ(ÁâπÂà´ÊòØËøô‰∫õimageÁî±‰∫éÊüê‰∫õ‰ºóÊâÄÂë®Áü•ÁöÑÂéüÂõ†Âú®Â§ßÈôÜ‰∏ãËΩΩÊûÅÂÖ∂ÁºìÊÖ¢ÁîöËá≥‰∏çËÉΩ‰∏ãËΩΩ)</p>
<h3 id="Â¶Ç‰ΩïÂÆâË£ÖDocker"><a href="#Â¶Ç‰ΩïÂÆâË£ÖDocker" class="headerlink" title="Â¶Ç‰ΩïÂÆâË£ÖDocker"></a>Â¶Ç‰ΩïÂÆâË£ÖDocker</h3><p>  ÂèÇËÄÉDockerÁöÑ<a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/#extra-steps-for-aufs" target="_blank" rel="noopener">ÂÆòÊñπÂÆâË£ÖÊåáÂçó</a>ÂèØ‰ª•ÈùûÂ∏∏ËΩªÊùæÂú∞ÂÆåÊàêDockerÂÆâË£Ö„ÄÇ</p>
<h3 id="‰∏ãËΩΩÈõÜÊàêTensorFlowÂºÄÂèëÁéØÂ¢ÉÁöÑÈïúÂÉè"><a href="#‰∏ãËΩΩÈõÜÊàêTensorFlowÂºÄÂèëÁéØÂ¢ÉÁöÑÈïúÂÉè" class="headerlink" title="‰∏ãËΩΩÈõÜÊàêTensorFlowÂºÄÂèëÁéØÂ¢ÉÁöÑÈïúÂÉè"></a>‰∏ãËΩΩÈõÜÊàêTensorFlowÂºÄÂèëÁéØÂ¢ÉÁöÑÈïúÂÉè</h3><p>  Êé•‰∏ãÊù•ÁöÑÊ≠•È™§ÈúÄË¶ÅrootÊùÉÈôêÂπ∂ÈúÄË¶ÅËÆøÈóÆGoogleÊúçÂä°Âô®„ÄÇ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker run -it gcr.io/tensorflow/tensorflow:latest-devel</span></span><br></pre></td></tr></table></figure>
<p>ÊâßË°åËØ•Êåá‰ª§ÔºåDocker‰ºöËá™Âä®‰∏ãËΩΩÈïúÂÉè„ÄÇ‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©‰∏ãËΩΩ‰∏çÂêåÁâàÊú¨ÁöÑÈïúÂÉèÔºö<br>CPUÁâàÔºögcr.io/tensorflow/tensorflow<br>CPUÁâàÂ∏¶ÂºÄÂèëÁéØÂ¢ÉÔºögcr.io/tensorflow/tensorflow:latest-devel<br>GPUÁâàÔºögcr.io/tensorflow/tensorflow:latest-gpu<br>GPUÁâàÂ∏¶ÂºÄÂèëÁéØÂ¢ÉÔºögcr.io/tensorflow/tensorflow:latest-devel-gpu</p>
<h3 id="Êê≠Âª∫ÂÆåÊàê"><a href="#Êê≠Âª∫ÂÆåÊàê" class="headerlink" title="Êê≠Âª∫ÂÆåÊàê"></a>Êê≠Âª∫ÂÆåÊàê</h3><p>  ÁªèËøáÊº´ÈïøÁöÑÁ≠âÂæÖÔºåÂ¶ÇÊûúÂëΩ‰ª§Ë°åÂèòÊàêroot@xxxxxxxxxxxx ËØ¥Êòé‰∏ãËΩΩÂÆâË£ÖÂÆåÊàêÔºåÁî®Êà∑Â∑≤ÁªèÂú®DockerÂÆπÂô®‰∏≠‰∫Ü(xxxxxxxxx‰∏∫ÂΩìÂâçÂÆπÂô®ID)„ÄÇ</p>
<h2 id="ÂáÜÂ§áËÆ≠ÁªÉÊ†∑Êú¨"><a href="#ÂáÜÂ§áËÆ≠ÁªÉÊ†∑Êú¨" class="headerlink" title="ÂáÜÂ§áËÆ≠ÁªÉÊ†∑Êú¨"></a>ÂáÜÂ§áËÆ≠ÁªÉÊ†∑Êú¨</h2><p>  Êú∫Âô®Â≠¶‰π†ÈúÄË¶ÅÂ§ßÈáèÊ†∑Êú¨„ÄÇËøôÈáåÊàëÁõ¥Êé•‰ΩøÁî®‰∫ÜGoogleÂõæÁâáÁöÑÊêúÁ¥¢ÁªìÊûú‰Ωú‰∏∫Ê†∑Êú¨ÔºåËøôÊ†∑ÁöÑÊñπÂºèÊñπ‰æøÂø´Êç∑Ôºå‰ΩÜÊ†∑Êú¨Ë¥®Èáè‰∏ç‰∏ÄÂÆöÈ´ò„ÄÇÂΩì‰Ω†Â∞ùËØïÂú®GoogleÂõæÁâá‰∏≠ÊêúÁ¥¢‚ÄúËú°Á¨îÂ∞èÊñ∞‚ÄùÔºåÊêúÁ¥¢ÁªìÊûúÂæàÊúâÂèØËÉΩÂá∫Áé∞‰∏ÄÂπÖÊ≤°ÊúâÂåÖÂê´Ëú°Á¨îÂ∞èÊñ∞ÁöÑÂõæÔºåËØ•ÂõæÂèØËÉΩÂè™ÂåÖÂê´ÊúâÂä®ÊÑüË∂Ö‰∫∫ÁîöËá≥Â∞èÁôΩ„ÄÇËøô‰∫õÈîôËØØÁöÑ‚ÄúÊ≠£Ê†∑Êú¨‚Äù‰ºöÂØπËÆ≠ÁªÉÁªìÊûú‰∫ßÁîüÂΩ±Âìç„ÄÇ<br>  ÂàÜÂà´Âú®GoogleÂõæÁâá‰∏≠ÊêúÁ¥¢‚ÄúCrayon Shin-chan‚Äù„ÄÅ‚Äúspongebob‚Äù„ÄÅ‚Äúminions‚ÄùÂèØ‰ª•ÊâæÂà∞Â§ßÈáèÂõæÁâá„ÄÇÂèØ‰ª•‰ΩøÁî®ChromeÁöÑ‰∏Ä‰∏™Âêç‰∏∫‚ÄúFatkun Batch Download Image‚ÄùÁöÑÊâ©Â±ïÁ®ãÂ∫èËøõË°åÂõæÁâáÊâπÈáè‰∏ãËΩΩ„ÄÇÊñ∞Âª∫‰∏Ä‰∏™cartoonÊñá‰ª∂Â§πÔºåÂ∞ÜÂõæÁâáÂàÜÂà´ÊîæÂú®ÂÖ∂Â≠êÊñá‰ª∂Â§πcartoon/crayon cartoon/minions cartoon/spongebob‰∏ã„ÄÇÊØè‰∏™ÁõÆÂΩïÊúâ800~900Âº†Âõæ„ÄÇ</p>
<h2 id="ÂºÄÂßãËÆ≠ÁªÉ"><a href="#ÂºÄÂßãËÆ≠ÁªÉ" class="headerlink" title="ÂºÄÂßãËÆ≠ÁªÉ"></a>ÂºÄÂßãËÆ≠ÁªÉ</h2><p>  Êé•‰∏ãÊù•ÁöÑÊ≠•È™§ÈúÄË¶ÅrootÊùÉÈôêÂπ∂ÈúÄË¶ÅËÆøÈóÆGoogleÊúçÂä°Âô®„ÄÇ</p>
<h3 id="ÂàõÂª∫Â∑•‰ΩúÁõÆÂΩï"><a href="#ÂàõÂª∫Â∑•‰ΩúÁõÆÂΩï" class="headerlink" title="ÂàõÂª∫Â∑•‰ΩúÁõÆÂΩï"></a>ÂàõÂª∫Â∑•‰ΩúÁõÆÂΩï</h3><p>  Êñ∞Âª∫‰∏Ä‰∏™Âêç‰∏∫tf_filesÁöÑÊñá‰ª∂Â§πÔºåÂπ∂Â∞ÜcartoonÊñá‰ª∂Â§πcopyËøõÊù•„ÄÇ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mkdir tf_files</span><br><span class="line">cp cartoon tf_files</span><br></pre></td></tr></table></figure>
<h3 id="ËøêË°åÂÆπÂô®Âπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï"><a href="#ËøêË°åÂÆπÂô®Âπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï" class="headerlink" title="ËøêË°åÂÆπÂô®Âπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï"></a>ËøêË°åÂÆπÂô®Âπ∂ÊåÇËΩΩÂ∑•‰ΩúÁõÆÂΩï</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it -v $(<span class="built_in">pwd</span>)/tf_files:/tf_files \</span><br><span class="line">  gcr.io/tensorflow/tensorflow:latest-devel</span><br></pre></td></tr></table></figure>
<h3 id="‰ΩøÁî®ËøÅÁßªÂ≠¶‰π†ËøõË°åËÆ≠ÁªÉ"><a href="#‰ΩøÁî®ËøÅÁßªÂ≠¶‰π†ËøõË°åËÆ≠ÁªÉ" class="headerlink" title="‰ΩøÁî®ËøÅÁßªÂ≠¶‰π†ËøõË°åËÆ≠ÁªÉ"></a>‰ΩøÁî®ËøÅÁßªÂ≠¶‰π†ËøõË°åËÆ≠ÁªÉ</h3><h4 id="‰ªÄ‰πàÊòØËøÅÁßªÂ≠¶‰π†"><a href="#‰ªÄ‰πàÊòØËøÅÁßªÂ≠¶‰π†" class="headerlink" title="‰ªÄ‰πàÊòØËøÅÁßªÂ≠¶‰π†"></a>‰ªÄ‰πàÊòØËøÅÁßªÂ≠¶‰π†</h4><p>  ËøÅÁßªÂ≠¶‰π†(Transfer Learning)ËØïÂõæ‰ΩøÁî®Â∑≤ÁªèËÆ≠ÁªÉÂ•ΩÁöÑÊ®°ÂûãÂèÇÊï∞Â∏ÆÂä©Êñ∞Ê®°ÂûãËÆ≠ÁªÉÊñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇÂΩìÊï∞‰∏™ËÆ≠ÁªÉ‰ªªÂä°ÂèäÊï∞ÊçÆÊúâ‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÁõ∏ÂÖ≥ÊÄßÔºå‰ΩøÁî®ËøÅÁßªÂ≠¶‰π†ÂèØ‰ª•Âä†Âø´Êñ∞Ê®°ÂûãÁöÑÂ≠¶‰π†ËÄå‰∏çÁî®Ëä±Ë¥πÂ§ßÈáèÊó∂Èó¥ÂíåÊ†∑Êú¨‰ªéÂ§¥ÂºÄÂßãËÆ≠ÁªÉ„ÄÇÊàë‰ª¨ÁöÑ‰ªªÂä°ÊòØ‰∏Ä‰∏™ÂõæÂÉèËØÜÂà´‰ªªÂä°ÔºåËøô‰∏éGoogleËÆ≠ÁªÉÂ•ΩÁöÑInceptionÊ®°ÂûãÊúâËæÉÂ§ßÁöÑÁõ∏ÂÖ≥ÊÄßÔºåËÄåÊàë‰ª¨ÁöÑÊ†∑Êú¨ÂèàËæÉÂ∞ëÔºåÂõ†Ê≠§Âü∫‰∫éInceptionÊ®°ÂûãËøõË°åËøÅÁßªÂ≠¶‰π†ÊòØ‰∏™‰∏çÈîôÁöÑÈÄâÊã©„ÄÇ</p>
<h4 id="‰ªÄ‰πàÊòØInceptionÊ®°Âûã"><a href="#‰ªÄ‰πàÊòØInceptionÊ®°Âûã" class="headerlink" title="‰ªÄ‰πàÊòØInceptionÊ®°Âûã"></a>‰ªÄ‰πàÊòØInceptionÊ®°Âûã</h4><p>  InceptionÊ®°ÂûãÊòØ‰∏ÄÁßçÁî®‰∫éÂõæÂÉèÂàÜÁ±ªÁöÑÂç∑ÁßØÁ•ûÁªèÁΩëÁªúÊ®°Âûã„ÄÇËøôÊòØ‰∏Ä‰∏™Â§öÂ±Ç„ÄÅÊúâÁùÄÊûÅÂÖ∂Â§çÊùÇÁªìÊûÑÁöÑÂç∑ÁßØÁ•ûÁªèÁΩëÁªú„ÄÇËØ•Ê®°ÂûãÂèØ‰ª•ËØÜÂà´Ë∂ÖËøá1000ÁßçÁâ©ÂìÅÔºå‰ΩÜÂπ∂‰∏çÂåÖÊã¨Êàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÂä®Êº´‰∫∫Áâ©„ÄÇGithub‰∏äÊúâÊèêÂà∞InceptionÊ®°ÂûãËÆ≠ÁªÉÊòØÂú®‰∏ÄÂè∞Êúâ128GB RAMÂíå8ÂùóTesla K40ÁöÑÁîµËÑë‰∏äËøõË°åÁöÑ(We targeted a desktop with 128GB of CPU ram connected to 8 NVIDIA Tesla K40 GPU)„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Âú®‰Ω†ÁöÑ‰∏™‰∫∫ÁîµËÑë‰∏äÂ∞ùËØï‰ªéÈõ∂ÂºÄÂßãËÆ≠ÁªÉ‰∏Ä‰∏™ËøôÁßçÈáèÁ∫ßÁöÑÁ•ûÁªèÁΩëÁªúÔºå‰Ω†ÂèØËÉΩÈúÄË¶ÅÊï∞‰∏™ÊòüÊúüÊâçËÉΩÂÆåÊàêËÆ≠ÁªÉÔºåËøòÊúâÂæàÂ§ßÁöÑÂèØËÉΩÊÄßÂá∫Áé∞run out of GPU memoryÊàñrun out of CPU memoryÂØºËá¥ËÆ≠ÁªÉÂ§±Ë¥•„ÄÇÂú®ËøôÈáåÊàë‰ª¨Â∞ÜÂ∞ùËØï‰ΩøÁî®TensorflowÊèê‰æõÁöÑretrain.pyËÆ≠ÁªÉÊï¥‰∏™Á•ûÁªèÁΩëÁªúÁöÑÊúÄÂêé‰∏ÄÂ±ÇÔºåÂç≥ÂÜ≥Á≠ñÂ±Ç/ÂàÜÁ±ªÂ±ÇÔºåËÄåÂÄíÊï∞Á¨¨‰∫åÂ±ÇË¢´Áß∞‰∏∫Bottlenecks(Áì∂È¢àÂ±Ç)„ÄÇÊàë‰ª¨Â∞ÜÂà©Áî®Bottlenecks‰∫ßÁîüÁöÑÊúâÊïàÊï∞ÊçÆÔºå‰æõÁªôÊúÄÂêéÁöÑÂÜ≥Á≠ñÂ±Ç/ÂàÜÁ±ªÂ±ÇÂÅöÂá∫ÊúÄÂêéÁöÑÂàÜÁ±ªÈ¢ÑÊµã„ÄÇ</p>
<h4 id="ÂºÄÂßãËÆ≠ÁªÉ-1"><a href="#ÂºÄÂßãËÆ≠ÁªÉ-1" class="headerlink" title="ÂºÄÂßãËÆ≠ÁªÉ"></a>ÂºÄÂßãËÆ≠ÁªÉ</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tensorflow/</span><br><span class="line">python tensorflow/tensorflow/examples/image_retraining/retrain.py \</span><br><span class="line">  --bottleneck_dir=/tf_files/bottlenecks \</span><br><span class="line">  --how_many_training_steps 4000 \</span><br><span class="line">  --model_dir=/tf_files/inception \</span><br><span class="line">  --output_graph=/tf_files/cartoon.pb \</span><br><span class="line">  --output_labels=/tf_files/cartoon.txt \</span><br><span class="line">  --image_dir /tf_files/cartoon</span><br></pre></td></tr></table></figure>
<p>Âú®ËøôÈáåÊàë‰ª¨ËÆæÁΩÆ‰∫ÜbottleneckÁöÑËæìÂá∫ÁõÆÂΩïÔºåtraining_stepsÔºåÊ®°Âûã‰ΩçÁΩÆÔºåpbÊñá‰ª∂ÂèälabelËæìÂá∫‰ΩçÁΩÆÔºåÊ†∑Êú¨ÂõæÁâá‰ΩçÁΩÆ„ÄÇ‰∏ÄËà¨ËÄåË®Ätraining_stepsË∂äÂ§öÔºåËÆ≠ÁªÉÊó∂Èó¥Ë∂äÈïøÔºåÊïàÊûúË∂äÂ•ΩÔºåÂèç‰πãÂàôÂèç„ÄÇÂ¶ÇÊûúÊ®°Âûã‰ΩçÁΩÆÊ≤°ÊúâÈúÄË¶ÅÁöÑÊ®°ÂûãÔºåËØ•ËÑöÊú¨‰ºöÂ∞ùËØïËá™Âä®‰∏ãËΩΩ„ÄÇpbÊñá‰ª∂Â∞±ÊòØËÆ≠ÁªÉÂÆåÊàêÁöÑÊ®°ÂûãÔºålabelÊòØ‰∏Ä‰∏™txtÊñá‰ª∂ÔºåÈáåÈù¢ÂåÖÂê´‰∫ÜÊàë‰ª¨ËÆ≠ÁªÉÂÆåÊàêÁöÑÊ®°ÂûãËÉΩËØÜÂà´ÁöÑÂØπË±°ÂêçÁß∞„ÄÇ‰∏çÂá∫ÊÑèÂ§ñÁöÑËØùÔºåÂá†ÂçÅÂàÜÈíüÂêéËÆ≠ÁªÉÂ∞±ÂèØ‰ª•ÂÆåÊàê„ÄÇ</p>
<p><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/0.png" alt></p>
<p>ÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÁöÑÊ®°ÂûãÁöÑÊµãËØïËØÜÂà´ÂáÜÁ°ÆÁéáËææÂà∞‰∫Ü95.5%„ÄÇ</p>
<p>tf_files‰∏ãÁîüÊàê‰∫ÜÊàë‰ª¨ËÆ≠ÁªÉÁöÑÊ®°Âûãcartoon.pb‰ª•ÂèälabelÊñá‰ª∂cartoon.txt„ÄÇÊâìÂºÄcartoon.txtÂèØ‰ª•ÁúãÂà∞ÔºåËØ•Ê®°ÂûãÂèØ‰ª•ËØÜÂà´ÁöÑÂØπË±°Êúâcrayon(Ëú°Á¨îÂ∞èÊñ∞)„ÄÅminions(Â∞èÈªÑ‰∫∫)„ÄÅspongebob(Êµ∑ÁªµÂÆùÂÆù)‰∏âÁßç(Â∞±ÊòØcartoonÊñá‰ª∂Â§π‰∏ãÂ≠êÊñá‰ª∂Â§πÁöÑÂêçÂ≠ó)„ÄÇÊàëËøôÈáåÁîüÊàêÁöÑpbÊñá‰ª∂Êúâ87.4MB„ÄÇ</p>
<p><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/1.png" alt></p>
<h2 id="‰ºòÂåñ‰∏éÂéãÁº©"><a href="#‰ºòÂåñ‰∏éÂéãÁº©" class="headerlink" title="‰ºòÂåñ‰∏éÂéãÁº©"></a>‰ºòÂåñ‰∏éÂéãÁº©</h2><h3 id="‰∏∫‰ªÄ‰πàË¶ÅËøõË°å‰ºòÂåñÂíåÂéãÁº©"><a href="#‰∏∫‰ªÄ‰πàË¶ÅËøõË°å‰ºòÂåñÂíåÂéãÁº©" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶ÅËøõË°å‰ºòÂåñÂíåÂéãÁº©"></a>‰∏∫‰ªÄ‰πàË¶ÅËøõË°å‰ºòÂåñÂíåÂéãÁº©</h3><p>  ÂØπ‰∫éÁßªÂä®ËÆæÂ§á(‰æãÂ¶ÇÊô∫ËÉΩÊâãÊú∫)ÂíåÂµåÂÖ•ÂºèËÆæÂ§á(‰æãÂ¶ÇË∑ëAndroid ThingsÊàñLinuxÁöÑËÆæÂ§á)Êù•ËØ¥ÔºåËøô‰∏™Ê®°ÂûãÊñá‰ª∂Â§™Â§ß‰∫Ü„ÄÇÂ¶ÇÊûú‰Ω†Â∞ùËØïÊääÂÖ∂ÊâìÂåÖ‰∏∫apkÊñá‰ª∂Ôºå‰Ω†ÂèØËÉΩ‰ºöÂæóÂà∞‰∏Ä‰∏™Â∞ÜËøë100MBÁöÑapkÔºåËøôÂØπÁî®Êà∑Êù•ËØ¥ÂèØËÉΩ‰ΩìÈ™åÂπ∂‰∏çÂ§™ÂèãÂ•Ω„ÄÇÂõ†Ê≠§Êàë‰ª¨ÈúÄË¶ÅÂØπËØ•Ê®°ÂûãËøõË°å‰ºòÂåñÂíåÂéãÁº©‰ª•ÂáèÂ∞èÂÖ∂‰ΩìÁßØ„ÄÇ<br>Â¶ÇÊûú‰Ω†Â∞ùËØïÁõ¥Êé•Â∞ÜËØ•pbÊñá‰ª∂ÂéãÁº©‰∏∫zipÊñá‰ª∂Ôºå‰Ω†‰ºöÂèëÁé∞ÂéãÁº©Êñá‰ª∂Â§ßÂ∞èÂè™ÊØîÂéüÊù•Â∞è‰∫ÜÂá†MB„ÄÇÊàëÂ∞ùËØï‰ΩøÁî®‰ºòÂåñËÑöÊú¨ÂØπpbÊñá‰ª∂ËøõË°å‰ºòÂåñÔºå‰ºòÂåñÂêéÁöÑÂéãÁº©ÊïàÊûúËøò‰∏çÈîô„ÄÇ</p>
<h3 id="‰ΩøÁî®optimize-for-inference‰ºòÂåñÂ∑•ÂÖ∑"><a href="#‰ΩøÁî®optimize-for-inference‰ºòÂåñÂ∑•ÂÖ∑" class="headerlink" title="‰ΩøÁî®optimize_for_inference‰ºòÂåñÂ∑•ÂÖ∑"></a>‰ΩøÁî®optimize_for_inference‰ºòÂåñÂ∑•ÂÖ∑</h3><p>  optimize_for_inferenceËÑöÊú¨Â∞Ü‰ºöÂ∏ÆÂä©Êàë‰ª¨Âà†Èô§ÂΩìÂâçÊ®°Âûã‰∏≠ËæìÂÖ•ËæìÂá∫‰πãÂâç‰∏çÈúÄË¶ÅÁöÑËäÇÁÇπÔºåÂπ∂ËøõË°å‰∏Ä‰∫õÂÖ∂‰ªñ‰ºòÂåñ‰ª•ÊèêÈ´òËøêË°åÊÄßËÉΩ„ÄÇ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python tensorflow/python/tools/optimize_for_inference.py \</span><br><span class="line">  --input=/tf_files/cartoon.pb \</span><br><span class="line">  --output=/tf_files/optimized_cartoon.pb \</span><br><span class="line">  --input_names=<span class="string">"Mul"</span> \</span><br><span class="line">  --output_names=<span class="string">"final_result"</span></span><br></pre></td></tr></table></figure>
<p>‰ºòÂåñÂÆåÊàêÂêéÊàë‰ª¨ÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™Âêç‰∏∫optimized_cartoon.pbÁöÑ‰ºòÂåñËøáÁöÑÊ®°ÂûãÊñá‰ª∂„ÄÇ‰ΩÜÊòØÂè™ÊØîÂéüÊù•Â∞è‰∫Ü0.2MB„ÄÇÂéãÁº©‰∏∫zipÊñá‰ª∂‰πüÂ∞è‰∏ç‰∫ÜÂ§öÂ∞ë:(</p>
<h3 id="‰ΩøÁî®quantize-graphÂ∑•ÂÖ∑ËøõË°åËøõ‰∏ÄÊ≠•‰ºòÂåñ"><a href="#‰ΩøÁî®quantize-graphÂ∑•ÂÖ∑ËøõË°åËøõ‰∏ÄÊ≠•‰ºòÂåñ" class="headerlink" title="‰ΩøÁî®quantize_graphÂ∑•ÂÖ∑ËøõË°åËøõ‰∏ÄÊ≠•‰ºòÂåñ"></a>‰ΩøÁî®quantize_graphÂ∑•ÂÖ∑ËøõË°åËøõ‰∏ÄÊ≠•‰ºòÂåñ</h3><p>  ÁúãÊù•ÊòØÊó∂ÂÄôÊîæÂ§ßÊãõ‰∫Ü„ÄÇÊàë‰ª¨Â∞Ü‰ΩøÁî®quantize_graphÂØπÊ®°ÂûãÊñá‰ª∂‰∏≠ÁöÑÊùÉÈáçÂèÇÊï∞ËøõË°åÂõõËàç‰∫îÂÖ•„ÄÇËøô‰∏ÄÊñπÂºèÂ∞Ü‰ºöÈôç‰ΩéÈ¢ÑÊµãÂáÜÁ°ÆÁéá(‰ΩÜÊòØÈÄöÂ∏∏Âè™Èôç‰Ωé1%Â∑¶Âè≥)„ÄÇ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python tensorflow/tools/quantization/quantize_graph.py \</span><br><span class="line">  --input=/tf_files/optimized_cartoon.pb \</span><br><span class="line">  --output=/tf_files/rounded_cartoon.pb \</span><br><span class="line">  --output_node_names=<span class="string">"final_result"</span> \</span><br><span class="line">  --mode=weights_rounded</span><br></pre></td></tr></table></figure>
<p>  ÈÄöÂ∏∏Êù•ËØ¥ÔºåÊñ∞ÁîüÊàêÁöÑrounded_cartoon.pbÂ§ßÂ∞èÂπ∂‰∏ç‰ºöÂèëÁîüÂ§™Â§ßÂèòÂåñÔºå‰ΩÜÊòØÂΩìÊàëÂ∞ùËØïÂ∞ÜÂÖ∂ÂéãÁº©‰∏∫zipÊñá‰ª∂Êó∂ÔºåÊàëÂæóÂà∞‰∫Ü‰∏Ä‰∏™‰ª§‰∫∫Êª°ÊÑèÁöÑÂéãÁº©ÂåÖÂ§ßÂ∞èÔºö23.9MB</p>
<p><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/2.png" alt></p>
<p>  Áé∞Âú®Â¶ÇÊûúÊàë‰ª¨Â∞ùËØïÂ∞ÜÂÖ∂‰Ωú‰∏∫ËµÑÊ∫êÊñá‰ª∂ÊâìÂåÖËøõapkÔºåÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™Â∞èÂæóÂ§öÁöÑÂÆâË£ÖÂåÖÔºåÁî®Êà∑‰∏ãËΩΩÁöÑÊó∂Èó¥Â§ßÂ§ßÂáèÂ∞ë‰∫Ü„ÄÇ</p>
<h2 id="ÊµãËØï‰∏éÈ™åËØÅ"><a href="#ÊµãËØï‰∏éÈ™åËØÅ" class="headerlink" title="ÊµãËØï‰∏éÈ™åËØÅ"></a>ÊµãËØï‰∏éÈ™åËØÅ</h2><p>  È¶ñÂÖàÊàë‰ª¨Â∞ÜÊµãËØïÁªèËøáoptimize_for_inference‰ºòÂåñÁöÑoptimized_cartoon.pb„ÄÇ‰∏∫‰∫ÜÊñπ‰æøÊµãËØïÔºåÊàë‰ΩøÁî®‰∫ÜTensorFlowÂú®Android‰∏äÁöÑdemo appÔºå‰Ω†ÂèØ‰ª•Âú®Github‰∏äÊâæÂà∞ÂÖ∂Ê∫êÁ†Å„ÄÇË¶ÅËÆ©Êàë‰ª¨ÁöÑÊ®°ÂûãÊñá‰ª∂ËÉΩÂ§üÂú®Ëøô‰∏™demo‰∏äÊ≠£Â∏∏Â∑•‰ΩúÔºåÊàë‰ª¨ÈúÄË¶ÅÂÅö‰∏ÄÁÇπÂæÆÂ∞èÁöÑÂ∑•‰Ωú„ÄÇ<br>1.Â§çÂà∂optimized_cartoon.pbÂèäcartoon.txtÊñá‰ª∂Ëá≥app/src/main/assets<br>2.Âú®ClassifierActivity.java‰∏≠‰øÆÊîπÂ¶Ç‰∏ãÈÉ®ÂàÜÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INPUT_SIZE = <span class="number">299</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IMAGE_MEAN = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> IMAGE_STD = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String INPUT_NAME = <span class="string">"Mul"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String OUTPUT_NAME = <span class="string">"final_result"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String MODEL_FILE = <span class="string">"file:///android_asset/optimized_cartoon.pb"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LABEL_FILE = <span class="string">"file:///android_asset/cartoon.txt"</span>;</span><br></pre></td></tr></table></figure>
<p>ËøôÈáåÊàë‰ª¨ÈôêÂà∂ËæìÂÖ•ÂõæÂÉè‰∏∫299x299, Âπ∂Êõ¥ÊîπINPUT_NAMEÂíåOUTPUT_NAME„ÄÇÂΩìÁÑ∂ËøòÊúâMODEL_FILEÂíåLABEL_FILEÁöÑ‰ΩçÁΩÆ„ÄÇÊµãËØïÊ†∑‰æãÊàëÁõ¥Êé•Áî®ÊâãÊú∫ÊãçÁöÑÔºåÁî±‰∫éÈôêÂà∂‰∫ÜËæìÂÖ•ÂõæÂÉèÂ§ßÂ∞è‰∏∫299x299ÔºåÊâÄ‰ª•ÂõæÁâáË¥®ÈáèÊØîËæÉÂ∑ÆÔºå‰ΩÜÊòØËøòÊòØÂæóÂà∞‰∫Ü‰∏çÈîôÁöÑËøêË°åÁªìÊûúÔºö<br><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/res1.png" alt><br><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/res2.png" alt><br><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/res3.png" alt><br>ÂÜçÁúãÁúãÁªèËøáquantize_graph‰ºòÂåñÁöÑÔºö<br><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/res4.png" alt><br><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/res5.png" alt><br><img src="/2018-01-03/%E4%BD%BF%E7%94%A8TensorFlow%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%ABAI/res6.png" alt></p>
<h2 id="‰∏ã‰∏ÄÊ≠•"><a href="#‰∏ã‰∏ÄÊ≠•" class="headerlink" title="‰∏ã‰∏ÄÊ≠•"></a>‰∏ã‰∏ÄÊ≠•</h2><p>  Êé•‰∏ãÊù•Êàë‰ª¨ÂèØ‰ª•Â∞ùËØïËøõË°åÈü≥È¢ëÊñπÂêëÁöÑÊú∫Âô®Â≠¶‰π†Êé¢Á¥¢„ÄÇÁõÆÂâçËøòÂú®Á†îÁ©∂‰∏≠ÔºåÁ≠âÊúâ‰∫ÜÊúâË∂£ÁöÑÂèëÁé∞ÂêéÂÜçÂÜôÁØápostÂêß„ÄÇ</p>
]]></content>
      <categories>
        <category>Êú∫Âô®Â≠¶‰π†</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>TensorFlow</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ΩøÁî®GpartedÊâ©Â±ïÂàÜÂå∫</title>
    <url>/2018-01-03/%E4%BD%BF%E7%94%A8Gparted%E6%89%A9%E5%B1%95%E5%88%86%E5%8C%BA/</url>
    <content><![CDATA[<p>  ÂâçÊÆµÊó∂Èó¥Ë∑ëÊú∫Âô®Â≠¶‰π†Ôºå‰ΩøÁî®docker‰∏ã‰∫ÜÂá†‰∏™tensorflowÁöÑÈïúÂÉèÔºåÁ™ÅÁÑ∂ÂèëÁé∞Á£ÅÁõò‰∏çÂ§üÁî®‰∫Ü„ÄÇÁõ∏ÂÖ≥ÁöÑÂëΩ‰ª§Ë°å‰∏çÂ§™ÁÜüÔºåÂ∞±ÊÉ≥ÊâæÊâæÊòØ‰∏çÊòØÊúâÁ±ª‰ºº‰∫éÂàÜÂå∫Á≤æÁÅµÁöÑÂ∏¶GUIÁöÑÂàÜÂå∫Â∑•ÂÖ∑ÔºåËøòÁúüÊâæÂà∞‰∏Ä‰∏™Gparted„ÄÇ</p>
<a id="more"></a>
<p>  È¶ñÂÖàÂÆâË£ÖGpartedÔºåÁÑ∂ÂêéËøêË°åÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># apt-get install gparted</span></span><br><span class="line"><span class="comment"># gparted</span></span><br></pre></td></tr></table></figure>
<p>  Â¶ÇÊûúÊòØUbuntu 17.10Êàñ‰ª•‰∏äÁâàÊú¨ÔºåÂèØËÉΩ‰ºöÊä•ÈîôÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gparted</span></span><br><span class="line">Created symlink /run/systemd/system/-.mount ‚Üí /dev/null.</span><br><span class="line">Created symlink /run/systemd/system/run-user-1000.mount ‚Üí /dev/null.</span><br><span class="line">Created symlink /run/systemd/system/run-user-121.mount ‚Üí /dev/null.</span><br><span class="line">Created symlink /run/systemd/system/run-vmblock\x2dfuse.mount ‚Üí /dev/null.</span><br><span class="line">Created symlink /run/systemd/system/tmp.mount ‚Üí /dev/null.</span><br><span class="line">Created symlink /run/systemd/system/var-lib-docker-overlay2.mount ‚Üí /dev/null.</span><br><span class="line">Created symlink /run/systemd/system/var-lib-docker-plugins.mount ‚Üí /dev/null.</span><br><span class="line">No protocol specified</span><br><span class="line"></span><br><span class="line">(gpartedbin:3041): Gtk-WARNING **: cannot open display: :0</span><br><span class="line">Removed /run/systemd/system/-.mount.</span><br><span class="line">Removed /run/systemd/system/run-user-1000.mount.</span><br><span class="line">Removed /run/systemd/system/run-user-121.mount.</span><br><span class="line">Removed /run/systemd/system/run-vmblock\x2dfuse.mount.</span><br><span class="line">Removed /run/systemd/system/tmp.mount.</span><br><span class="line">Removed /run/systemd/system/var-lib-docker-overlay2.mount.</span><br><span class="line">Removed /run/systemd/system/var-lib-docker-plugins.mount.</span><br></pre></td></tr></table></figure>
<p>  google‰∫Ü‰∏Ä‰∏ãÔºåÂéüÂõ†ÊòØÂ∫îÁî®Ê≤°ÊúâÂÆåÂÖ®ÊîØÊåÅWayland„ÄÇ‰ΩÜÊòØÊúâworkaround:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ xhost +SI:localuser:root</span><br></pre></td></tr></table></figure>
<p>  ‰πãÂêéÂ∞±ÂèØ‰ª•Ê≠£Â∏∏ËøêË°å‰∫Ü„ÄÇÈ¶ñÂÖàÂ∞ÜÂΩìÂâçÂàÜÂå∫Êâ©ÂÆπ„ÄÇ‰πãÂêéÊ∑ªÂä†‰∏Ä‰∏™Êâ©Â±ïÂàÜÂå∫ÔºåÂÜçÂú®Êâ©Â±ïÂàÜÂå∫‰∏ãÊ∑ªÂä†linux-swap„ÄÇÊúÄÂêéÂà´Âøò‰∫ÜÂ∫îÁî®‰øÆÊîπ„ÄÇ<br>  <img src="/2018-01-03/%E4%BD%BF%E7%94%A8Gparted%E6%89%A9%E5%B1%95%E5%88%86%E5%8C%BA/gparted.png" alt></p>
]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Âú®Ê†ëËéìÊ¥æ‰∏ä‰ΩøÁî®Google Assistant</title>
    <url>/2017-12-28/%E5%9C%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%E4%BD%BF%E7%94%A8Google-Assistant/</url>
    <content><![CDATA[<p>ÂâçÊÆµÊó∂Èó¥Â∞ùËØïÂú®Ê†ëËéìÊ¥æ‰∏ä‰ΩøÁî®Google Assistant, Á≥ªÁªüËÉΩÂ§üÊçïÊçâÈü≥È¢ëÂπ∂ËØÜÂà´Ôºå‰ΩøÁî®USBÂ£∞Âç°‰πüËÉΩÊ≠£Â∏∏Â∑•‰ΩúÔºå‰ΩÜ‰ΩøÁî®3.5mm jackÊó∂Ê≤°ÊúâÈü≥È¢ëËæìÂá∫„ÄÇÁªèËøáÊë∏Á¥¢Áªà‰∫éÊúâËæìÂá∫‰∫ÜÔºÅÂÜôÁØápostËÆ∞ÂΩï‰∏Ä‰∏ãÂÖ≥ÈîÆÊ≠•È™§ÂêßÔºÅ</p>
<a id="more"></a>
<p>  È¶ñÂÖàÈÖçÁΩÆËæìÂÖ•ËæìÂá∫ËÆæÂ§áÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">audioInputDevice = findAudioDevice(AudioManager.GET_DEVICES_INPUTS, AudioDeviceInfo.TYPE_USB_DEVICE);</span><br><span class="line">audioOutputDevice = findAudioDevice(AudioManager.GET_DEVICES_OUTPUTS, AudioDeviceInfo.TYPE_BUILTIN_SPEAKER);</span><br></pre></td></tr></table></figure>
<p>Ê≠§Â§ÑTYPE_BUILTIN_SPEAKERÂç≥‰∏∫3.5mmËæìÂá∫Âè£„ÄÇ‰πãÂâçÂ∞ùËØïTYPE_AUX_LINE„ÄÅTYPE_LINE_ANALOG„ÄÅTYPE_WIRED_HEADPHONESÁ≠âÂÖ®ÈÉΩ‰∏çËÉΩÂèëÁé∞ËÆæÂ§áËøîÂõûnull;<br>  ÁÑ∂ÂêéÁîüÊàêÂá≠ÊçÆÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    userCredentials =</span><br><span class="line">            EmbeddedAssistant.generateCredentials(<span class="keyword">this</span>, R.raw.credentials);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException | JSONException e) &#123;</span><br><span class="line">    Log.e(TAG, <span class="string">"error getting user credentials"</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  ÊúÄÂêé‰ΩøÁî®mEmbeddedAssistant = new EmbeddedAssistant.Builder(), ÁªëÂÆöÂÆåRequestCallback„ÄÅConversationCallback„ÄÅÂá≠ÊçÆ„ÄÅÂàùÂßãÈü≥Èáè„ÄÅÈááÊ†∑Áéá„ÄÅËæìÂÖ•ËæìÂá∫ËÆæÂ§áÂ∞±ÂèØ‰ª•Âï¶ÔºÅ<br>  Áé∞Âú®ÁöÑsampleËøòÊúâÁÇπË†¢Ôºå‰∏çËÉΩ‰ΩøÁî®HotWordÂî§ÈÜí„ÄÇËÄå‰∏îÂú®Ê≤°ÊúâÂâçÁΩÆËØ≠Ë®ÄÂ§ÑÁêÜÊ®°ÂùóÁöÑÊÉÖÂÜµ‰∏ãÔºåËØÜÂà´Á®çÂæÆÊúâÁÇπÊÖ¢„ÄÇ</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Raspberry Pi</tag>
        <tag>Android Things</tag>
      </tags>
  </entry>
  <entry>
    <title>Âú®Android Things‰∏ä‰ΩøÁî®TTSÂèä‰ΩøÁî®Google AssistantÈÅáÂà∞ÁöÑÈóÆÈ¢ò</title>
    <url>/2017-12-06/%E5%9C%A8Android-Things%E4%B8%8A%E4%BD%BF%E7%94%A8TTS%E5%8F%8A%E4%BD%BF%E7%94%A8Google-Assistant%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>  Êô∫ËÉΩÈü≥ÂìçÊúâ‰∏§‰∏™ÈáçË¶ÅÂäüËÉΩ:‚ÄúËØ¥‚ÄùÂíå‚ÄúÂê¨‚Äù„ÄÇÂú®Android Things‰∏äÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáTextToSpeechÂíåGoogle AssistantÊù•ÂÆûÁé∞‰∏äËø∞ÂäüËÉΩ„ÄÇTTSÁöÑÂÆûÁé∞ÊØîËæÉÂÆπÊòìÔºåËÄåGoogle AssistantÂ∞±ÊØîËæÉÈ∫ªÁÉ¶‰∫ÜÔºåÁõÆÂâçÊàëÈÅáÂà∞ÁöÑÈóÆÈ¢òÊòØGoogle AssistantËÉΩÂê¨ÊáÇÊàëËØ¥‰ªÄ‰πàÔºåÂç¥‰∏çËÉΩÁªôÂá∫Á≠îÊ°à„ÄÇ„ÄÇËøòÊòØÂÜô‰∏™Êó•ÂøóËÆ∞ÂΩï‰∏Ä‰∏ãÂêß„ÄÇ</p>
<a id="more"></a>
<h2 id="TTSÁöÑÂÆûÁé∞"><a href="#TTSÁöÑÂÆûÁé∞" class="headerlink" title="TTSÁöÑÂÆûÁé∞"></a>TTSÁöÑÂÆûÁé∞</h2><p>  TTSÂÆûÁé∞Ëµ∑Êù•ÂçÅÂàÜÂÆπÊòìÔºåÂàõÂª∫TextToSpeechÂπ∂ÈáçÂÜôOnInitListenerÁöÑonInitÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ttsEngine = <span class="keyword">new</span> TextToSpeech(MainActivity.<span class="keyword">this</span>, <span class="keyword">new</span> TextToSpeech.OnInitListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInit</span><span class="params">(<span class="keyword">int</span> status)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (status==TextToSpeech.SUCCESS)&#123;</span><br><span class="line">            ttsEngine.setLanguage(Locale.US);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            Log.w(TAG,<span class="string">"Can not init tts engine"</span>);</span><br><span class="line">            ttsEngine = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ÂÜçÈÄöËøá</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (ttsEngine != <span class="keyword">null</span>) &#123;</span><br><span class="line">    ttsEngine.speak(<span class="string">"Hi master. What can I do for you?"</span>, TextToSpeech.QUEUE_ADD, <span class="keyword">null</span>, <span class="string">"UTTERANCE_ID"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Âç≥ÂèØÂÆûÁé∞Èü≥È¢ëËæìÂá∫„ÄÇÂÆåÊï¥ÁöÑ‰ª£Á†ÅÂ∑≤‰∏ä‰º†Âà∞githubÔºö<a href="https://github.com/codingspirit/Android_Things_TTS" target="_blank" rel="noopener">Roach</a></p>
<h2 id="Google-Assistant"><a href="#Google-Assistant" class="headerlink" title="Google Assistant"></a>Google Assistant</h2><p>  Ë¶Å‰ΩøÁî®Google AssistantÔºåÂøÖÈ°ªË¶Å‰ΩøÁî®Google Assistant APIÂπ∂ÂàõÂª∫Áõ∏Â∫îÁöÑÂä†ÂØÜÂá≠ÊçÆ„ÄÇÂêåÊó∂ÔºåÁî≥ËØ∑ÁöÑGoogleË¥¶Âè∑ËøòË¶ÅÁªô‰∫àappÊùÉÈôê‰ª•ÂÖÅËÆ∏ËÆøÈóÆ‰∏Ä‰∫õÊïèÊÑüÂÜÖÂÆπ„ÄÇÂÖàË¥¥Âº†ÊµãËØïÁªìÊûúÂõæÔºö<br><img src="/2017-12-06/%E5%9C%A8Android-Things%E4%B8%8A%E4%BD%BF%E7%94%A8TTS%E5%8F%8A%E4%BD%BF%E7%94%A8Google-Assistant%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/1.png" alt><br>Âú®ÊµãËØï‰∏≠Ôºåapp‰ºº‰πéÊàêÂäü‰∏ä‰º†‰∫ÜÂΩïÈü≥Âπ∂ËÉΩÊ≠£Á°ÆËØÜÂà´Ôºå‰ΩÜÊòØÂç¥‰∏çËÉΩÊ†πÊçÆÈóÆÈ¢òËøõË°åÊ≠£Á°ÆÁöÑËß£Á≠îÔºåÂàùÊ≠•ÊÄÄÁñëÂèØËÉΩËøòÊúâ‰∏Ä‰∫õÊùÉÈôêÊ≤°ÊúâÁî≥ËØ∑„ÄÇ</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Android Things</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ΩøÁî®@IntDefÊõø‰ª£Enum</title>
    <url>/2017-11-27/%E4%BD%BF%E7%94%A8-IntDef%E6%9B%BF%E4%BB%A3Enum/</url>
    <content><![CDATA[<p>  <a href="https://developer.android.com/topic/performance/memory.html#Overhead" target="_blank" rel="noopener">ÊúâÁØáAndroidÂÆòÊñπÊñáÊ°£</a>ÊèêÂà∞Ôºö‚ÄùFor example, enums often require more than twice as much memory as static constants. You should strictly avoid using enums on Android.‚Äù ‰∫éÊòØÊàë‰ª¨‰ΩøÁî®Ëá™ÂÆö‰πâannotationÊù•‰ª£ÊõøEnum„ÄÇ</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line"><span class="meta">@IntDef</span>(&#123;RATE_120HZ, RATE_64HZ, RATE_32HZ, RATE_16HZ, RATE_8HZ, RATE_4HZ, RATE_2HZ, RATE_1HZ&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SamplingRate &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_120HZ = <span class="number">0b0000</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_64HZ  = <span class="number">0b0001</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_32HZ  = <span class="number">0b0010</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_16HZ  = <span class="number">0b0011</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_8HZ   = <span class="number">0b0100</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_4HZ   = <span class="number">0b0101</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_2HZ   = <span class="number">0b0110</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RATE_1HZ   = <span class="number">0b0111</span>;</span><br></pre></td></tr></table></figure>
<p>@Retention Ë°®Á§∫Âú®‰ªÄ‰πàÁ∫ßÂà´‰øùÂ≠òËØ•Ê≥®Ëß£‰ø°ÊÅØ„ÄÇÂèØÈÄâÁöÑ RetentionPolicy ÂèÇÊï∞ÂåÖÊã¨Ôºö<br>    RetentionPolicy.SOURCE Ê≥®Ëß£Â∞ÜË¢´ÁºñËØëÂô®‰∏¢ÂºÉ<br>    RetentionPolicy.CLASS Ê≥®Ëß£Âú®classÊñá‰ª∂‰∏≠ÂèØÁî®Ôºå‰ΩÜ‰ºöË¢´VM‰∏¢ÂºÉ<br>    RetentionPolicy.RUNTIME VMÂ∞ÜÂú®ËøêË°åÊúü‰πü‰øùÁïôÊ≥®ÈáäÔºåÂõ†Ê≠§ÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂ËØªÂèñÊ≥®Ëß£ÁöÑ‰ø°ÊÅØ„ÄÇ<br>@IntDefÂÜÖËæìÂÖ•ÂéüÊù•ÁöÑÊûö‰∏æÂèòÈáèÔºåÊúÄÂêé‰ΩøÁî®@interfaceÂ£∞ÊòéÊ≥®Ëß£ÂêçÁß∞„ÄÇÂΩìÈúÄË¶Å‰ΩøÁî®Êó∂Ôºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SamplingRate</span> <span class="keyword">int</span> rate = RATE_64HZ;</span><br></pre></td></tr></table></figure>
<p>ÁúüÊòØ‰∏çÊñπ‰æøÂïä„ÄÇ„ÄÇ„ÄÇ</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Âú®Android Things‰∏ä‰ΩøÁî®ËøúÁ®ãÂ±èÂπï</title>
    <url>/2017-11-25/%E5%9C%A8Android-Things%E4%B8%8A%E4%BD%BF%E7%94%A8%E8%BF%9C%E7%A8%8B%E5%B1%8F%E5%B9%95/</url>
    <content><![CDATA[<p>ÂΩìÂÆåÊàêËøûÊé•ÁöÑÈÖçÁΩÆÂêéÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáVysorÂú®ËøúÁ®ãÂ±èÂπï‰∏äÊòæÁ§∫ÂíåÊéßÂà∂Things Device„ÄÇ</p>
<a id="more"></a>

<p>  1.<a href="https://chrome.google.com/webstore/detail/vysor/gidgenkbbabolejbgbpnhbimgjbffefm?utm_source=chrome-app-launcher-info-dialog" target="_blank" rel="noopener">Vysor</a>ÊòØ‰∏ÄÊ¨æÂü∫‰∫éChromeÁöÑÊâ©Â±ïÁ®ãÂ∫èÔºå‰∏ãËΩΩÂêéÂú®Chorme‰∏≠ÂêØÁî®„ÄÇ<br>  2.‰ΩøÁî®adbËøûÊé•Âà∞Things<br>  3.ÂêØÂä®VysorÂπ∂ËøûÊé•ÔºåÁ¨¨‰∏ÄÊ¨°‰ΩøÁî®ÈúÄË¶ÅÂú®Things‰∏äÂÆâË£Öapk„ÄÇ<br>  4.Enjoy(ËøòÂèØ‰ª•Êà™ÂõæÂíåÂΩïÂÉèÂì¶ÔºÅ)</p>
<p>  <img src="/2017-11-25/%E5%9C%A8Android-Things%E4%B8%8A%E4%BD%BF%E7%94%A8%E8%BF%9C%E7%A8%8B%E5%B1%8F%E5%B9%95/screenshot-1511577772947.jpg" alt></p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Android Things</tag>
      </tags>
  </entry>
  <entry>
    <title>Âú®Raspberry Pi‰∏äÂàùËØïAndroid Things</title>
    <url>/2017-11-24/%E5%9C%A8Raspberry-Pi%E4%B8%8A%E5%88%9D%E8%AF%95Android-Things/</url>
    <content><![CDATA[<p>  GoogleÊé®Âá∫Android ThingsÈÉΩÂø´‰∏ÄÂπ¥‰∫ÜÔºåÁé∞Âú®ËøòÂú®previewÈò∂ÊÆµÔºåËÄå‰∏îÁé∞Âú®ÊîØÊåÅÁöÑÂπ≥Âè∞‰πüÂæàÂ∞ëÔºå‰ΩÜÊòØËøô‰∫õÈÉΩÊó†Ê≥ïÈòªÊå°Êàë‰ª¨ËØïÊ∞¥ÁöÑÁÉ≠ÊÉÖ‚Ä¶</p>
<a id="more"></a>

<h2 id="ÂáÜÂ§áÂ∑•‰Ωú"><a href="#ÂáÜÂ§áÂ∑•‰Ωú" class="headerlink" title="ÂáÜÂ§áÂ∑•‰Ωú"></a>ÂáÜÂ§áÂ∑•‰Ωú</h2><p>  1.Raspberry Pi 3<br>  2.HDMI cable and monitor(ÊçÆËØ¥ÊúâÁ±ª‰ºº‰∫éVNCÁöÑÂ∑•ÂÖ∑Ôºå‰ΩÜÊòØÊòæÁ§∫ÂàÜËæ®ÁéáÊúâÈóÆÈ¢ò)<br>  3.Ethernet cable(Á¨¨‰∏ÄÊ¨°ËøûÊé•ÈúÄË¶Å)<br>  4.Micro SD card</p>
<h2 id="ÁîüÊàêIMAGE"><a href="#ÁîüÊàêIMAGE" class="headerlink" title="ÁîüÊàêIMAGE"></a>ÁîüÊàêIMAGE</h2><p>  È¶ñÂÖàÂú®<a href="https://partner.android.com/things/console/" target="_blank" rel="noopener">Android Things Console</a>‰∏äÁîüÊàêImage„ÄÇÊñ∞Âª∫‰∏Ä‰∏™product,ËæìÂÖ•Product name,ÈÄâÊã©SOM Type„ÄÇ‰πãÂêéÂèØ‰ª•Ê∑ªÂä†BundleËá™ÂÆö‰πâÂºÄÊú∫Âä®ÁîªÁ≠âËÆæÁΩÆÔºå‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Empty bundle„ÄÇ‰πãÂêéÈÄâÊã©‰∏Ä‰∏™Android Things versions, Create build configurationÂêéÔºåÂèØ‰ª•ËøõË°åÂú®Á∫øÁöÑbuildÂíåImageÁîüÊàê(‰πãÂâçÊçÆËØ¥ÊúÄÂºÄÂßãÊú¨Âú∞buildÁî®ÊúçÂä°Âô®Á∫ßÁöÑËá≥Âº∫cpuÈÉΩË¶Åbuild 5‰∏™Â∞èÊó∂)Ôºå‰∏ãËΩΩÁîüÊàêÁöÑzip file„ÄÇ</p>
<h2 id="ÁÉßÂΩïImage"><a href="#ÁÉßÂΩïImage" class="headerlink" title="ÁÉßÂΩïImage"></a>ÁÉßÂΩïImage</h2><p>  Ëß£Âéã‰∏ãËΩΩÁöÑzip fileÔºåËß£ÂéãÂæóÂà∞‰ΩøÁî®ÁÉßÂΩïÂ∑•ÂÖ∑(ÊØîÂ¶ÇEtcher)Â∞Üiot_rpi3.imgÁÉßÂΩïËá≥SD card„ÄÇ</p>
<h2 id="ÂêØÂä®Âπ∂ËøûÊé•ËÆæÂ§á"><a href="#ÂêØÂä®Âπ∂ËøûÊé•ËÆæÂ§á" class="headerlink" title="ÂêØÂä®Âπ∂ËøûÊé•ËÆæÂ§á"></a>ÂêØÂä®Âπ∂ËøûÊé•ËÆæÂ§á</h2><p>  Êé•Â•ΩHDMIÂíåEthernetÔºåÊèíÂÖ•SD cardÂ∞±ÂèØ‰ª•ÂºÄÊú∫‰∫ÜÔºÅ</p>
<p>  <img src="/2017-11-24/%E5%9C%A8Raspberry-Pi%E4%B8%8A%E5%88%9D%E8%AF%95Android-Things/1.jpg" alt></p>
<p>  Êé•‰∏ãÊù•Êàë‰ª¨ÊµãËØï‰∏Ä‰∏ãEthernetÁöÑËøûÊé•ÊÄß„ÄÇÂ¶ÇÊûúËøûÊé•Ê≠£Â∏∏ÔºåÂ±èÂπï‰∏äÊòØ‰ºöÊòæÁ§∫ÂΩìÂâçÁöÑipÂú∞ÂùÄÁöÑ„ÄÇ‰ΩøÁî®adbÂ∞ùËØïËøûÊé•‰∏Ä‰∏ãÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adb connect 192.168.1.66</span><br></pre></td></tr></table></figure>
<p>ÂΩì‰Ω†ÁúãËßÅÂ¶Ç‰∏ãÂÜÖÂÆπÔºåË°®ÊòéadbËøûÊé•ÊàêÂäüÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">connected to 192.168.1.66:5555</span><br></pre></td></tr></table></figure>
<p>Âú®ËøûÊé•‰∏äadbÂêéÔºåÊàë‰ª¨ÂèØ‰ª•ËÆæÁΩÆÈÄöËøáwifiËøûÊé•‰ª•ÊëÜËÑ±ÁΩëÁ∫øÁöÑÊùüÁºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adb shell</span><br><span class="line">am startservice \</span><br><span class="line">    -n com.google.wifisetup/.WifiSetupService \</span><br><span class="line">    -a WifiSetupService.Connect \</span><br><span class="line">    -e ssid network_ssid \</span><br><span class="line">    -e passphrase network_pass \</span><br></pre></td></tr></table></figure>
<p>ÂÖ∂‰∏≠network_ssidÂ∞ùËØïËøûÊé•ÁöÑwifi ssidÔºånetwork_pass‰∏∫ÂØÜÁ†ÅÔºàÂºÄÊîæÁΩëÁªú‰∏≠ËØ•ÂèÇÊï∞ÂèØ‰ª•‰∏çÂ°´Ôºâ„ÄÇÁÑ∂ÂêéÊàë‰ª¨ÈúÄË¶ÅÈ™åËØÅ‰∏Ä‰∏ãÊó†Á∫øËøûÊé•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">logcat -d | grep Wifi</span><br></pre></td></tr></table></figure>
<p>ÂΩìÁúãËßÅWifiWatcher: Network state changed to CONNECTEDÊó∂ÔºåË°®ÊòéËøûÊé•ÊàêÂäü„ÄÇËøôÊó∂ÂèØ‰ª•Â∞ùËØïÊñ≠ÂºÄadb,ÊãîÊéâÁΩëÁ∫ø,‰ΩøÁî®adbËøûÊé•Êó†Á∫øip,ËøûÊé•ÊàêÂäüÂêéÂèØ‰ª•ping‰∏Ä‰∏ãÁôæÂ∫¶Ôºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping baidu.com</span><br></pre></td></tr></table></figure>
<p>Â¶ÇÊûúÊÉ≥Ê∏ÖÈô§ÊâÄÊúâ‰øùÂ≠òÁöÑwifiËøûÊé•ËÆæÁΩÆÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">am startservice \</span><br><span class="line">    -n com.google.wifisetup/.WifiSetupService \</span><br><span class="line">    -a WifiSetupService.Reset</span><br></pre></td></tr></table></figure>

<h2 id="UI-DEMO"><a href="#UI-DEMO" class="headerlink" title="UI DEMO"></a>UI DEMO</h2><p>  ËøôÈáå‰ª•ÂÆòÊñπÁöÑUI DEMO(om.example.androidthings.simpleui)‰∏∫‰æãÔºåË∑ë‰∏™Â∏¶UIÁöÑappËØï‰∏Ä‰∏ã„ÄÇ</p>
<h3 id="Á®ãÂ∫èÁªìÊûÑ"><a href="#Á®ãÂ∫èÁªìÊûÑ" class="headerlink" title="Á®ãÂ∫èÁªìÊûÑ"></a>Á®ãÂ∫èÁªìÊûÑ</h3><p>  ThingsÂ∑•Á®ãÁöÑÁªìÊûÑÂíåÊôÆÈÄöAndroid appÁªìÊûÑÂæàÁõ∏‰ººÔºåThingsÁöÑÊõ¥Âä†ÁÆÄÂçï„ÄÇËøòÊòØÁÜüÊÇâÁöÑAndroidManifest.xml + java + res„ÄÇ</p>
<p>  <img src="/2017-11-24/%E5%9C%A8Raspberry-Pi%E4%B8%8A%E5%88%9D%E8%AF%95Android-Things/2.png" alt></p>
<p>  Âú®Manifest‰∏≠Â£∞Êòé‰∏ªÈ¢ò„ÄÅÂÖ•Âè£Activity„ÄÅÊùÉÈôêÁ≠âÔºåÂú®layout‰∏≠ÔºåAndroidÂü∫Êú¨ÁöÑÊéß‰ª∂ÈÉΩÊúâ„ÄÇ„ÄÇ„ÄÇÊÄªËÄåË®Ä‰πãÔºåÂíåÊôÆÈÄöAndroidÂºÄÂèëÁõ∏‰ººÂ∫¶ÊûÅÈ´òÔºå‰ª•Ëá¥‰∫éÊàëÈÉΩ‰∏çÊÉ≥ÂÜô‰∏ãÂéª‰∫Ü„ÄÇ„ÄÇ„ÄÇ</p>
<h3 id="‰ª£Á†Å"><a href="#‰ª£Á†Å" class="headerlink" title="‰ª£Á†Å"></a>‰ª£Á†Å</h3><p>  Ë¥¥ÊÆµÂá†ÊÆµ‰ª£Á†ÅÔºåÂàÜÊûê‰∏ãÂÄºÂæóÊ≥®ÊÑèÁöÑÂú∞Êñπ„ÄÇÈ¶ñÂÖàimport‰∫ÜÂá†‰∏™Âú®AndroidÂºÄÂèë‰∏≠Ê≤°ËßÅËøáÁöÑÂåÖÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.android.things.pio.Gpio;</span><br><span class="line"><span class="keyword">import</span> com.google.android.things.pio.PeripheralManagerService;</span><br></pre></td></tr></table></figure>
<p>ÈùûÂ∏∏ÊòéÊòæÁöÑthingsÂåÖÔºåÊèê‰æõ‰∫ÜgpioÁ±ªÔºå‰ª•Âèä‰∏Ä‰∏™ÂæàÈáçË¶ÅÁöÑPeripheralManagerService. Êàë‰ª¨ÈÄöËøáPeripheralManagerÊù•Êìç‰ΩúÂ§ñËÆæ„ÄÇÊ†ëËéìÊ¥æ3ÁöÑgpio nameÂèØ‰ª•ÈÄöËøágetGpioListËé∑ÂæóÔºåË¶ÅÂØπÊüê‰∏™gpioËøõË°åÊéßÂà∂ÔºåÈúÄË¶ÅÂÖàopenGpio(init)ÔºåÁÑ∂ÂêéÂèØ‰ª•ÈÄöËøásetDirectionËÆæÁΩÆioÊñπÂêëÂèäÂàùÂßãÁîµÂπ≥ÔºåsetEdgeTriggerTypeËÆæÁΩÆËæπÁºòËß¶ÂèëÊ®°Âºè(‰∏≠Êñ≠)ÔºåsetActiveTypeËÆæÁΩÆÈ´òÁîµÂπ≥‰∏∫trueËøòÊòØ‰ΩéÁîµÂπ≥‰∏∫trueÔºåsetValueÊù•Êõ¥ÊîπÁîµÂπ≥„ÄÇÂΩìsetActiveType(Gpio.ACTIVE_LOW)Êó∂ÔºåsetValue(true)‰ºöËæìÂá∫‰ΩéÁîµÂπ≥ÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleUiActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = SimpleUiActivity<span class="class">.<span class="keyword">class</span>.<span class="title">getSimpleName</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Gpio&gt; mGpioMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        LinearLayout gpioPinsView = (LinearLayout) findViewById(R.id.gpio_pins);</span><br><span class="line">        LayoutInflater inflater = getLayoutInflater();</span><br><span class="line">        PeripheralManagerService pioService = <span class="keyword">new</span> PeripheralManagerService();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String name : pioService.getGpioList()) &#123;</span><br><span class="line">            View child = inflater.inflate(R.layout.list_item_gpio, gpioPinsView, <span class="keyword">false</span>);</span><br><span class="line">            Switch button = (Switch) child.findViewById(R.id.gpio_switch);</span><br><span class="line">            button.setText(name);</span><br><span class="line">            gpioPinsView.addView(button);</span><br><span class="line">            Log.d(TAG, <span class="string">"Added button for GPIO: "</span> + name);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">final</span> Gpio ledPin = pioService.openGpio(name);</span><br><span class="line">                ledPin.setEdgeTriggerType(Gpio.EDGE_NONE);</span><br><span class="line">                ledPin.setActiveType(Gpio.ACTIVE_HIGH);</span><br><span class="line">                ledPin.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);</span><br><span class="line"></span><br><span class="line">                button.setOnCheckedChangeListener(<span class="keyword">new</span> CompoundButton.OnCheckedChangeListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCheckedChanged</span><span class="params">(CompoundButton buttonView, <span class="keyword">boolean</span> isChecked)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            ledPin.setValue(isChecked);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            Log.e(TAG, <span class="string">"error toggling gpio:"</span>, e);</span><br><span class="line">                            buttonView.setOnCheckedChangeListener(<span class="keyword">null</span>);</span><br><span class="line">                            <span class="comment">// reset button to previous state.</span></span><br><span class="line">                            buttonView.setChecked(!isChecked);</span><br><span class="line">                            buttonView.setOnCheckedChangeListener(<span class="keyword">this</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                mGpioMap.put(name, ledPin);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                Log.e(TAG, <span class="string">"Error initializing GPIO: "</span> + name, e);</span><br><span class="line">                <span class="comment">// disable button</span></span><br><span class="line">                button.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Gpio&gt; entry : mGpioMap.entrySet()) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                entry.getValue().close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                Log.e(TAG, <span class="string">"Error closing GPIO "</span> + entry.getKey(), e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mGpioMap.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ËøêË°åÁªìÊûú"><a href="#ËøêË°åÁªìÊûú" class="headerlink" title="ËøêË°åÁªìÊûú"></a>ËøêË°åÁªìÊûú</h3><p>  <img src="/2017-11-24/%E5%9C%A8Raspberry-Pi%E4%B8%8A%E5%88%9D%E8%AF%95Android-Things/3.jpg" alt></p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Raspberry Pi</tag>
        <tag>Android Things</tag>
      </tags>
  </entry>
  <entry>
    <title>C# ÁîüÊàêLogÊñá‰ª∂</title>
    <url>/2017-11-16/CSharp-%E7%94%9F%E6%88%90Log%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>ÂÜô‰∫Ü‰∏™LogÁ±ªÂÆûÁé∞Â∏¶Êó∂Èó¥Êà≥ÁöÑLog out, ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<a id="more"></a>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">My_Space</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">using</span> System;</span><br><span class="line">    <span class="keyword">using</span> System.IO;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Log</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">string</span> logFile;</span><br><span class="line">        <span class="keyword">private</span> StreamWriter writer;</span><br><span class="line">        <span class="keyword">private</span> FileStream fileStream = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Log</span>(<span class="params"><span class="keyword">string</span> fileName</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            logFile = fileName;</span><br><span class="line">            CreateDirectory(logFile);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LogOut</span>(<span class="params"><span class="keyword">string</span> info</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                FileInfo fileInfo = <span class="keyword">new</span> FileInfo(logFile);</span><br><span class="line">                <span class="keyword">if</span> (!fileInfo.Exists)</span><br><span class="line">                &#123;</span><br><span class="line">                    fileStream = fileInfo.Create();</span><br><span class="line">                    writer = <span class="keyword">new</span> StreamWriter(fileStream);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    fileStream = fileInfo.Open(FileMode.Append, FileAccess.Write);</span><br><span class="line">                    writer = <span class="keyword">new</span> StreamWriter(fileStream);</span><br><span class="line">                &#125;</span><br><span class="line">                writer.WriteLine(<span class="string">"@"</span> + DateTime.Now + <span class="string">"#"</span> + info + <span class="string">";"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">finally</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (writer != <span class="literal">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    writer.Close();</span><br><span class="line">                    writer.Dispose();</span><br><span class="line">                    fileStream.Close();</span><br><span class="line">                    fileStream.Dispose();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateDirectory</span>(<span class="params"><span class="keyword">string</span> filePath</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            DirectoryInfo directoryInfo = Directory.GetParent(filePath);</span><br><span class="line">            <span class="keyword">if</span> (!directoryInfo.Exists)</span><br><span class="line">            &#123;</span><br><span class="line">                directoryInfo.Create();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ReadLog</span>(<span class="params"><span class="keyword">string</span> logPath, <span class="keyword">out</span> <span class="keyword">string</span> dataRead</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            StreamReader sR1 = <span class="keyword">new</span> StreamReader(logPath);</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                dataRead = sR1.ReadToEnd();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C Sharp</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ΩøÁî®qemuËøêË°åLinux-kernel</title>
    <url>/2017-11-12/%E4%BD%BF%E7%94%A8qemu%E8%BF%90%E8%A1%8CLinux-kernel/</url>
    <content><![CDATA[<p>‰πãÂâçÊÉ≥‰π∞ÂùóMTKÁöÑÂºÄÂèëÊùøÔºåÁªìÊûúÊ†πÊú¨Ê≤°ÊúâÂçñ„ÄÇ„ÄÇ„ÄÇ Ê†ëËéìÊ¥æ‰ªäÂπ¥Âèà‰∏ç‰ºöÂá∫4Ôºå‰∫éÊòØÊÉ≥Áî®qemuËæπÂ≠¶ËæπÁé©„ÄÇ</p>
<a id="more"></a>
<p>ÂÆø‰∏ªOSÔºöUbuntu 17.04</p>
<h2 id="ÂáÜÂ§áÂ∑•‰Ωú"><a href="#ÂáÜÂ§áÂ∑•‰Ωú" class="headerlink" title="ÂáÜÂ§áÂ∑•‰Ωú"></a>ÂáÜÂ§áÂ∑•‰Ωú</h2><p>Áî±‰∫éÊüê‰∫õ‰ºóÊâÄÂë®Áü•ÁöÑÂéüÂõ†ÔºåËÆøÈóÆ‰∏Ä‰∫õÂõΩÂ§ñÁöÑÊúçÂä°Âô®ÈùûÂ∏∏ÊÖ¢ÔºåÂõ†Ê≠§Êé®Ëçê‰ΩøÁî®ÂõΩÂÜÖÁöÑÈïúÂÉèÔºåÊàëËøôÈáåÁî®ÁöÑÊòØÈòøÈáåÁöÑÔºö<br><img src="/2017-11-12/%E4%BD%BF%E7%94%A8qemu%E8%BF%90%E8%A1%8CLinux-kernel/a.png" alt><br>Êç¢ÂÆåÊõ¥Êñ∞Ê∫êÂêéÔºå‰∏™‰∫∫‰π†ÊÉØË£Ö‰∏Ä‰∏™vimÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install vim</span><br></pre></td></tr></table></figure>
<h2 id="ÂÆâË£Öarm‰∫§ÂèâÁºñËØëÈìæ"><a href="#ÂÆâË£Öarm‰∫§ÂèâÁºñËØëÈìæ" class="headerlink" title="ÂÆâË£Öarm‰∫§ÂèâÁºñËØëÈìæ"></a>ÂÆâË£Öarm‰∫§ÂèâÁºñËØëÈìæ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install gcc-arm-linux-gnueabi</span><br></pre></td></tr></table></figure>
<p>‰πüÂèØ‰ª•Ë£Ö‰∏Ä‰∏™arm-linux-gnueabihfÔºåÂ¶ÇÊûúÁ°¨‰ª∂Â∏¶fpuÔºåÂèØ‰ª•‰ΩøÁî®ËØ•Â∑•ÂÖ∑„ÄÇ</p>
<h2 id="ÂÆâË£Öqemu"><a href="#ÂÆâË£Öqemu" class="headerlink" title="ÂÆâË£Öqemu"></a>ÂÆâË£Öqemu</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install qemu</span><br></pre></td></tr></table></figure>
<h2 id="‰∏ãËΩΩLinux-kernalÂπ∂ÁºñËØë"><a href="#‰∏ãËΩΩLinux-kernalÂπ∂ÁºñËØë" class="headerlink" title="‰∏ãËΩΩLinux kernalÂπ∂ÁºñËØë"></a>‰∏ãËΩΩLinux kernalÂπ∂ÁºñËØë</h2><p>‰ªé<a href="https://www.kernel.org/" target="_blank" rel="noopener">kernel.org</a>‰∏ãËΩΩÊ∫êÁ†ÅÂåÖ„ÄÇ‰∏ãËΩΩÂÆåÊàêÂêéËß£ÂåÖÂà∞‰ªªÊÑèÁõÆÂΩï„ÄÇcdËøáÂéªÂêéÔºå‰ΩøÁî®vimÊñ∞Âª∫‰∏Ä‰∏™buildËÑöÊú¨build.sh,ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span>  ARCH=arm </span><br><span class="line"><span class="built_in">export</span> CROSS_COMPILE=arm-linux-gnueabi- </span><br><span class="line">make vexpress_defconfig</span><br><span class="line">make zImage -j8</span><br><span class="line">make modules -j8</span><br><span class="line">make dtbs</span><br><span class="line">mkdir extra_folder</span><br><span class="line">cp arch/arm/boot/zImage extra_folder/</span><br><span class="line">cp arch/arm/boot/dts/*ca9.dtb extra_folder/</span><br><span class="line">cp .config extra_folder/</span><br></pre></td></tr></table></figure>
<p>ËøêË°åËÑöÊú¨‰ºö‰ΩøÁî®arm-linux-gnueabiËøõË°åÁºñËØëÔºåÂπ∂ÊääÁîüÊàêÁöÑzImageÂíådtbÊñá‰ª∂copyÂà∞extra_folderÔºà‰∏çÁÑ∂ÁöÑËØùÊØèÊ¨°ÈÉΩÊâãÂä®copyÂ•ΩÁ¥Ø„ÄÇ„ÄÇÔºâ</p>
<h2 id="‰∏ãËΩΩbusybox"><a href="#‰∏ãËΩΩbusybox" class="headerlink" title="‰∏ãËΩΩbusybox"></a>‰∏ãËΩΩbusybox</h2><p>busyboxËÉΩÂ§üÊèê‰æõ‰∏Ä‰∫õÂü∫Êú¨ÁöÑÊåá‰ª§ÔºåÂ¶Çumount,sh,viÁ≠âÁ≠â„ÄÇÂú®<a href="https://busybox.net/" target="_blank" rel="noopener">busybox.net</a>‰∏ãËΩΩÊ∫ê‰ª£Á†ÅÂåÖÔºåÂΩìÁÑ∂‰ΩøÁî®wgetÊàñËÄÖgit clone‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇËß£ÂåÖÂêéÔºåcdÂà∞‰ª£Á†ÅÁõÆÂΩïÔºåÂÜçÂÜô‰∏Ä‰∏™build.shÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make defconfig</span><br><span class="line">make CROSS_COMPILE=arm-linux-gnueabi-</span><br><span class="line">make install CROSS_COMPILE=arm-linux-gnueabi-</span><br></pre></td></tr></table></figure>
<p>ËøêË°åËÑöÊú¨Â∞ÜÂú®ËØ•ÁõÆÂΩï‰∏ãÁîüÊàê‰∏Ä‰∏™_installÊñá‰ª∂Â§π„ÄÇ</p>
<h2 id="Âà∂‰ΩúÊ†πÊñá‰ª∂Á≥ªÁªüÂíåÈïúÂÉè"><a href="#Âà∂‰ΩúÊ†πÊñá‰ª∂Á≥ªÁªüÂíåÈïúÂÉè" class="headerlink" title="Âà∂‰ΩúÊ†πÊñá‰ª∂Á≥ªÁªüÂíåÈïúÂÉè"></a>Âà∂‰ΩúÊ†πÊñá‰ª∂Á≥ªÁªüÂíåÈïúÂÉè</h2><h3 id="ÂàõÂª∫rootfs"><a href="#ÂàõÂª∫rootfs" class="headerlink" title="ÂàõÂª∫rootfs"></a>ÂàõÂª∫rootfs</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir rootfs</span><br><span class="line">sudo mkdir rootfs/lib</span><br></pre></td></tr></table></figure>
<h3 id="Â§çÂà∂busyboxÂëΩ‰ª§"><a href="#Â§çÂà∂busyboxÂëΩ‰ª§" class="headerlink" title="Â§çÂà∂busyboxÂëΩ‰ª§"></a>Â§çÂà∂busyboxÂëΩ‰ª§</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp _install/* -r rootfs/</span><br></pre></td></tr></table></figure>
<h3 id="Â§çÂà∂ËøêË°åÂ∫ì"><a href="#Â§çÂà∂ËøêË°åÂ∫ì" class="headerlink" title="Â§çÂà∂ËøêË°åÂ∫ì"></a>Â§çÂà∂ËøêË°åÂ∫ì</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp -P /usr/arm-linux-gnueabi/lib/* rootfs/lib/</span><br></pre></td></tr></table></figure>
<h3 id="ÂàõÂª∫Â≠óÁ¨¶ËÆæÂ§áÁî®‰∫éÊµãËØï"><a href="#ÂàõÂª∫Â≠óÁ¨¶ËÆæÂ§áÁî®‰∫éÊµãËØï" class="headerlink" title="ÂàõÂª∫Â≠óÁ¨¶ËÆæÂ§áÁî®‰∫éÊµãËØï"></a>ÂàõÂª∫Â≠óÁ¨¶ËÆæÂ§áÁî®‰∫éÊµãËØï</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p rootfs/dev</span><br><span class="line">sudo mknod rootfs/dev/tty1 c 4 1</span><br><span class="line">sudo mknod rootfs/dev/tty2 c 4 2</span><br><span class="line">sudo mknod rootfs/dev/tty2 c 4 3</span><br><span class="line">sudo mknod rootfs/dev/tty2 c 4 4</span><br></pre></td></tr></table></figure>
<p>cÔºöÂ≠óÁ¨¶Âûã<br>4Ôºö‰∏ªËÆæÂ§áÂè∑<br>1Ôºå2ÔºöÊ¨°ËÆæÂ§áÂè∑</p>
<h3 id="ÁîüÊàêÈïúÂÉèÂπ∂Ê†ºÂºèÂåñÁîüÊàêext3Êñá‰ª∂Á≥ªÁªü"><a href="#ÁîüÊàêÈïúÂÉèÂπ∂Ê†ºÂºèÂåñÁîüÊàêext3Êñá‰ª∂Á≥ªÁªü" class="headerlink" title="ÁîüÊàêÈïúÂÉèÂπ∂Ê†ºÂºèÂåñÁîüÊàêext3Êñá‰ª∂Á≥ªÁªü"></a>ÁîüÊàêÈïúÂÉèÂπ∂Ê†ºÂºèÂåñÁîüÊàêext3Êñá‰ª∂Á≥ªÁªü</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=a9rootfs.ext3 bs=1M count=32</span><br><span class="line">mkfs.ext3 a9rootfs.ext3</span><br></pre></td></tr></table></figure>
<h3 id="Â§çÂà∂Êñá‰ª∂Âà∞ÈïúÂÉè‰∏≠"><a href="#Â§çÂà∂Êñá‰ª∂Âà∞ÈïúÂÉè‰∏≠" class="headerlink" title="Â§çÂà∂Êñá‰ª∂Âà∞ÈïúÂÉè‰∏≠"></a>Â§çÂà∂Êñá‰ª∂Âà∞ÈïúÂÉè‰∏≠</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir tmpfs</span><br><span class="line">sudo mount -t ext3 a9rootfs.ext3 tmpfs/ -o loop</span><br><span class="line">sudo cp -r rootfs/*  tmpfs/</span><br><span class="line">sudo umount tmpfs</span><br></pre></td></tr></table></figure>
<h2 id="ÂêØÂä®qemuÂπ∂ËøêË°åÁ≥ªÁªü"><a href="#ÂêØÂä®qemuÂπ∂ËøêË°åÁ≥ªÁªü" class="headerlink" title="ÂêØÂä®qemuÂπ∂ËøêË°åÁ≥ªÁªü"></a>ÂêØÂä®qemuÂπ∂ËøêË°åÁ≥ªÁªü</h2><p>ÂÜô‰∏Ä‰∏™runOS.shÂπ∂ËøêË°åÔºö</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qemu-system-arm -M vexpress-a9 -m 256M -dtb extra_folder/vexpress-v2p-ca9.dtb -kernel extra_folder/zImage -append <span class="string">"root=/dev/mmcblk0 rw"</span> -sd a9rootfs.ext3</span><br></pre></td></tr></table></figure>
<p><img src="/2017-11-12/%E4%BD%BF%E7%94%A8qemu%E8%BF%90%E8%A1%8CLinux-kernel/b.png" alt><br>ÁÑ∂ÂêéÁÜüÊÇâÁöÑ‰ºÅÈπÖÂá∫Áé∞‰∫Ü!<br><img src="/2017-11-12/%E4%BD%BF%E7%94%A8qemu%E8%BF%90%E8%A1%8CLinux-kernel/c.png" alt><br>Êã∑‰∏™hello worldËØï‰∏Ä‰∏ã:<br><img src="/2017-11-12/%E4%BD%BF%E7%94%A8qemu%E8%BF%90%E8%A1%8CLinux-kernel/d.png" alt></p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>AndroidÊ∑ªÂä†AppËΩΩÂÖ•ÁïåÈù¢</title>
    <url>/2017-11-09/Android%E6%B7%BB%E5%8A%A0App%E8%BD%BD%E5%85%A5%E7%95%8C%E9%9D%A2/</url>
    <content><![CDATA[<p>ÂΩìAppÂêØÂä®ËΩΩÂÖ•Êó∂Èó¥ËæÉÈïøÊó∂ÔºåÊàë‰ª¨Â∏åÊúõÊúâ‰∏Ä‰∏™ËΩΩÂÖ•ÁïåÈù¢ËøáÊ∏°ÔºåÂΩìËΩΩÂÖ•ÂÆåÊàêÂêéÂÜçÂàáÊç¢Âà∞MainActivity„ÄÇËøô‰∏™ËΩΩÂÖ•ÁïåÈù¢Êàë‰ª¨Áß∞‰πã‰∏∫SplashActivity„ÄÇ</p>
<a id="more"></a>
<p>È¶ñÂÖàÂÜô‰∏Ä‰∏™ÁªßÊâøAppCompatActivityÁöÑSplashActivityÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SplashActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span></span>&#123;</span><br><span class="line">		<span class="keyword">final</span> <span class="keyword">int</span> SplashTime = <span class="number">3200</span>;<span class="comment">// ÊúüÊúõÁöÑSplashÊó∂Èó¥</span></span><br><span class="line">		WebView wbGif;<span class="comment">// Âú®ËøôÈáåÊàë‰ΩøÁî®WebviewÊù•Âä†ËΩΩ‰∏Ä‰∏™GIFÂä®Áîª</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÁÑ∂ÂêéOverride onCreateÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_splash);</span><br><span class="line">        wbGif = (WebView) findViewById(R.id.webViewGif);<span class="comment">// Âú®ËøôÈáåÊàë‰ΩøÁî®WebviewÊù•Âä†ËΩΩ‰∏Ä‰∏™GIFÂä®Áîª</span></span><br><span class="line">        wbGif.setBackgroundColor(Color.parseColor(<span class="string">"#6a0606"</span>));</span><br><span class="line">        wbGif.loadUrl(<span class="string">"file:///android_res/drawable/loading.gif"</span>);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>Âú®ËØ•onCreateÊñπÊ≥ï‰∏≠ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑHandlerÂØπË±°ÔºåÂÆÉÂ∞ÜÂú®SplashTimeÁªìÊùüÂêéÂàáÊç¢Âà∞MainActivityÔºö</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> android.os.Handler().postDelayed(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Intent main = <span class="keyword">new</span> Intent(SplashActivity.<span class="keyword">this</span>, MainActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        SplashActivity.<span class="keyword">this</span>.startActivity(main);</span><br><span class="line">        SplashActivity.<span class="keyword">this</span>.finish();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, SplashTime);</span><br></pre></td></tr></table></figure>
<p>ÊúÄÂêéÂà´Âøò‰∫ÜÂú®AndroidManifest.xml‰∏≠Â∞ÜÂÖ•Âè£ActivityËÆæÁΩÆ‰∏∫SplashActivityÔºö</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".SplashActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">"portrait"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>C#Ëá™ÂÆö‰πâExcelÂØºÂá∫Á±ª</title>
    <url>/2017-11-08/CSharp%E8%87%AA%E5%AE%9A%E4%B9%89Excel%E5%AF%BC%E5%87%BA%E7%B1%BB/</url>
    <content><![CDATA[<p>ÂâçÊÆµÊó∂Èó¥ÂÜô‰∫Ü‰∏™debug toolÁî®Êù•Ëá™Âä®ÊäìÊµãËØïÊï∞ÊçÆÔºåËØ•Â∑•ÂÖ∑ÈúÄË¶ÅÈÄöËøáÁà¨ÂèñLogÊï∞ÊçÆËá™Âä®ÁîüÊàêÂ∏¶ChartÁöÑExcelÔºå‰ΩÜÊòØÂéüÁîüÁöÑCOMÁªÑ‰ª∂ÈùûÂ∏∏‰∏çÂ•ΩÁî®Ôºå‰∫éÊòØÊàëÈáçÊñ∞Â∞ÅË£Ö‰∫Ü‰∏Ä‰∏™„ÄÇ</p>
<a id="more"></a>
<p>Reference: Microsoft Excel 15.0 Object Library(COMÁªÑ‰ª∂)</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.Office.Interop.Excel;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Reflection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">My_Space</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">ExportExcel</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">string</span> xlsOutPath;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">string</span> xlsInPath;</span><br><span class="line">        <span class="keyword">private</span> Application xlsApp;</span><br><span class="line">        <span class="keyword">private</span> Workbook xlsWorkBook;</span><br><span class="line">        <span class="keyword">private</span> Worksheet xlsWorkSheet;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">object</span> misValue = Missing.Value;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ExportExcel</span>(<span class="params"><span class="keyword">string</span> excelOutPath</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            xlsOutPath = excelOutPath;</span><br><span class="line">            xlsInPath = <span class="literal">null</span>;</span><br><span class="line">            xlsApp = <span class="keyword">new</span> Application();</span><br><span class="line">            <span class="keyword">if</span> (xlsApp == <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Please Install Excel 2013 or Newer Verison"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            XlsWorkBook = xlsApp.Workbooks.Add(misValue);</span><br><span class="line">            xlsWorkSheet = XlsWorkBook.Worksheets.get_Item(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ExportExcel</span>(<span class="params"><span class="keyword">string</span> excelInPath, <span class="keyword">string</span> excelOutPath</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            xlsInPath = excelInPath;</span><br><span class="line">            xlsOutPath = excelOutPath;</span><br><span class="line">            xlsApp = <span class="keyword">new</span> Application();</span><br><span class="line">            <span class="keyword">if</span> (xlsApp == <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Please Install Excel 2013 or Newer Verison"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            XlsWorkBook = xlsApp.Workbooks.Add(xlsInPath);</span><br><span class="line">            xlsWorkSheet = XlsWorkBook.Worksheets.get_Item(xlsWorkBook.Worksheets.Count);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Worksheet XlsWorkSheet &#123; <span class="keyword">get</span> =&gt; xlsWorkSheet; <span class="keyword">set</span> =&gt; xlsWorkSheet = <span class="keyword">value</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> Workbook XlsWorkBook &#123; <span class="keyword">get</span> =&gt; xlsWorkBook; <span class="keyword">set</span> =&gt; xlsWorkBook = <span class="keyword">value</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AddChart</span>(<span class="params">Worksheet worksheet, <span class="keyword">double</span> left, <span class="keyword">double</span> top, <span class="keyword">double</span> weight, <span class="keyword">double</span> height, <span class="keyword">string</span> dataStart, <span class="keyword">string</span> dataEnd</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            ChartObjects xlsCharts = worksheet.ChartObjects(Type.Missing);</span><br><span class="line">            ChartObject myChart = xlsCharts.Add(left, top, weight, height);</span><br><span class="line">            Range chartRange = worksheet.get_Range(dataStart, dataEnd);</span><br><span class="line">            myChart.Chart.SetSourceData(chartRange, misValue);</span><br><span class="line">            myChart.Chart.ChartType = XlChartType.xlXYScatterSmooth;</span><br><span class="line">            myChart.Chart.ChartStyle = <span class="number">245</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AddSheet</span>(<span class="params"><span class="keyword">string</span> name</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">bool</span> exist = <span class="literal">false</span>;<span class="keyword">int</span> i;</span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= XlsWorkBook.Sheets.Count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (XlsWorkBook.Sheets[i].Name == name)</span><br><span class="line">                &#123;</span><br><span class="line">                    exist = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!exist)</span><br><span class="line">            &#123;</span><br><span class="line">                xlsWorkSheet = XlsWorkBook.Sheets.Add(misValue, xlsWorkSheet, misValue, misValue);</span><br><span class="line">                xlsWorkSheet.Name = name;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                xlsWorkSheet = XlsWorkBook.Sheets[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CopySheet</span>(<span class="params">Worksheet src,Worksheet dst</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            src.Cells.Copy(Type.Missing);</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                dst.Paste(Type.Missing, Type.Missing);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AddHyperLink</span>(<span class="params"><span class="keyword">string</span> cellName, <span class="keyword">string</span> link</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Range range = xlsWorkSheet.get_Range(cellName,Type.Missing);</span><br><span class="line">            xlsWorkSheet.Hyperlinks.Add(range, link);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SaveExcel</span>(<span class="params"><span class="keyword">bool</span> flag</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag)</span><br><span class="line">            &#123;</span><br><span class="line">                xlsWorkBook.Close(<span class="literal">true</span>, xlsOutPath, misValue);</span><br><span class="line">            &#125;</span><br><span class="line">            System.Runtime.InteropServices.Marshal.ReleaseComObject(xlsWorkSheet);</span><br><span class="line">            System.Runtime.InteropServices.Marshal.ReleaseComObject(xlsWorkBook);</span><br><span class="line">            System.Runtime.InteropServices.Marshal.ReleaseComObject(xlsApp);</span><br><span class="line">            xlsWorkSheet = <span class="literal">null</span>;</span><br><span class="line">            xlsWorkBook = <span class="literal">null</span>;</span><br><span class="line">            xlsApp = <span class="literal">null</span>;</span><br><span class="line">            GC.Collect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C Sharp</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂÖ≥Èó≠Á®ãÂ∫èÁ™óÂè£Âêé‰ªçÊúâÁ∫øÁ®ãÊÆãÁïôÁöÑËß£ÂÜ≥ÂäûÊ≥ï</title>
    <url>/2017-11-07/%E5%85%B3%E9%97%AD%E7%A8%8B%E5%BA%8F%E7%AA%97%E5%8F%A3%E5%90%8E%E4%BB%8D%E6%9C%89%E7%BA%BF%E7%A8%8B%E6%AE%8B%E7%95%99%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<p>ÊàëÂéüÊù•‰∏ÄÁõ¥ÂñúÊ¨¢Áî®backgroundworkerÊêûÂ§öÁ∫øÁ®ãÔºåÂèçËÄåÊòØThreadÁ±ª‰ΩøÁî®ËæÉÂ∞ë„ÄÇÊúÄËøëÊõ¥Êñ∞debug toolÁöÑÊó∂ÂÄô‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÂêå‰∫ãÁöÑ‰ª£Á†ÅÔºåÈÅáÂà∞‰∫ÜÁ∫øÁ®ãÊ≥ÑÊºèÁöÑÈóÆÈ¢ò„ÄÇ</p>
<a id="more"></a>
<p>Âêå‰∫ãÁöÑ‰ª£Á†Å‰∏≠‰ΩøÁî®‰∫ÜThreadÁ±ªËÄå‰∏îÂÜÖÈÉ®ÊòØ‰∏Ä‰∏™while(true)ÁöÑÊ≠ªÂæ™ÁéØ„ÄÇËøôÂØºËá¥Èô§‰∫Üthread.Abort()Â§ñ‰ºº‰πéÊ≤°ÊúâÂÖ∂‰ªñÁªàÊ≠¢Á∫øÁ®ãÁöÑÊñπÊ≥ï„ÄÇ„ÄÇ„ÄÇ<br>‰ΩÜÊòØthread.Abort()‰∏ç‰∏ÄÂÆöËÉΩÂ§üÁõ¥Êé•ÊùÄÊ≠ªÁ∫øÁ®ãÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂç≥‰ΩøÂú®formclosing‰∏≠Ë∞ÉÁî®‰∫Üthread.Abort()ÔºåÂÖ≥Èó≠Á®ãÂ∫èÁ™óÂè£Âêé‰ªçÁÑ∂ÊúâÁ∫øÁ®ãÊÆãÁïô„ÄÇ<br>Â¶ÇÊûú‰∏çÊÉ≥‰øÆÊîπÂéüÊù•ÁöÑthreadÊñπÊ≥ïÔºåÂèØ‰ª•ÈÄöËøá</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line">Application.Exit();</span><br></pre></td></tr></table></figure>
<p>Êù•ÈÄÄÂá∫Â∫îÁî®Á®ãÂ∫è„ÄÇ‰ΩÜÊòØÊ≠§ÊñπÊ≥ïÂπ∂‰∏ç‰ºöÂØπÂêéÂè∞Á∫øÁ®ãÂíåËµÑÊ∫êËøõË°åÂº∫Âà∂ÂõûÊî∂„ÄÇ‰∫éÊòØÁî®‰∫Ü‰∏ãÈù¢ËøôÁßçÊõ¥Á≤óÊö¥ÁöÑÊñπÊ≥ïÔºö</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line">Environment.Exit(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>ÈóÆÈ¢òËß£ÂÜ≥„ÄÇ‰∏çËøáËøôÊ¨°ÁöÑÁªèÂéÜÂÜçÊ¨°ÊèêÈÜí‰∫ÜÊàëÔºåÊúÄÂ•ΩÂà´Âú®Thread‰∏≠ÂÜôwhile(true)Ôºå‰πü‰∏çË¶Å‰ΩøÁî®thread.Abort()ËøôÁßç‰∏çÂÆâÂÖ®ÁöÑÊñπÊ≥ï„ÄÇ<br>Â¶ÇÊûúÂÆûÂú®ÊãÖÂøÉÂá∫Áé∞ÈáéÁ∫øÁ®ãÔºåËøòÊòØ‰ΩøÁî®backgroundworkerÂêß„ÄÇ</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>Â§öÁ∫øÁ®ã</tag>
        <tag>C Sharp</tag>
      </tags>
  </entry>
  <entry>
    <title>È°πÁõÆÊÄªÁªìÔºà‰∏ÄÔºâÔºöÂπ≥Ë°°ËΩ¶ÁöÑËÆæËÆ°Ê¶ÇËø∞</title>
    <url>/2017-11-05/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B9%B3%E8%A1%A1%E8%BD%A6%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0/</url>
    <content><![CDATA[<p>ÂÜôÁØápostÊÄªÁªì‰∏Ä‰∏ãÂΩìÂπ¥ÂÅöÂπ≥Ë°°ËΩ¶ÁöÑ‰∏Ä‰∫õÁªèÈ™å„ÄÇËøôÁØápostÊòØÊ¶ÇËø∞ÊÄßË¥®ÁöÑÔºåËØ¶ÁªÜÁöÑËΩØÁ°¨‰ª∂ËÆæËÆ°‰ª•ÂêéÊúâÊó∂Èó¥ÂÜçÂÜôÂêß„ÄÇ</p>
<a id="more"></a>

<h2 id="ÂÜôÂú®ÂâçÈù¢"><a href="#ÂÜôÂú®ÂâçÈù¢" class="headerlink" title="ÂÜôÂú®ÂâçÈù¢"></a>ÂÜôÂú®ÂâçÈù¢</h2><p>ÂÖ∂ÂÆûÂ§ß‰∫åÂ§ß‰∏âÁöÑÊó∂ÂÄôÈÉΩÊúâÂèÇÂä†Êô∫ËÉΩËΩ¶Á´ûËµõ(ÂéüÊù•Âè´È£ûÊÄùÂç°Â∞îÊô∫ËÉΩËΩ¶Á´ûËµõÔºåÁÆÄÁß∞È£ûËµõÔºåÂêéÊù•È£ûÊÄùÂç°Â∞îË¢´nxpÊî∂Ë¥≠ÔºåÊîπÂêçÊÅ©Êô∫Êµ¶Êô∫ËÉΩËΩ¶Á´ûËµõ..)Ôºå‰ΩÜÊòØÂ≠¶Èô¢Êúâ‰∏™ÊîøÁ≠ñÔºå‰∏çÂÖÅËÆ∏Âêå‰∏ÄÂπ¥Êó¢ÂèÇÂä†ÁîµÂ≠êËÆæËÆ°Á´ûËµõÔºàÁÆÄÁß∞ÁîµËµõÔºâÂèàÂèÇÂä†È£ûËµõÔºåÁêÜÁî±ÊòØË¶ÅËÆ©Êõ¥Â§öÁöÑÂêåÂ≠¶ÊúâÊú∫‰ºöÂèÇÂä†Âà∞ÊØîËµõ‰∏≠ÔºàËá≥Â∞ëËÄÅÂ∏àÊòØËøô‰πàÂëäËØâÊàë‰ª¨ÁöÑÔºâÔºå‰∫éÊòØÂ§ß‰∫åÈÇ£‰∏ÄÂπ¥ÂÅöÊô∫ËÉΩËΩ¶ÂÅöÂà∞‰∏ÄÂçäÂ∞±ÂºÉÊùÉÂèÇÂä†ÁîµËµõÂéª‰∫Ü„ÄÇ‰∏çËøáÂêéÊù•ÊàëÂíåÊàëÁöÑÂ∞è‰ºô‰º¥‰ª¨ÂèëÁé∞ÔºåÂ±ÖÁÑ∂Êúâ‰∫õÂêåÂ≠¶‰∏§‰∏™ÊØîËµõÈÉΩÂèÇÂä†‰∫ÜÔºåËøôTMÂ∞±ÂæàÂ∞¥Â∞¨‰∫Ü„ÄÇ„ÄÇ</p>
<h2 id="Á°¨‰ª∂Âü∫Êú¨Êû∂ÊûÑ"><a href="#Á°¨‰ª∂Âü∫Êú¨Êû∂ÊûÑ" class="headerlink" title="Á°¨‰ª∂Âü∫Êú¨Êû∂ÊûÑ"></a>Á°¨‰ª∂Âü∫Êú¨Êû∂ÊûÑ</h2><p>Ê¶ÇÊã¨Êù•ËÆ≤ÔºåÈúÄË¶ÅÂÖ≥ÂøÉÁöÑÊòØ‰∏â‰∏™ÈÉ®‰ªΩ:</p>
<h3 id="1-ÁîµÊ∫ê"><a href="#1-ÁîµÊ∫ê" class="headerlink" title="1.ÁîµÊ∫ê"></a>1.ÁîµÊ∫ê</h3><p>È¶ñÂÖàÁ®≥ÂéãÁîµË∑ØÊòØ‰∏ÄÂÆö‰ºöÊúâÁöÑÔºåÊàë‰ª¨ÈÄâÁî®‰∫ÜLM1117ÔºåÂ§ñÂõ¥ÁîµË∑ØÁÆÄÂçïÔºå‰ΩøÁî®ÂçÅÂàÜÊñπ‰æøÔºåÂèØÊõø‰ª£ÁöÑLDO‰πü‰∏çÂ∞ë„ÄÇÂè¶Â§ñÂ¶ÇÊûú‰ΩøÁî®MOSÁÆ°Ëá™Â∑±Êê≠HÊ°•ÔºåÂ∞±ÈúÄË¶ÅboostÁîµË∑Ø‰∫Ü„ÄÇ</p>
<h3 id="2-‰∏ªÊéßÈÉ®ÂàÜ"><a href="#2-‰∏ªÊéßÈÉ®ÂàÜ" class="headerlink" title="2.‰∏ªÊéßÈÉ®ÂàÜ"></a>2.‰∏ªÊéßÈÉ®ÂàÜ</h3><p>Ëøô‰∏™ÈÉ®ÂàÜÂåÖÊã¨MCUÊúÄÂ∞èÁ≥ªÁªü‰ª•ÂèäÂêÑÁßç‰º†ÊÑüÂô®„ÄÇÂØπ‰∫éÂπ≥Ë°°ËΩ¶ËÄåË®ÄÔºåÈôÄËû∫‰ª™„ÄÅËßíÂ∫¶‰º†ÊÑüÂô®ÂíåÁºñÁ†ÅÂô®„ÄÅÂõæÂÉè‰º†ÊÑüÂô®ÈÉΩÁÆóÊòØÊ†∏ÂøÉ‰º†ÊÑüÂô®Ôºå‰∏Ä‰∏™Áî®‰∫éËé∑ÂèñËßíÂä†ÈÄüÂ∫¶Ôºå‰∏Ä‰∏™Ëé∑ÂèñÂΩìÂâçËßíÂ∫¶Ôºå‰∏Ä‰∏™Ëé∑ÂèñÁîµÊú∫ËΩ¨ÈÄüÔºåÊúÄÂêé‰∏Ä‰∏™ÂΩìÁÑ∂ÊòØËØÜÂà´ËµõÈÅìÂï¶„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÊàë‰ª¨Ëøò‰ΩøÁî®‰∫ÜËìùÁâôÊ®°ÂùóÔºåËá™Â∑±ÂÜô‰∫Ü‰∏™‰∏ä‰ΩçÊú∫ÔºåÊó†Á∫øË∞ÉËΩ¶„ÄÅÂÆûÊó∂Âõæ‰º†ÁÆÄÁõ¥‰∏çËÉΩÂÜçÁàΩ„ÄÇ</p>
<h3 id="3-È©±Âä®Ê°•ÔºàHÊ°•Ôºâ"><a href="#3-È©±Âä®Ê°•ÔºàHÊ°•Ôºâ" class="headerlink" title="3.È©±Âä®Ê°•ÔºàHÊ°•Ôºâ"></a>3.È©±Âä®Ê°•ÔºàHÊ°•Ôºâ</h3><p>Âπ≥Ë°°ËΩ¶ÊòØÊúâ‰∏§‰∏™ÁîµÊú∫ÁöÑÔºåËÄå‰∏î‰∏§‰∏™ÁîµÊú∫ÈÉΩË¶ÅÊ±ÇËÉΩÂ§üÊ≠£ÂèçËΩ¨ÔºåÂõ†Ê≠§ÈúÄË¶Å‰∏§‰∏™ÂÖ®Ê°•ÔºåÈúÄË¶Å4ÁâáBTS7970ÊàñËÄÖ8Áâámos„ÄÇÂ§ß‰∫åÂõæÊñπ‰æøÔºå‰ΩøÁî®ÁöÑÊòØBTS7970ÔºåÊ∑òÂÆù‰∏ä‰∏ÄÁâá‰∫å‰∏âÂçÅ„ÄÇ„ÄÇ„ÄÇ<br>Â§ß‰∏âÊÄªË£ÅÁî®mosÁÆ°Êê≠‰∫Ü‰∏Ä‰∏™ÔºåÊïàÊûúÂ∑Æ‰∏çÂ§öÔºåÊàêÊú¨Âç¥‰Ωé‰∫Ü‰∏çÂ∞ë„ÄÇÂêéÊù•ÊàëÊØïËÆæË¶ÅÁî®Âà∞ÁîµÊú∫ÊéßÂà∂ÂèàËá™Â∑±Áîª‰∫Ü‰∏ÄÂùóÔºåËôΩÁÑ∂Âè™ÊòØÂèåÈù¢ÊùøÂπ∂‰∏î‰∏∫‰∫ÜËøáÂ§ßÁîµÊµÅÂ§ßÈù¢ÁßØÂºÄÁ™óÔºå‰ΩÜÊòØËä±ÁÇπÊó∂Èó¥‰ºòÂåñlayoutËøòÊòØÂèØ‰ª•ÊääÊùøÂ≠êÂÅöÂæóÂæàÂ∞è„ÄÇÂ§ß‰∏âÁöÑÁîµË∑ØÂõæÁî±‰∫éÁ°¨ÁõòÊåÇ‰∫ÜÊâæ‰∏çÂà∞‰∫Ü:( Ë¥¥‰∏™ÊØïËÆæÊê≠ÁöÑMOSH LayoutÂõæÔºö</p>
<p><img src="/2017-11-05/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B9%B3%E8%A1%A1%E8%BD%A6%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0/MOSH1.png" alt="Top" title="Top"><br><img src="/2017-11-05/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B9%B3%E8%A1%A1%E8%BD%A6%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%BF%B0/MOSH2.png" alt="Bottom" title="Bottom"></p>
<p>ËÆæËÆ°Êñá‰ª∂Êå∫Êó©ÁöÑÊó∂ÂÄôÂ∞±‰∏ä‰º†‰∫ÜÔºö<br><a href="https://github.com/codingspirit/MOS_H" target="_blank" rel="noopener">Coding Spirit:MOS_H</a></p>
<h2 id="MCUÈÄâÂûã"><a href="#MCUÈÄâÂûã" class="headerlink" title="MCUÈÄâÂûã"></a>MCUÈÄâÂûã</h2><p>Â§ß‰∫åÁî®ÁöÑÊòØcoldfireÔºåÂ§ß‰∏âÁî®ÁöÑÊòØK60„ÄÇColdfireÊòØfreescaleËá™Â∑±ÁöÑÊû∂ÊûÑÔºåÂΩìÊó∂Êàë‰ª¨Áî®ÁöÑmcf52255, ÊúÄÈ´ò80MHzÔºåK60ÊòØCortex-M4ÔºåÊúÄÈ´ò100MHzÔºåÂè¶Â§ñÂ∏¶FPU„ÄÇ<br>Â∞±ÊàëÁöÑ‰∏™‰∫∫ÊÑüËßâÊù•ËØ¥ÔºåK60ÁöÑÁªºÂêàÊÄßËÉΩÊòØË¶ÅÂ•Ω‰∫émcf52255ÁöÑ„ÄÇÂè¶Â§ñcoldfireËµÑÊñô‰∏çÂ¶Çk60Â§öÔºåËøôÁÇπÂØπ‰∫éÂàùÂ≠¶ËÄÖÊù•ËØ¥ÊØîËæÉÂÖ≥ÈîÆÔºåÂõ†‰∏∫‰ªéÂáÜÂ§áÂà∞ÂèÇËµõÂè™ÊúâÂá†‰∏™ÊúàÁöÑÊó∂Èó¥Ôºå‰ªéÂ§¥ÂºÄÂßãÂ≠¶‰∏ÄÊ¨æÊ≤°Êé•Ëß¶ËøáÁöÑÊû∂ÊûÑÁöÑMCU‰ºöËä±ÊéâÂ§ßÈáèÊó∂Èó¥„ÄÇ‰ΩÜÊòØColdfireÈÖçÂêàCodewarriorÊúâÁßçSTM32CUBEMXÁöÑÊÑüËßâÔºå‰ª£Á†ÅÁîüÊàêÊÑüËßâËøò‰∏çÈîô„ÄÇ</p>
<h2 id="ËΩØ‰ª∂Âü∫Êú¨Êû∂ÊûÑ"><a href="#ËΩØ‰ª∂Âü∫Êú¨Êû∂ÊûÑ" class="headerlink" title="ËΩØ‰ª∂Âü∫Êú¨Êû∂ÊûÑ"></a>ËΩØ‰ª∂Âü∫Êú¨Êû∂ÊûÑ</h2><p>È¶ñÂÖàË¥¥‰∏™‰ª£Á†ÅÔºö<a href="https://github.com/codingspirit/Balance_Car" target="_blank" rel="noopener">Coding Spirit:Balance_Car</a></p>
<h3 id="ÊòØÂê¶Ë∑ëRTOS"><a href="#ÊòØÂê¶Ë∑ëRTOS" class="headerlink" title="ÊòØÂê¶Ë∑ëRTOS"></a>ÊòØÂê¶Ë∑ëRTOS</h3><p>Ë£∏Â•îÂíåRTOSÂÖ∂ÂÆûÈÉΩËÉΩÂÅöÔºå‰ΩÜÁî±‰∫éPIDÊéßÂà∂ÁöÑÂë®ÊúüÊÄßÔºå‰ΩøÁî®ÂÆöÊó∂Âô®‰∏≠Êñ≠ÊéßÂà∂Âë®ÊúüÔºåËøõË°åÈááÊ†∑„ÄÅËÆ°ÁÆó„ÄÅËæìÂá∫ÊòæÂæóÈùûÂ∏∏ÂíåË∞êÔºå‰ªªÂä°‰∏çÂ§öÁöÑÊÉÖÂÜµ‰∏ãË£∏Â•îÂÖ∂ÂÆûÊõ¥ÂêàÁêÜ‰∏ÄÁÇπ„ÄÇÊàë‰ª¨‰πü‰ΩøÁî®‰∫ÜËøôÁßçÊñπÂºèÔºåÈÄöËøá1msÁöÑÂÆöÊó∂Âô®‰∏≠Êñ≠ËøõË°åÁä∂ÊÄÅÊú∫ÁöÑÂàáÊç¢„ÄÇ</p>
<h3 id="PIDÊéßÂà∂"><a href="#PIDÊéßÂà∂" class="headerlink" title="PIDÊéßÂà∂"></a>PIDÊéßÂà∂</h3><p>ÂØπ‰∫éËá™Âä®Âåñ‰∏ì‰∏öÁöÑÂ≠¶ÁîüÊù•ËØ¥ÔºåËøôÁßçÊéßÂà∂ËøòÊòØËõÆÁÆÄÂçïÁöÑ„ÄÇÈ¶ñÂÖàÂπ≥Ë°°ËΩ¶ÈúÄË¶ÅÂÆûÁé∞‰∏â‰∏™Èó≠ÁéØÔºö<br>1.ËßíÂ∫¶Èó≠ÁéØÔºöÂª∫ËÆÆ‰ΩøÁî®PDÊéßÂà∂„ÄÇÂ¶ÇÊûúÊúâÈôÄËû∫‰ª™ÁöÑËØù‰∏çÁî®ËÆ°ÁÆóÂ∑ÆÂàÜÔºåÁõ¥Êé•ÊääKd*ÈôÄËû∫‰ª™ÊµãÈáèÂÄº‰Ωú‰∏∫DÈ°πÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÊàëÂ∞ùËØïËøáÂä†ÂÖ•IÈ°πÔºåË¶Å‰πàÁ≥ªÁªüÊªûÂêéÈùûÂ∏∏‰∏•ÈáçÔºåË¶Å‰πàÊ≤°‰ªÄ‰πàÁî®„ÄÇ„ÄÇ„ÄÇ<br>2.ÈÄüÂ∫¶Èó≠ÁéØÔºöÂª∫ËÆÆ‰ΩøÁî®PIÊéßÂà∂„ÄÇÂª∫ËÆÆ‰∏çÂä†ÂÖ•DÈ°πÁöÑÂéüÂõ†ÊòØÁ≥ªÁªü‰∏çÈúÄË¶ÅÈ¢ÑÊµãÈÄüÂ∫¶ÔºåÈÄüÂ∫¶ÊòØÊàë‰ª¨Áõ¥Êé•ÁªôÂÆöÁöÑÔºåÊØîËæÉÁ®≥ÂÆö„ÄÇ<br>3.ËΩ¨ÂêëÈó≠ÁéØ: ÂΩìÊó∂‰ΩøÁî®ÁöÑÊòØPDÊéßÂà∂„ÄÇDÈ°πÊù•Ê∫ê‰∫éÁ∫µÂêëÁöÑÈôÄËû∫‰ª™ÊµãÈáèÂÄºÔºåÊàë‰ª¨ÊãÖÂøÉ‰ºöÂá∫Áé∞ËΩ¨ÂêëËøáÁåõÁöÑÊÉÖÂÜµÔºåÂä†ÂÖ•DË¥üÂèçÈ¶àÈôêÂà∂‰∫ÜËΩ¨ÂêëÂä†ÈÄüÂ∫¶Ôºå‰∏çÁÑ∂ÂÆπÊòìÂá∫Áé∞PÂèÇÊï∞ËøáÂ§ßÊó∂ËΩ¶‰ΩìÂéüÂú∞ÊâìËΩ¨ÁöÑ<br>ÊÉÖÂÜµ„ÄÇ<br>Âè¶Â§ñÂ¢ûÈáèÂºèÂíå‰ΩçÁΩÆÂºèPIDÁöÑÈÄâÊã©‰∏çÁî®ËøáÂ§öÁ∫†ÁªìÔºåÂè™ÊúâÈÄüÂ∫¶ÁéØÊúâIÈ°πÔºåÁßØÂàÜÈ•±ÂíåÁöÑÊÉÖÂÜµÂæàÂ∞ëËßÅ„ÄÇ‰∏çËøáÁßØÂàÜÈôêÂπÖÂíåËæìÂá∫ÈôêÂπÖÂæàÊúâÂøÖË¶ÅÔºå‰∏çÁÑ∂ËΩ¶ÂæàÂÆπÊòìÊíûÂùè„ÄÇ„ÄÇ</p>
<h3 id="‰∏ä‰ΩçÊú∫"><a href="#‰∏ä‰ΩçÊú∫" class="headerlink" title="‰∏ä‰ΩçÊú∫"></a>‰∏ä‰ΩçÊú∫</h3><p>ÊàëËÆæËÆ°‰∫Ü‰∏™ÁÆÄÈôãÁöÑÈÄö‰ø°ÂçèËÆÆÔºåÂπ∂‰∏îÂÜô‰∫Ü‰∏§‰∏™ÈÖçÂ•óÁöÑ‰∏ä‰ΩçÊú∫Ôºå‰∏Ä‰∏™ÊòØÂàù‰ª£Ê≤°ÊúâÂõæ‰º†ÂäüËÉΩÔºåÁî®VC++ÂÜôÁöÑÔºåV2.0Â∞±Áî®C#ÂÜô‰∫Ü‰∏Ä‰∏™ÂèØ‰ª•ÂÆûÊó∂‰º†ËæìÂõæÂÉèÁöÑ‰∏ä‰ΩçÊú∫ÔºåÂè¶Â§ñ‰ΩøÁî®‰∫ÜËá™ÂàõÁöÑËúúÊ±ÅÂéãÁº©ÔºåÁ®≥ÂÆö30fpsÂì¶ÔºÅËøôÈáåÂêπ‰∏ÄÊ≥¢ÔºåÊØîÈÇ£‰∫õÊØè4Áßí1Â∏ßÁöÑÂ•ΩÂà∞‰∏çÁü•ÈÅìÂì™ÈáåÂéª‰∫Ü„ÄÇ‰ΩÜÊòØÂΩìÊó∂ÁùÄÊÄ•Áî®Ôºå‰ª£Á†ÅÂÜôÂæóÂæà‰π±„ÄÇ„ÄÇ„ÄÇ<br>V2.0Ê∫ê‰ª£Á†ÅÂú®Ê≠§Ôºö<a href="https://github.com/codingspirit/CarDebugger_V2.0" target="_blank" rel="noopener">Coding Spirit:Car_Debugger_V2.0</a></p>
]]></content>
      <categories>
        <category>È°πÁõÆÊÄªÁªì</category>
      </categories>
      <tags>
        <tag>Êô∫ËÉΩËΩ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Â∏∏Áî®ÁöÑRegex</title>
    <url>/2017-11-01/%E5%B8%B8%E7%94%A8%E7%9A%84Regex/</url>
    <content><![CDATA[<p>ÂΩìËøõË°åÊï∞ÊçÆÂàÜÊûêÊó∂ÔºåÊàë‰ª¨Â∏∏‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÁà¨ÂèñÂ≠óÁ¨¶‰∏≤ÂæóÂà∞ÁõÆÊ†áÊï∞ÊçÆ„ÄÇÔºàÊúâÁÇπÁà¨Ëô´ÁöÑÊÑüËßâÔºâ</p>
<a id="more"></a>

<h2 id="ÁõÆÊ†áÊï∞ÊçÆ‰∏∫ÂçïË°åÁöÑÊÉÖÂÜµ"><a href="#ÁõÆÊ†áÊï∞ÊçÆ‰∏∫ÂçïË°åÁöÑÊÉÖÂÜµ" class="headerlink" title="ÁõÆÊ†áÊï∞ÊçÆ‰∏∫ÂçïË°åÁöÑÊÉÖÂÜµ"></a>ÁõÆÊ†áÊï∞ÊçÆ‰∏∫ÂçïË°åÁöÑÊÉÖÂÜµ</h2><p>ÊúÄÁÆÄÂçïÁöÑÊÉÖÂÜµÔºåÂ≠óÁ¨¶‰∏≤ÂèØËÉΩÊòØËøôÊ†∑ÁöÑÔºö<br>!@#$%[mark1]data[mark2]!@#$%<br>!@#$%[mark1]data[mark2]!@#$%<br>‚Ä¶</p>
<p>ÂÖ∂‰∏≠‚Äú!@#$%‚Äù‰∏∫‰∏ÄÂ§ßÊÆµ‰∏çÂÖ≥ÂøÉÁöÑÂ≠óÁ¨¶Ôºå[mark1]Âíå[mark2]‰∏∫ÁâπÂÆöÂ≠óÁ¨¶Áî®‰∫éÊ†áËÆ∞Êï∞ÊçÆ„ÄÇÊàë‰ª¨ÁöÑÁõÆÊ†áÊòØÂ∞ÜËøô‰∏™dataÂæóÂà∞„ÄÇ<br>‰ª•Ê∫êÂ≠óÁ¨¶‰∏≤„ÄÅ[mark1]Âíå[mark2]ÂàÜÂà´‰∏∫srcData„ÄÅ‚Äù#‚Äù„ÄÅ‚Äù!‚Äù‰∏∫‰æãÔºåÂèØ‰ª•ËøôÊ†∑ÂåπÈÖçÔºö</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">string</span> <span class="keyword">value</span> = Regex.Match(srcData, <span class="string">"(?&lt;=#).*?(?=!)"</span>).Value;</span><br></pre></td></tr></table></figure>
<p>Ê≠§ÊÆµ‰ª£Á†ÅÂ∞ÜÂØπ#Âíå!‰πãÈó¥ÁöÑÈô§\n‰πãÂ§ñÁöÑÂ≠óÁ¨¶ËøõË°åÈùûË¥™Â©™ÂåπÈÖç„ÄÇ<br>Ê≥®ÊÑèÔºåÁî±‰∫é‰ΩøÁî®‰∫ÜÈÄöÈÖçÁ¨¶‚Äù.‚Äù,Â¶ÇÊûúÁõÆÊ†áÊï∞ÊçÆÊòØÂ§öË°å,ËØ•Ê≠£ÂàôË°®ËææÂºèÂ∞Ü‰∏çËÉΩÊ≠£Á°ÆÂåπÈÖç„ÄÇ</p>
<h2 id="ÁõÆÊ†áÊï∞ÊçÆ‰∏∫Â§öË°å"><a href="#ÁõÆÊ†áÊï∞ÊçÆ‰∏∫Â§öË°å" class="headerlink" title="ÁõÆÊ†áÊï∞ÊçÆ‰∏∫Â§öË°å"></a>ÁõÆÊ†áÊï∞ÊçÆ‰∏∫Â§öË°å</h2><p>ÂâçÊÆµÊó∂Èó¥ÁöÑ‰∏Ä‰∏™È°πÁõÆ‰∏≠Ë¶ÅÊ±Ç‰ªé.cÊñá‰ª∂‰∏≠Ëé∑ÂæóÊüê‰∏ÄstructÁöÑÂÖ®ÈÉ®ÊàêÂëòÂèòÈáèÔºå‰∏ÄËà¨ËÄåË®ÄstructÂÜÖÈÉ®ÈÉΩÊòØÂ§öË°åÁöÑÔºåÂõ†Ê≠§‰∏ä‰∏ÄÁßçÊñπÂºèÊó†Ê≥ïÊ≠£Á°ÆÂåπÈÖç„ÄÇ</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">string</span> <span class="keyword">value</span> = Regex.Match(srcData, <span class="string">@"(?&lt;=[START])[\s\S]+?(?=[END])"</span>).Value;</span><br></pre></td></tr></table></figure>
<p>ËøôÁßçÊñπÂºèÂ∞±ÊØîËæÉÁ≤óÊö¥‰∫ÜÔºåÁõ¥Êé•ÈùûË¥™Â©™ÂåπÈÖçÊâÄÊúâÂ≠óÁ¨¶ÔºàÈùûÁ©∫Ê†ºÂíåÁ©∫Ê†ºÂ≠óÁ¨¶ÔºâÔºåÊâÄ‰ª•ÂæóÂà∞ÁöÑÊï∞ÊçÆÈÄöÂ∏∏ÂåÖÊã¨\r\n„ÄÇ</p>
]]></content>
      <categories>
        <category>ÁºñÁ®ãÁõ∏ÂÖ≥</category>
      </categories>
      <tags>
        <tag>C#</tag>
        <tag>Regex</tag>
      </tags>
  </entry>
  <entry>
    <title>Welcome</title>
    <url>/2017-10-31/Welcome/</url>
    <content><![CDATA[<h3 id="Welcome"><a href="#Welcome" class="headerlink" title="Welcome"></a>Welcome</h3><center>
<img src="/assets/img/coding_spirit.jpg" width="50%" height="50%">
</center>
ËøôÊòØ‰∏Ä‰∏™Áî®node.js+hexo+githubÊê≠Âª∫Ëµ∑Êù•ÁöÑÂ∞èÁ´ô„ÄÇÂ•ΩËÆ∞ÊÄß‰∏çÂ¶ÇÁÉÇÈîÆÁõòÔºå‰ª•ÂêéÂ§öÂ§öÂÜôblogÂíØÔºÅ]]></content>
      <categories>
        <category>Èöè‰æøÂÜôÂÜô</category>
      </categories>
      <tags>
        <tag>Êó•Âøó</tag>
      </tags>
  </entry>
</search>
